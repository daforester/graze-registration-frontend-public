import{i as A,T as I,r as m,l as b,A as N,q as e,O as P,L as F,n as w,h as a,v as l,y as p}from"./index-Cc2MDANl.js";import{G as K}from"./userData-BC4OQ5tV.js";import{C as R}from"./canManageGlobalUsers-BGh2ZbLo.js";import{V as y}from"./VContainer-DFlOzN4r.js";import{V as _,a as k,b as C,e as x}from"./VCard-BSLXX_92.js";import{a as r,V as u}from"./VRow-BeyMI7Hn.js";import{V as g}from"./VTextField-BULePnaE.js";import{V as f}from"./VForm-Cm2M5acN.js";import{V as c}from"./VGrid-BbPkqUTo.js";import"./canDo-DlLbSwxb.js";import"./createSimpleFunctional-Bra3Y3vF.js";import"./forwardRefs-Nj5XGvbu.js";import"./form-DcagUy2f.js";const $=A({__name:"Maintenance",setup(q){const M=I.getInstance(),T=K(),V=m(R(T)),d=P(),v=F(),o=m(!1),n=m(""),U=()=>{d.checkMaintenanceMode().then(s=>{V.value||v.push("/"),o.value=!1}).catch(s=>{s===!0&&(o.value=!0)})},S=()=>{d.setupMaintenanceMode(n.value,1).then(()=>{o.value=!0})},B=()=>{M.setMaintenanceKey(n.value),v.push("/")},G=()=>{M.setMaintenanceKey(n.value),d.disableMaintenanceMode().then(s=>{o.value=!s})};return U(),(s,t)=>o.value?(w(),b(y,{key:0},{default:e(()=>[a(x,{color:"error",class:"mb-4"},{default:e(()=>[a(_,null,{default:e(()=>[a(k,null,{default:e(()=>t[2]||(t[2]=[l(" Maintenance Mode ")])),_:1}),a(C,{class:"text-wrap"},{default:e(()=>t[3]||(t[3]=[l(" System is currently in Maintenance Mode. To bypass or cancel please enter the unlock password below. ")])),_:1})]),_:1})]),_:1}),a(u,null,{default:e(()=>[a(r,null,{default:e(()=>[a(g,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=i=>n.value=i),type:"password",label:"Unlock Password",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:e(()=>[a(r,null,{default:e(()=>[a(f,{onSubmit:p(B,["prevent"])},{default:e(()=>[a(c,{type:"submit",color:"warning"},{default:e(()=>t[4]||(t[4]=[l(" Bypass ")])),_:1})]),_:1})]),_:1}),a(r,{class:"text-right"},{default:e(()=>[a(f,{onSubmit:p(G,["prevent"])},{default:e(()=>[a(c,{type:"submit",color:"success"},{default:e(()=>t[5]||(t[5]=[l(" Deactivate ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):V.value?(w(),b(y,{key:1},{default:e(()=>[a(x,{color:"warning",class:"mb-4"},{default:e(()=>[a(_,null,{default:e(()=>[a(k,null,{default:e(()=>t[6]||(t[6]=[l(" Maintenance Mode ")])),_:1}),a(C,{class:"text-wrap"},{default:e(()=>t[7]||(t[7]=[l(" To enter maintenance mode enter a password and press activate. ")])),_:1})]),_:1})]),_:1}),a(f,{onSubmit:p(S,["prevent"])},{default:e(()=>[a(u,null,{default:e(()=>[a(r,null,{default:e(()=>[a(g,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=i=>n.value=i),type:"password",label:"Unlock Password",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:e(()=>[a(r,null,{default:e(()=>[a(c,{type:"submit",color:"error"},{default:e(()=>t[8]||(t[8]=[l("Activate")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):N("",!0)}});export{$ as default};
