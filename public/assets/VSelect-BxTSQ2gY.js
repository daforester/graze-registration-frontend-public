import{V as me,c as Re}from"./VTextField-BULePnaE.js";import{d as le,p as $,u as re,af as Fe,aP as Le,t as ce,r as U,ai as Oe,s as M,b as Be,aJ as Me,W as de,aO as ge,w as _,aN as Y,c as L,m as H,h as m,ad as Se,a_ as oe,a$ as He,ab as _e,b0 as Ke,H as X,al as Ue,f as he,b1 as Ne,ao as Pe,a as ue,aH as qe,ay as ze,e as $e,o as je,J as te,ag as We,aC as Je,aD as se,aS as pe,aT as ye,as as Xe,aV as Ye,v as Ge}from"./index-Cc2MDANl.js";import{u as Qe}from"./form-DcagUy2f.js";import{f as Te,m as Ze,a as et}from"./forwardRefs-Nj5XGvbu.js";import{f as tt,m as lt,V as nt,a as we}from"./VList-BaVhhU5A.js";import{c as Ve,V as be,a as at,b as Ce,g as ot}from"./VOverlay-CScIurE4.js";import{u as ne,z as Ie,i as xe,c as Ae,a as ut,b as st,d as ke}from"./VGrid-BbPkqUTo.js";import{b as it}from"./scopeId-BdGPhOEj.js";import{V as rt}from"./VCheckboxBtn-D2Pszjyg.js";import{a as ct}from"./VChip-CqkseP7S.js";const dt=$({id:String,submenu:Boolean,...Se(at({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ce}}),["absolute"])},"VMenu"),ft=le()({name:"VMenu",props:dt(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:a}=g;const s=re(e,"modelValue"),{scopeId:i}=it(),{isRtl:y}=Fe(),w=Le(),u=ce(()=>e.id||`v-menu-${w}`),o=U(),f=Oe(Ve,null),d=M(new Set);_e(Ve,{register(){d.value.add(w)},unregister(){d.value.delete(w)},closeParents(n){setTimeout(()=>{var r;!d.value.size&&!e.persistent&&(n==null||(r=o.value)!=null&&r.contentEl&&!Ke(n,o.value.contentEl))&&(s.value=!1,f==null||f.closeParents())},40)}}),Be(()=>{f==null||f.unregister(),document.removeEventListener("focusin",R)}),Me(()=>s.value=!1);async function R(n){var k,v,F;const r=n.relatedTarget,h=n.target;await de(),s.value&&r!==h&&((k=o.value)!=null&&k.contentEl)&&((v=o.value)!=null&&v.globalTop)&&![document,o.value.contentEl].includes(h)&&!o.value.contentEl.contains(h)&&((F=ge(o.value.contentEl)[0])==null||F.focus())}_(s,n=>{n?(f==null||f.register(),Y&&document.addEventListener("focusin",R,{once:!0})):(f==null||f.unregister(),Y&&document.removeEventListener("focusin",R))},{immediate:!0});function A(n){f==null||f.closeParents(n)}function P(n){var r,h,k,v,F;if(!e.disabled)if(n.key==="Tab"||n.key==="Enter"&&!e.closeOnContentClick){if(n.key==="Enter"&&(n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLInputElement&&n.target.closest("form")))return;n.key==="Enter"&&n.preventDefault(),He(ge((r=o.value)==null?void 0:r.contentEl,!1),n.shiftKey?"prev":"next",C=>C.tabIndex>=0)||(s.value=!1,(k=(h=o.value)==null?void 0:h.activatorEl)==null||k.focus())}else e.submenu&&n.key===(y.value?"ArrowRight":"ArrowLeft")&&(s.value=!1,(F=(v=o.value)==null?void 0:v.activatorEl)==null||F.focus())}function E(n){var h;if(e.disabled)return;const r=(h=o.value)==null?void 0:h.contentEl;r&&s.value?n.key==="ArrowDown"?(n.preventDefault(),n.stopImmediatePropagation(),oe(r,"next")):n.key==="ArrowUp"?(n.preventDefault(),n.stopImmediatePropagation(),oe(r,"prev")):e.submenu&&(n.key===(y.value?"ArrowRight":"ArrowLeft")?s.value=!1:n.key===(y.value?"ArrowLeft":"ArrowRight")&&(n.preventDefault(),oe(r,"first"))):(e.submenu?n.key===(y.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(n.key))&&(s.value=!0,n.preventDefault(),setTimeout(()=>setTimeout(()=>E(n))))}const T=L(()=>H({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-controls":u.value,onKeydown:E},e.activatorProps));return ne(()=>{const n=be.filterProps(e);return m(be,H({ref:o,id:u.value,class:["v-menu",e.class],style:e.style},n,{modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,absolute:!0,activatorProps:T.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":A,onKeydown:P},i),{activator:a.activator,default:function(){for(var r=arguments.length,h=new Array(r),k=0;k<r;k++)h[k]=arguments[k];return m(Ie,{root:"VMenu"},{default:()=>{var v;return[(v=a.default)==null?void 0:v.call(a,...h)]}})}})}),Te({id:u,ΨopenChildren:d},o)}}),vt=$({renderless:Boolean,...Ae()},"VVirtualScrollItem"),mt=le()({name:"VVirtualScrollItem",inheritAttrs:!1,props:vt(),emits:{"update:height":e=>!0},setup(e,g){let{attrs:a,emit:s,slots:i}=g;const{resizeRef:y,contentRect:w}=xe(void 0,"border");_(()=>{var u;return(u=w.value)==null?void 0:u.height},u=>{u!=null&&s("update:height",u)}),ne(()=>{var u,o;return e.renderless?m(X,null,[(u=i.default)==null?void 0:u.call(i,{itemRef:y})]):m("div",H({ref:y,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(o=i.default)==null?void 0:o.call(i)])})}}),gt=-1,ht=1,ie=100,pt=$({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function yt(e,g){const a=Ue(),s=M(0);he(()=>{s.value=parseFloat(e.itemHeight||0)});const i=M(0),y=M(Math.ceil((parseInt(e.height)||a.height.value)/(s.value||16))||1),w=M(0),u=M(0),o=U(),f=U();let d=0;const{resizeRef:R,contentRect:A}=xe();he(()=>{R.value=o.value});const P=L(()=>{var t;return o.value===document.documentElement?a.height.value:((t=A.value)==null?void 0:t.height)||parseInt(e.height)||0}),E=L(()=>!!(o.value&&f.value&&P.value&&s.value));let T=Array.from({length:g.value.length}),n=Array.from({length:g.value.length});const r=M(0);let h=-1;function k(t){return T[t]||s.value}const v=Ne(()=>{const t=performance.now();n[0]=0;const c=g.value.length;for(let V=1;V<=c-1;V++)n[V]=(n[V-1]||0)+k(V-1);r.value=Math.max(r.value,performance.now()-t)},r),F=_(E,t=>{t&&(F(),d=f.value.offsetTop,v.immediate(),O(),~h&&de(()=>{Y&&window.requestAnimationFrame(()=>{ee(h),h=-1})}))});Pe(()=>{v.clear()});function j(t,c){const V=T[t],S=s.value;s.value=S?Math.min(s.value,c):c,(V!==c||S!==s.value)&&(T[t]=c,v())}function C(t){return t=ue(t,0,g.value.length-1),n[t]||0}function G(t){return wt(n,t)}let N=0,K=0,W=0;_(P,(t,c)=>{c&&(O(),t<c&&requestAnimationFrame(()=>{K=0,O()}))});let q=-1;function z(){if(!o.value||!f.value)return;const t=o.value.scrollTop,c=performance.now();c-W>500?(K=Math.sign(t-N),d=f.value.offsetTop):K=t-N,N=t,W=c,window.clearTimeout(q),q=window.setTimeout(Q,500),O()}function Q(){!o.value||!f.value||(K=0,W=0,window.clearTimeout(q),O())}let Z=-1;function O(){cancelAnimationFrame(Z),Z=requestAnimationFrame(ae)}function ae(){if(!o.value||!P.value)return;const t=N-d,c=Math.sign(K),V=Math.max(0,t-ie),S=ue(G(V),0,g.value.length),p=t+P.value+ie,b=ue(G(p)+1,S+1,g.value.length);if((c!==gt||S<i.value)&&(c!==ht||b>y.value)){const x=C(i.value)-C(S),B=C(b)-C(y.value);Math.max(x,B)>ie?(i.value=S,y.value=b):(S<=0&&(i.value=S),b>=g.value.length&&(y.value=b))}w.value=C(i.value),u.value=C(g.value.length)-C(y.value)}function ee(t){const c=C(t);!o.value||t&&!c?h=t:o.value.scrollTop=c}const l=L(()=>g.value.slice(i.value,y.value).map((t,c)=>{const V=c+i.value;return{raw:t,index:V,key:qe(t,e.itemKey,V)}}));return _(g,()=>{T=Array.from({length:g.value.length}),n=Array.from({length:g.value.length}),v.immediate(),O()},{deep:1}),{calculateVisibleItems:O,containerRef:o,markerRef:f,computedItems:l,paddingTop:w,paddingBottom:u,scrollToIndex:ee,handleScroll:z,handleScrollend:Q,handleItemResize:j}}function wt(e,g){let a=e.length-1,s=0,i=0,y=null,w=-1;if(e[a]<g)return a;for(;s<=a;)if(i=s+a>>1,y=e[i],y>g)a=i-1;else if(y<g)w=i,s=i+1;else return y===g?i:s;return w}const Vt=$({items:{type:Array,default:()=>[]},renderless:Boolean,...pt(),...Ae(),...st()},"VVirtualScroll"),bt=le()({name:"VVirtualScroll",props:Vt(),setup(e,g){let{slots:a}=g;const s=ze("VVirtualScroll"),{dimensionStyles:i}=ut(e),{calculateVisibleItems:y,containerRef:w,markerRef:u,handleScroll:o,handleScrollend:f,handleItemResize:d,scrollToIndex:R,paddingTop:A,paddingBottom:P,computedItems:E}=yt(e,ce(()=>e.items));return $e(()=>e.renderless,()=>{function T(){var h,k;const r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";w.value===document.documentElement?(document[r]("scroll",o,{passive:!0}),document[r]("scrollend",f)):((h=w.value)==null||h[r]("scroll",o,{passive:!0}),(k=w.value)==null||k[r]("scrollend",f))}je(()=>{w.value=ot(s.vnode.el,!0),T(!0)}),Pe(T)}),ne(()=>{const T=E.value.map(n=>m(mt,{key:n.key,renderless:e.renderless,"onUpdate:height":r=>d(n.index,r)},{default:r=>{var h;return(h=a.default)==null?void 0:h.call(a,{item:n.raw,index:n.index,...r})}}));return e.renderless?m(X,null,[m("div",{ref:u,class:"v-virtual-scroll__spacer",style:{paddingTop:te(A.value)}},null),T,m("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:te(P.value)}},null)]):m("div",{ref:w,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:f,style:[i.value,e.style]},[m("div",{ref:u,class:"v-virtual-scroll__container",style:{paddingTop:te(A.value),paddingBottom:te(P.value)}},[T])])}),{calculateVisibleItems:y,scrollToIndex:R}}});function kt(e,g){const a=M(!1);let s;function i(u){cancelAnimationFrame(s),a.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{a.value=!1})})}async function y(){await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>{if(a.value){const o=_(a,()=>{o(),u()})}else u()})}async function w(u){var d,R;if(u.key==="Tab"&&((d=g.value)==null||d.focus()),!["PageDown","PageUp","Home","End"].includes(u.key))return;const o=(R=e.value)==null?void 0:R.$el;if(!o)return;(u.key==="Home"||u.key==="End")&&o.scrollTo({top:u.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await y();const f=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(u.key==="PageDown"||u.key==="Home"){const A=o.getBoundingClientRect().top;for(const P of f)if(P.getBoundingClientRect().top>=A){P.focus();break}}else{const A=o.getBoundingClientRect().bottom;for(const P of[...f].reverse())if(P.getBoundingClientRect().bottom<=A){P.focus();break}}}return{onScrollPassive:i,onKeydown:w}}const St=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Xe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...lt({itemChildren:!1})},"Select"),Pt=$({...St(),...Se(Re({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:{component:Ce}})},"VSelect"),Ot=le()({name:"VSelect",props:Pt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,g){let{slots:a}=g;const{t:s}=We(),i=U(),y=U(),w=U(),{items:u,transformIn:o,transformOut:f}=tt(e),d=re(e,"modelValue",[],l=>o(l===null?[null]:Je(l)),l=>{const t=f(l);return e.multiple?t:t[0]??null}),R=L(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),A=Qe(e),P=L(()=>d.value.map(l=>l.value)),E=M(!1);let T="",n;const r=L(()=>e.hideSelected?u.value.filter(l=>!d.value.some(t=>(e.valueComparator||se)(t,l))):u.value),h=L(()=>e.hideNoData&&!r.value.length||A.isReadonly.value||A.isDisabled.value),k=re(e,"menu"),v=L({get:()=>k.value,set:l=>{var t;k.value&&!l&&((t=y.value)!=null&&t.ΨopenChildren.size)||l&&h.value||(k.value=l)}}),F=ce(()=>v.value?e.closeText:e.openText),j=L(()=>{var l;return{...e.menuProps,activatorProps:{...((l=e.menuProps)==null?void 0:l.activatorProps)||{},"aria-haspopup":"listbox"}}}),C=U(),G=kt(C,i);function N(l){e.openOnClear&&(v.value=!0)}function K(){h.value||(v.value=!v.value)}function W(l){pe(l)&&q(l)}function q(l){var S,p;if(!l.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(v.value=!0),["Escape","Tab"].includes(l.key)&&(v.value=!1),l.key==="Home"?(S=C.value)==null||S.focus("first"):l.key==="End"&&((p=C.value)==null||p.focus("last"));const t=1e3;if(!pe(l))return;const c=performance.now();c-n>t&&(T=""),T+=l.key.toLowerCase(),n=c;const V=u.value.find(b=>b.title.toLowerCase().startsWith(T));if(V!==void 0){d.value=[V];const b=r.value.indexOf(V);Y&&window.requestAnimationFrame(()=>{var x;b>=0&&((x=w.value)==null||x.scrollToIndex(b))})}}function z(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const c=d.value.findIndex(S=>(e.valueComparator||se)(S.value,l.value)),V=t??!~c;if(~c){const S=V?[...d.value,l]:[...d.value];S.splice(c,1),d.value=S}else V&&(d.value=[...d.value,l])}else{const c=t!==!1;d.value=c?[l]:[],de(()=>{v.value=!1})}}function Q(l){var t;(t=C.value)!=null&&t.$el.contains(l.relatedTarget)||(v.value=!1)}function Z(){var l;e.eager&&((l=w.value)==null||l.calculateVisibleItems())}function O(){var l;E.value&&((l=i.value)==null||l.focus())}function ae(l){E.value=!0}function ee(l){if(l==null)d.value=[];else if(ye(i.value,":autofill")||ye(i.value,":-webkit-autofill")){const t=u.value.find(c=>c.title===l);t&&z(t)}else i.value&&(i.value.value="")}return _(v,()=>{if(!e.hideSelected&&v.value&&d.value.length){const l=r.value.findIndex(t=>d.value.some(c=>(e.valueComparator||se)(c.value,t.value)));Y&&window.requestAnimationFrame(()=>{var t;l>=0&&((t=w.value)==null||t.scrollToIndex(l))})}}),_(()=>e.items,(l,t)=>{v.value||E.value&&!t.length&&l.length&&(v.value=!0)}),ne(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||r.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),c=d.value.length>0,V=me.filterProps(e),S=c||!E.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return m(me,H({ref:i},V,{modelValue:d.value.map(p=>p.props.value).join(", "),"onUpdate:modelValue":ee,focused:E.value,"onUpdate:focused":p=>E.value=p,validationValue:d.externalValue,counterValue:R.value,dirty:c,class:["v-select",{"v-select--active-menu":v.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:S,"onClick:clear":N,"onMousedown:control":K,onBlur:Q,onKeydown:q,"aria-label":s(F.value),title:s(F.value)}),{...a,default:()=>m(X,null,[m(ft,H({ref:y,modelValue:v.value,"onUpdate:modelValue":p=>v.value=p,activator:"parent",contentClass:"v-select__content",disabled:h.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Z,onAfterLeave:O},j.value),{default:()=>[t&&m(nt,H({ref:C,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:p=>p.preventDefault(),onKeydown:W,onFocusin:ae,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},G,e.listProps),{default:()=>{var p,b,x;return[(p=a["prepend-item"])==null?void 0:p.call(a),!r.value.length&&!e.hideNoData&&(((b=a["no-data"])==null?void 0:b.call(a))??m(we,{key:"no-data",title:s(e.noDataText)},null)),m(bt,{ref:w,renderless:!0,items:r.value,itemKey:"value"},{default:B=>{var ve;let{item:I,index:J,itemRef:D}=B;const fe=H(I.props,{ref:D,key:I.value,onClick:()=>z(I,null)});return((ve=a.item)==null?void 0:ve.call(a,{item:I,index:J,props:fe}))??m(we,H(fe,{role:"option"}),{prepend:Ee=>{let{isSelected:De}=Ee;return m(X,null,[e.multiple&&!e.hideSelected?m(rt,{key:I.value,modelValue:De,ripple:!1,tabindex:"-1"},null):void 0,I.props.prependAvatar&&m(et,{image:I.props.prependAvatar},null),I.props.prependIcon&&m(ke,{icon:I.props.prependIcon},null)])}})}}),(x=a["append-item"])==null?void 0:x.call(a)]}})]}),d.value.map((p,b)=>{function x(D){D.stopPropagation(),D.preventDefault(),z(p,!1)}const B={"onClick:close":x,onKeydown(D){D.key!=="Enter"&&D.key!==" "||(D.preventDefault(),D.stopPropagation(),x(D))},onMousedown(D){D.preventDefault(),D.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},I=l?!!a.chip:!!a.selection,J=I?Ye(l?a.chip({item:p,index:b,props:B}):a.selection({item:p,index:b})):void 0;if(!(I&&!J))return m("div",{key:p.value,class:"v-select__selection"},[l?a.chip?m(Ie,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:p.title}}},{default:()=>[J]}):m(ct,H({key:"chip",closable:e.closableChips,size:"small",text:p.title,disabled:p.props.disabled},B),null):J??m("span",{class:"v-select__selection-text"},[p.title,e.multiple&&b<d.value.length-1&&m("span",{class:"v-select__selection-comma"},[Ge(",")])])])})]),"append-inner":function(){var B,I;for(var p=arguments.length,b=new Array(p),x=0;x<p;x++)b[x]=arguments[x];return m(X,null,[(B=a["append-inner"])==null?void 0:B.call(a,...b),e.menuIcon?m(ke,{class:"v-select__menu-icon",color:(I=i.value)==null?void 0:I.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Te({isFocused:E,menu:v,select:z},i)}});export{Ot as V,mt as a,kt as b,St as c,ft as d,bt as e,pt as m,yt as u};
