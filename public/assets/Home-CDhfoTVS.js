import{i as K,M as _e,N as Ce,j as Ae,r as _,C as we,w as le,O as se,l as i,n as t,q as n,h as r,P as fe,G as p,v as s,y as Fe,A as y,x as T,k as ce,D as u,H as f,Q as x,F as d,c as Y,z as pe,m as be}from"./index-7f8g6J9S.js";import{G as ie}from"./userData-DmzgFq0m.js";import{_ as Oe}from"./LoginView.vue_vue_type_script_setup_true_lang-O3GZK3e6.js";import{s as ne}from"./index-zHJ-1AxG.js";import{F as I}from"./form-Cqw16b_M.js";import{S as V,a as Re}from"./submission-DAi9v6uc.js";import{u as Se}from"./useStoreAPI-BHVbC5Va.js";import{c as X}from"./canEditForm-B1BT0q3L.js";import{s as Pe}from"./sortSubmissions-BLiX_qgz.js";import{P as Z,a as Ve,u as Ne}from"./useDisplayTransactions-BQV-GWTj.js";import{l as Me}from"./stripe.esm-v5H38J3X.js";import{_ as Te}from"./ModelDialog.vue_vue_type_script_setup_true_lang-y-JOCYbP.js";import{u as $e}from"./useStripeConfig-D02-zVlK.js";import{V as ae}from"./VContainer-Bgspm0iQ.js";import{V as he}from"./VAlert-BXbBsYKA.js";import{V as Le}from"./VForm-CG1ibFfu.js";import{V as q,a as z}from"./VRow-DPqCOOhq.js";import{V as v,o as Ye}from"./VGrid-Di0dmjBj.js";import{V as Ue}from"./VSpacer-ClTsySPd.js";import{V as xe}from"./SaveButton.vue_vue_type_script_setup_true_lang-Ce1tac0v.js";import{f as ze,h as ge}from"./date-DgbCHIwC.js";import{i as Be}from"./index.esm-DLTi3HQ_.js";import{V as Ie,a as te,b as ye,c as oe,d as Ge,e as ke}from"./VCard-DG_UKHGE.js";import{V as De}from"./forwardRefs-NlkYGKRs.js";import{V as He}from"./VTooltip-DSm_Kpi5.js";import{V as qe,a as je,d as Ke,e as We}from"./VList-CWj7M1gi.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./emailFormVariant-DbFKH7n9.js";import"./LoginButton-BWB_i92C.js";import"./VToolbar-C228vxfP.js";import"./VDialog-otOa-Jrf.js";import"./VOverlay-CdnKr92R.js";import"./scopeId-DtSM8_5V.js";import"./useConventionConfig-DtIv8fzT.js";import"./createSimpleFunctional-Blb31Yrb.js";import"./form-Rl9R1K3G.js";const Je=["innerHTML"],Qe=K({__name:"StripePayment",props:_e({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],async setup(S){let D,N;const F=Ce(S,"modelValue"),g=se(),l=ie(),k=Ae(),U=_(),E=_((l==null?void 0:l.Additional.Email)||""),$=_(!1),B=_("");let h;const G=_(!1),{getStripeConfig:W}=$e(),H=_();S.registration&&(H.value=([D,N]=we(()=>W(S.registration.ConventionUUID)),D=await D,N(),D)),le(F,b=>{b&&S.registration&&g.stripePublicKey(S.registration.ConventionUUID).then(async c=>{c&&(U.value=await Me(c),await Q(U.value))})});const J=b=>{B.value=b,$.value=!0};async function Q(b){var m;if(!b)return;const c=await g.stripePaymentIntent(((m=S.registration)==null?void 0:m.RegistrationUUID)||""),R={theme:"stripe"};k.current.value.dark&&(R.theme="night"),h=b.elements({clientSecret:c,appearance:R});const L=h.create("linkAuthentication",{defaultValues:{email:E.value}});L.mount("#link-authentication-element"),L.on("change",C=>{E.value=C.value.email});const a={layout:"tabs"};h.create("payment",a).mount("#payment-element")}async function ee(b,c){var a;if(!c)return;b.preventDefault(),G.value=!0;const R=new URL(location.href);R.pathname+=`payment/stripe/processing/${(a=S.registration)==null?void 0:a.ConventionUUID}`;const{error:L}=await c.confirmPayment({elements:h,confirmParams:{return_url:R.toString(),receipt_email:E.value}});L.type==="card_error"||L.type==="validation_error"?J(L.message):J("An unexpected error occurred."),G.value=!1}return(b,c)=>(t(),i(Te,{modelValue:F.value,"onUpdate:modelValue":c[4]||(c[4]=R=>F.value=R),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:n(()=>[r(ae,{class:"pa-0"},{default:n(()=>[r(he,{class:"mb-2 stripe-payment-information",closable:!0},fe({title:n(()=>[c[5]||(c[5]=s(" Payment Information "))]),_:2},[H.value?{name:"text",fn:n(()=>[p("div",{innerHTML:H.value.payment_information_html},null,8,Je)]),key:"0"}:void 0]),1024),r(Le,{id:"payment-form",onSubmit:c[1]||(c[1]=Fe(R=>ee(R,U.value),["prevent"]))},{default:n(()=>[r(q,null,{default:n(()=>[r(z,null,{default:n(()=>c[6]||(c[6]=[p("div",{id:"link-authentication-element"},null,-1)])),_:1})]),_:1}),r(q,null,{default:n(()=>[r(z,null,{default:n(()=>c[7]||(c[7]=[p("div",{id:"payment-element"},null,-1)])),_:1})]),_:1}),r(q,null,{default:n(()=>[b.registration?(t(),i(z,{key:0,class:"font-weight-bold text-right"},{default:n(()=>[s(" Payment Amount: £"+T(b.registration.Total-b.registration.Paid),1)]),_:1})):y("",!0)]),_:1}),r(q,null,{default:n(()=>[r(z,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:n(()=>[r(v,{color:"error",class:"w-100",onClick:c[0]||(c[0]=R=>F.value=!1)},{default:n(()=>c[8]||(c[8]=[s("Cancel")])),_:1})]),_:1}),r(Ue),r(z,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:n(()=>[r(v,{type:"submit",color:"success",class:"w-100"},fe({default:n(()=>[c[9]||(c[9]=s(" Pay Now "))]),_:2},[G.value?{name:"prepend",fn:n(()=>[r(Ye,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1})]),_:1}),r(xe,{modelValue:$.value,"onUpdate:modelValue":c[3]||(c[3]=R=>$.value=R)},{actions:n(()=>[r(v,{variant:"text",onClick:c[2]||(c[2]=R=>$.value=!1)},{default:n(()=>c[10]||(c[10]=[s(" Close ")])),_:1})]),default:n(()=>[s(T(B.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Xe={key:0},Ze={key:1,class:"v-row"},et={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},tt={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},nt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ot={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},at={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},lt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},st={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},it={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},rt={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},ut={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},dt=K({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(S){const D=S,N=_(ce(D.paymentTransactions));le(D,()=>{N.value=ce(D.paymentTransactions)});const F=(g,l)=>g.Type===Z.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type!==Z.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:g.Type!==Z.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type===Z.PAYMENT_TRANSACTION_TYPE_CHARGE||(g.UpdatedAt||0)>(l.UpdatedAt||0)?1:g.UpdatedAt===l.UpdatedAt?0:-1;return(g,l)=>g.paymentTransactions.length==0&&g.registration.Total==0?(t(),u("p",Xe," Your registration is currently being processed, payment information will appear here when ready. ")):(t(),u("dl",Ze,[(t(!0),u(f,null,x(N.value.sort(F),k=>{var U;return t(),u(f,{key:k.PaymentTransactionUUID},[k.Type===d(Z).PAYMENT_TRANSACTION_TYPE_CHARGE?(t(),u("dt",et,[p("div",tt,T(k.Description.split(":")[0]),1),p("div",nt,T(k.Description.split(":")[1]),1)])):(t(),u("dt",ot,[p("div",at,T((U=d(Ve).find(E=>E.value===k.Type))==null?void 0:U.title),1),p("div",lt," [ "+T(d(ze)(k.UpdatedAt||""))+" ] "+T(k.Description),1)])),p("dd",st," £"+T(k.Amount),1)],64)}),128)),l[0]||(l[0]=p("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),p("dd",it," £"+T(g.registration.Total),1),l[1]||(l[1]=p("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1)),p("dd",rt," £"+T(g.registration.Paid),1),l[2]||(l[2]=p("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1)),p("dd",ut," £"+T(g.registration.Total-g.registration.Paid),1)]))}}),mt=["innerHTML"],vt={key:0},ft={key:0,class:"font-weight-bold float-left pt-1 w-50"},ct={key:1,class:"pa-1"},pt={class:"font-weight-bold float-left pt-1 w-50 pt-3",style:{clear:"both"}},gt={class:"pt-2"},yt={key:0,class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},St={key:1},Tt={class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},Ut={class:"text-red-darken-4"},It={key:1,class:"text-red-darken-4 mt-4"},kt={class:"text-center"},Dt=K({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(S){const D=Se(),N=se(),{getPaymentTransactions:F}=Ne(),g=_(D.GetConventionLogoURL(S.convention.ConventionUUID)),l=_(),k=_([]),U=_([]),E=_([]),$=_(!1),B=_(!1),h=_([]),G=Y(()=>{var a;return X(S.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_REGISTRATION)}),W=Y(()=>{var a;return X(S.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_DEALER)}),H=Y(()=>{var a;return X(S.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_BADGE)}),J=Y(()=>{var a;return X(S.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_ACCOMMODATION)}),Q=Y(()=>{var a;return X(S.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_ADDITIONAL)}),ee=Y(()=>l.value?S.forms.filter(a=>{var e;return a.State.Independent?(e=l.value)!=null&&e.Submissions?a.State.New?!l.value.Submissions.find(m=>{var C;return((C=m.Form)==null?void 0:C.FormUUID)===a.FormUUID}):!1:a.State.New:!1}):S.forms),b=Y(()=>{var a,e;return l.value&&((a=l.value)!=null&&a.Submissions)?!!((e=l.value)!=null&&e.Submissions.find(m=>{var C;return((C=m.Form)==null?void 0:C.Type)==I.FORM_TYPE_REGISTRATION&&(m.Status==V.SUBMISSION_STATUS_ACCEPTED||m.Status==V.SUBMISSION_STATUS_COMPLETED)})):!1}),c=Y(()=>{var a,e;return l.value&&((a=l.value)!=null&&a.Submissions)?!!((e=l.value)!=null&&e.Submissions.find(m=>{var C;return((C=m.Form)==null?void 0:C.Type)==I.FORM_TYPE_REGISTRATION&&m.Status==V.SUBMISSION_STATUS_COMPLETED})):!1}),R=async()=>{l.value&&"RegistrationUUID"in l.value&&N.getRegistrationAllocationPeriods(l.value.RegistrationUUID).then(a=>{a&&(U.value=[],k.value=a,k.value.sort((e,m)=>e.DateStart>m.DateStart?1:-1).forEach(e=>{var C;const m=U.value.find(O=>{var P;return O.name===((P=e.Accommodation)==null?void 0:P.Name)});if(m){const O=m.periods.find(w=>w.start===e.DateEnd),P=m.periods.find(w=>w.end===e.DateStart);O?O.start=e.DateStart:P?P.end=e.DateEnd:m.periods.push({start:e.DateStart,end:e.DateEnd})}else U.value.push({name:((C=e.Accommodation)==null?void 0:C.Name)||"",periods:[{start:e.DateStart,end:e.DateEnd}]})}))}).catch(()=>{})},L=()=>{N.getRegistrationByConvention(S.convention.ConventionUUID).then(a=>{var e;a&&(a.Submissions?(a.Submissions.forEach((m,C)=>{m.Form||(a.Submissions[C].Form=S.forms.find(O=>O.FormUUID===m.FormUUID))}),Pe(a.Submissions)):a.Submissions=[],l.value=a,R(),b.value&&F(((e=l.value)==null?void 0:e.RegistrationUUID)||"").then(m=>{E.value=m}))})};return le(()=>S.forms,()=>{L()}),L(),(a,e)=>{const m=pe("router-link"),C=pe("RouterLink");return t(),i(ke,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:n(()=>[r(Ie,{class:"flex-1-1 align-content-start"},{default:n(()=>[g.value?(t(),i(De,{key:0,src:g.value,title:a.convention.Name,class:"logo text-center"},null,8,["src","title"])):y("",!0),a.convention.Name?(t(),i(te,{key:1,class:"text-center"},{default:n(()=>[s(T(a.convention.Name),1)]),_:1})):y("",!0),a.convention.Description?(t(),i(ye,{key:2,class:"text-wrap subtitle"},{default:n(()=>[p("div",{innerHTML:a.convention.Description},null,8,mt)]),_:1})):y("",!0)]),_:1}),r(oe,null,{default:n(()=>{var O,P,w;return[l.value?(t(),u("dl",vt,[l.value.Reference?(t(),u("dt",ft," Badge No: ")):y("",!0),l.value.Reference?(t(),u("dd",ct," #"+T(l.value.Reference),1)):y("",!0),ee.value.length>0?(t(),u(f,{key:2},[e[5]||(e[5]=p("dt",null,[p("h3",null,"Forms Available")],-1)),e[6]||(e[6]=p("dd",{class:"mb-2"}," The following forms are currently available for completion. ",-1))],64)):y("",!0),(t(!0),u(f,null,x(ee.value,(o,M)=>(t(),u(f,{key:o.FormUUID},[p("dt",pt,T(o.Heading),1),p("dd",gt,[(o==null?void 0:o.Type)===d(I).FORM_TYPE_DEALER?(t(),i(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer/${o.FormUUID}`},{default:n(()=>[o!=null&&o.State.Edit&&W.value?(t(),i(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:n(()=>e[7]||(e[7]=[s(" Open form ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[8]||(e[8]=[s("View")])),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===d(I).FORM_TYPE_BADGE?(t(),i(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge/${o.FormUUID}`},{default:n(()=>[o!=null&&o.State.Edit&&H.value?(t(),i(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:n(()=>e[9]||(e[9]=[s(" Open form ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[10]||(e[10]=[s("View")])),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===d(I).FORM_TYPE_ADDITIONAL?(t(),i(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional/${o.FormUUID}`},{default:n(()=>[o!=null&&o.State.Edit&&Q.value?(t(),i(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:n(()=>e[11]||(e[11]=[s(" Open form ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[12]||(e[12]=[s("View")])),_:1}))]),_:2},1032,["to"])):y("",!0)])],64))),128)),((O=l.value)==null?void 0:O.Submissions.length)>0?(t(),u(f,{key:3},[e[13]||(e[13]=p("dt",{class:"mt-3"},[p("h3",null,"Received Forms")],-1)),e[14]||(e[14]=p("dd",{class:"mb-2"}," The following forms have been received from you. ",-1))],64)):y("",!0),(t(!0),u(f,null,x((P=l.value)==null?void 0:P.Submissions,(o,M)=>{var j,re,ue,de,me,ve;return t(),u(f,{key:o.SubmissionUUID},[o.Form?(t(),u(f,{key:0},[o.Form?(t(),u("dt",yt,T(o.Form.Heading),1)):y("",!0),o.Form?(t(),u("dd",St,[r(He,{modelValue:h.value[M],"onUpdate:modelValue":A=>h.value[M]=A},{activator:n(({props:A})=>[r(v,be({ref_for:!0},A,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:bt=>h.value[M]=!h.value[M]}),null,16,["onClick"])]),default:n(()=>[o.Status===d(V).SUBMISSION_STATUS_NULL?(t(),u(f,{key:0},[s(" There is an error with your submission, please contact the registration team for support. ")],64)):o.Status===d(V).SUBMISSION_STATUS_INCOMPLETE?(t(),u(f,{key:1},[s(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):o.Status===d(V).SUBMISSION_STATUS_OPEN?(t(),u(f,{key:2},[s(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===d(V).SUBMISSION_STATUS_OPEN_2?(t(),u(f,{key:3},[s(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===d(V).SUBMISSION_STATUS_LOCKED?(t(),u(f,{key:4},[s(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===d(V).SUBMISSION_STATUS_LOCKED_2?(t(),u(f,{key:5},[s(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===d(V).SUBMISSION_STATUS_ACCEPTED?(t(),u(f,{key:6},[s(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===d(V).SUBMISSION_STATUS_COMPLETED?(t(),u(f,{key:7},[s(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):o.Status===d(V).SUBMISSION_STATUS_REJECTED?(t(),u(f,{key:8},[s(" Your request has been unsuccessful. Contact the convention team for assistance. ")],64)):o.Status===d(V).SUBMISSION_STATUS_INVALID?(t(),u(f,{key:9},[s(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):o.Status===d(V).SUBMISSION_STATUS_CANCELLED?(t(),u(f,{key:10},[s(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(t(),u(f,{key:11},[s(" Please contact the registration team for support. ")],64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(" "+T(d(Re)(o.Status,(j=o.Form)==null?void 0:j.Type))+" ",1),((re=o.Form)==null?void 0:re.Type)===d(I).FORM_TYPE_REGISTRATION?(t(),i(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration/${o.FormUUID}`},{default:n(()=>{var A;return[(A=o.Form)!=null&&A.State.Edit&&G.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[15]||(e[15]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[16]||(e[16]=[s("View")])),_:1}))]}),_:2},1032,["to"])):((ue=o.Form)==null?void 0:ue.Type)===d(I).FORM_TYPE_ACCOMMODATION?(t(),i(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation/${o.FormUUID}`},{default:n(()=>{var A;return[(A=o.Form)!=null&&A.State.Edit&&J.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[17]||(e[17]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[18]||(e[18]=[s("View")])),_:1}))]}),_:2},1032,["to"])):((de=o.Form)==null?void 0:de.Type)===d(I).FORM_TYPE_DEALER?(t(),i(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer/${o.FormUUID}`},{default:n(()=>{var A;return[(A=o.Form)!=null&&A.State.Edit&&W.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[19]||(e[19]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[20]||(e[20]=[s("View")])),_:1}))]}),_:2},1032,["to"])):((me=o.Form)==null?void 0:me.Type)===d(I).FORM_TYPE_BADGE?(t(),i(m,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge/${o.FormUUID}`},{default:n(()=>{var A;return[(A=o.Form)!=null&&A.State.Edit&&H.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[21]||(e[21]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[22]||(e[22]=[s("View")])),_:1}))]}),_:2},1032,["to"])):((ve=o.Form)==null?void 0:ve.Type)===d(I).FORM_TYPE_ADDITIONAL?(t(),i(m,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional/${o.FormUUID}`},{default:n(()=>{var A;return[(A=o.Form)!=null&&A.State.Edit&&Q.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[23]||(e[23]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[24]||(e[24]=[s("View")])),_:1}))]}),_:2},1032,["to"])):y("",!0)])):y("",!0)],64)):y("",!0)],64)}),128)),((w=l.value)==null?void 0:w.Submissions.length)>=1?(t(!0),u(f,{key:4},x(a.forms,o=>{var M;return t(),u(f,{key:o.FormUUID},[!((M=l.value)!=null&&M.Submissions.find(j=>j.FormUUID===o.FormUUID))&&!o.State.Independent?(t(),u(f,{key:0},[p("dt",Tt,T(o.Heading),1),p("dd",Ut,[e[35]||(e[35]=s(" Requires Completion ")),o.Type===d(I).FORM_TYPE_REGISTRATION?(t(),i(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration/${o.FormUUID}`},{default:n(()=>[o.State.Edit&&G.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[25]||(e[25]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[26]||(e[26]=[s("View")])),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_ACCOMMODATION?(t(),i(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation/${o.FormUUID}`},{default:n(()=>[o.State.Edit&&J.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[27]||(e[27]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[28]||(e[28]=[s("View")])),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_DEALER?(t(),i(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer/${o.FormUUID}`},{default:n(()=>[o.State.Edit&&W.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[29]||(e[29]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[30]||(e[30]=[s("View")])),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_BADGE?(t(),i(m,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge/${o.FormUUID}`},{default:n(()=>[o.State.Edit&&H.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[31]||(e[31]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[32]||(e[32]=[s("View")])),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_ADDITIONAL?(t(),i(m,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional/${o.FormUUID}`},{default:n(()=>[o.State.Edit&&Q.value?(t(),i(v,{key:0,size:"small",variant:"text",color:"success"},{default:n(()=>e[33]||(e[33]=[s(" Edit ")])),_:1})):(t(),i(v,{key:1,size:"small",variant:"text",color:"warning"},{default:n(()=>e[34]||(e[34]=[s("View")])),_:1}))]),_:2},1032,["to"])):y("",!0)])],64)):y("",!0)],64)}),128)):y("",!0)])):y("",!0),l.value&&l.value.Submissions.length>=1&&a.forms.filter(o=>{var M;return!o.State.Independent&&!((M=l.value)!=null&&M.Submissions.find(j=>j.FormUUID==o.FormUUID))}).length>0?(t(),u("div",It,e[36]||(e[36]=[p("strong",null,"There are forms above that require completion, please edit and save them.",-1)]))):y("",!0)]}),_:1}),U.value.length>0?(t(),u(f,{key:0},[r(te,{class:"pb-0"},{default:n(()=>e[37]||(e[37]=[s("Allocated Accommodation")])),_:1}),r(ye,{class:"text-wrap"},{default:n(()=>e[38]||(e[38]=[s("The following accommodation has been allocated to your registration. In some cases this may not have been your first choice.")])),_:1}),r(oe,null,{default:n(()=>[r(qe,{density:"compact"},{default:n(()=>[(t(!0),u(f,null,x(U.value,O=>(t(),i(je,{key:O.name},{default:n(()=>[r(Ke,null,{default:n(()=>[s(T(O.name),1)]),_:2},1024),(t(!0),u(f,null,x(O.periods,P=>(t(),i(We,{key:P.start},{default:n(()=>[s(" ("+T(d(ge)(P.start))+" - "+T(d(ge)(P.end))+")",1),e[39]||(e[39]=p("br",null,null,-1))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})],64)):y("",!0),b.value&&l.value?(t(),u(f,{key:1},[r(te,{class:"pb-4"},{default:n(()=>e[40]||(e[40]=[s("Payment Information")])),_:1}),r(oe,null,{default:n(()=>[r(dt,{"payment-transactions":E.value,registration:l.value},null,8,["payment-transactions","registration"])]),_:1})],64)):y("",!0),r(Ge,null,{default:n(()=>{var O,P;return[a.convention.DetailLink?(t(),i(v,{key:0,color:"warning",href:a.convention.DetailLink,variant:"flat"},{default:n(()=>[s(T(d(ne).buttonDetails),1)]),_:1},8,["href"])):y("",!0),r(Ue),G.value?(t(),u(f,{key:1},[(O=l.value)!=null&&O.Submissions.find(w=>{var o;return((o=w.Form)==null?void 0:o.Type)===d(I).FORM_TYPE_REGISTRATION})?(t(),i(C,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:n(()=>[r(v,{color:"primary",variant:"flat"},{default:n(()=>[s(T(d(ne).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(t(),u(f,{key:0},[(P=a.forms.find(w=>w.Type===d(I).FORM_TYPE_REGISTRATION))!=null&&P.State.New?(t(),i(C,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:n(()=>[r(v,{color:"success",variant:"flat"},{default:n(()=>[s(T(d(ne).buttonRegister),1)]),_:1})]),_:1},8,["to"])):y("",!0)],64))],64)):b.value&&l.value&&l.value.Total>l.value.Paid?(t(),u(f,{key:2},[r(v,{color:"success",variant:"elevated",onClick:e[0]||(e[0]=w=>$.value=!0)},{default:n(()=>e[41]||(e[41]=[s(" Make Payment ")])),_:1}),l.value?(t(),i(Qe,{key:0,"payment-transactions":E.value,registration:l.value,modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=w=>$.value=w)},null,8,["payment-transactions","registration","modelValue"])):y("",!0)],64)):l.value&&c.value&&l.value.Total==l.value.Paid?(t(),u(f,{key:3},[r(v,{color:"success",variant:"elevated",onClick:e[2]||(e[2]=w=>B.value=!0)},{default:n(()=>e[42]||(e[42]=[s(" Show Ticket ")])),_:1}),r(Te,{modelValue:B.value,"onUpdate:modelValue":e[4]||(e[4]=w=>B.value=w),scrollable:!0,title:"Convention Ticket",width:"auto"},{actions:n(()=>[r(v,{onClick:e[3]||(e[3]=w=>B.value=!1),width:"100%"},{default:n(()=>e[43]||(e[43]=[s("Close")])),_:1})]),default:n(()=>[r(d(Be),{value:l.value.RegistrationUUID,width:"200"},null,8,["value"]),p("p",kt,[p("strong",null,"#"+T(l.value.Reference),1)])]),_:1},8,["modelValue"])],64)):y("",!0)]}),_:1})]),_:1})}}}),Et=Ee(Dt,[["__scopeId","data-v-af89ce4a"]]),_t=K({__name:"Conventions",setup(S){const D=se(),N=Se(),F=_([]),g=_([]),l=_([]);return D.getOpenConventionsList().then(k=>{k&&(g.value=[...g.value,...k],D.getAvailableConventionForms(g.value.map(U=>U.ConventionUUID)).then(U=>{l.value=[...l.value,...U]}).catch(U=>{console.error(U)}),D.getAttendedConventions().then(U=>{F.value=U}))}).catch(()=>{}),(k,U)=>(t(),u(f,null,[r(ae,null,{default:n(()=>[r(q,{class:"justify-center"},{default:n(()=>[(t(!0),u(f,null,x(g.value,E=>(t(),i(z,{key:E.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:n(()=>[r(Et,{convention:E,forms:l.value.filter($=>$.ConventionUUID===E.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}),F.value.length>0?(t(),i(ae,{key:0,fluid:"",class:"px-0"},{default:n(()=>[r(q,{class:"bg-blue-darken-4"},{default:n(()=>[r(z,null,{default:n(()=>U[0]||(U[0]=[p("h3",{class:"font-weight-regular px-4"}," Convention Sticker Collection ",-1)])),_:1})]),_:1}),r(q,{class:"justify-center"},{default:n(()=>[(t(!0),u(f,null,x(F.value,E=>(t(),i(z,{key:E.ConventionUUID,cols:"8",sm:"6",md:"4",lg:"3",xl:"2"},{default:n(()=>[r(ke,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:n(()=>[r(Ie,{class:"flex-1-1 align-content-start"},{default:n(()=>[r(De,{src:d(N).GetConventionLogoURL(E.ConventionUUID),title:E.Name,class:"logo text-center"},null,8,["src","title"]),E.Name?(t(),i(te,{key:0,class:"text-center text-wrap"},{default:n(()=>[s(T(E.Name),1)]),_:2},1024)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):y("",!0)],64))}}),Ct={};function At(S,D){return t(),u("div")}const wt=Ee(Ct,[["render",At]]),Ft=K({__name:"MainView",emits:["pageTitle"],setup(S,{emit:D}){D("pageTitle","Upcoming Conventions"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const g=localStorage.getItem("gjt_token"),l=localStorage.getItem("ajt_token");return g?(localStorage.removeItem("gjt_token"),location.href=g):l&&(localStorage.removeItem("ajt_token"),location.href=l),_(ie()),(k,U)=>(t(),u(f,null,[r(_t),r(wt)],64))}}),cn=K({__name:"Home",props:{loggedIn:{type:Boolean}},emits:["pageTitle"],setup(S,{emit:D}){const N=ie(),F=D;return F("pageTitle","Login"),(g,l)=>(t(),u("div",null,[g.loggedIn&&d(N)?(t(),i(Ft,{key:0,onPageTitle:l[0]||(l[0]=k=>F("pageTitle",k))})):(t(),i(Oe,{key:1}))]))}});export{cn as default};
