import{i as Fe,M as Ve,N as He,r as V,E as xa,D as z,n as _,l as N,A as ee,q as d,H as me,Q as je,h as s,v as Q,x as oe,O as Mt,G as ie,F as x,a1 as Hl,m as gn,k as ja,w as qe,X as Sa,c as la,P as Ba,a2 as Gl,a3 as Wl,T as ql,a4 as zl,b as pr,L as yr,y as ft,o as gr,a5 as Jl,a6 as Kl,a7 as Ql,a8 as Xl,Y as Zl,$ as ei,R as ti,C as Jn,U as at}from"./index-D1IdJcDr.js";import{_ as ai,D as ni,a as ri,b as oi,c as li,d as ii,e as si,f as ui,g as di,h as ci,i as mi,L as hn,M as Un,U as Tn,j as Rt,A as mt,u as un,k as fi,P as vi,l as Kn,m as ve,n as pi,o as Me,p as yi}from"./runner-Xli-vDB2.js";import{a as hr,b as gi}from"./FormRenderer.vue_vue_type_style_index_0_lang-CK3vGPz2.js";import{F as ke,a as hi}from"./form-Cqw16b_M.js";import{b as Ui,c as Ur,d as Qn,S as Ti}from"./submission-DAi9v6uc.js";import{C as bi}from"./canManageGlobalUsers-CkdbC0sm.js";import{_ as _a}from"./ModelDialog.vue_vue_type_script_setup_true_lang-BNijRK1W.js";import{V as bn,a as ua,d as Tr,c as Si}from"./VList-dnLyDLDE.js";import{V as se,d as Sn}from"./VGrid-Bv_0hRDR.js";import{V as br,b as _i}from"./forwardRefs-KgRCCg1e.js";import{s as Di}from"./sortSubmissions-BLiX_qgz.js";import{u as Ai}from"./useStoreAPI-DRgmhfwe.js";import{u as Sr}from"./useModel-yPlLQE32.js";import{a as _r,V as Dr,e as Ar,d as Gt}from"./VTabs-0L0h39Be.js";import{u as wi,P as Ci}from"./useDisplayTransactions-BOErM36k.js";import{C as wr,G as Cr}from"./canDo-DUOXP-vd.js";import{G as Ga}from"./userData-Ct5iumXn.js";import{e as qt,V as Da,a as Aa,c as da,d as _n,b as Er}from"./VCard-BoUJuUZM.js";import{V as ge,a as B}from"./VRow-BUrnHE6j.js";import{V as Wt}from"./VSpacer-BrfhdX1T.js";import{_ as Ir}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as cn,a as Ei,l as mn}from"./SaveButton.vue_vue_type_script_setup_true_lang-Dwn90ysX.js";import{V as be}from"./VSelect-DmFXQ4Cd.js";import{_ as kr}from"./SelectTags.vue_vue_type_script_setup_true_lang-B4Vu5oD0.js";import{V as Ii,a as ki}from"./VAlert-olvXw3TP.js";import{V as oa}from"./VCheckbox-DsAX1z5Y.js";import{V as vt}from"./VContainer-Chowp3GE.js";import{S as Ri}from"./setupLogin-BYOoXGmW.js";import{u as Xn,V as Oi}from"./debounce-B6IRZE6y.js";import{_ as fn,u as Mi}from"./useLinkedFields-QI73ABCJ.js";import{b as Vi,u as $i}from"./useConventionSlug-DmVE6Ptb.js";import{_ as Pi}from"./SelectGroups.vue_vue_type_script_setup_true_lang-BknYsC4m.js";import{_ as Li}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-C-YEHwt2.js";import{v as Ot}from"./v4-CtRu48qb.js";import{u as Rr}from"./useAdvancedMode-aE3pqcx2.js";import{V as Le}from"./VTextField-W5fcvv2H.js";import{V as Or,a as vn,b as pn,c as yn}from"./VExpansionPanels-CtPWUQt0.js";import{V as Ya}from"./VDialog-Cr_Moxaz.js";import{c as Fi}from"./copyToClipboard-BtcEYe2-.js";import{u as Ni}from"./useAvatar-C_boc_68.js";import{i as xi}from"./index.esm-CcmyX_m5.js";import{a as ji}from"./VDataTable-BJwJzzDq.js";import{_ as Bi}from"./EmailControl.vue_vue_type_script_setup_true_lang-CgL__d5P.js";import{V as Mr}from"./VTextarea-BSDFJ2fZ.js";import{V as Yi}from"./VFileInput-D3EziWI6.js";import{V as Zn}from"./VSheet-C8ppHz6X.js";import{V as er,a as Hi}from"./VToolbar-DakFPRLD.js";import"./date-DgbCHIwC.js";import"./canEditRegistrations-C2YEa0fE.js";import"./ticket-DqurB3v3.js";import"./VAutocomplete-CaAMv7_C.js";import"./filter-Bm3v1nWh.js";import"./form-DXdcbEwW.js";import"./VCheckboxBtn-D5dNvNW7.js";import"./VChip-BEIYno7m.js";import"./VForm-Bup78EW9.js";import"./VNavigationDrawer-CwBDCOTo.js";import"./scopeId-A3cp4IWG.js";import"./index-zHJ-1AxG.js";import"./VTooltip-DegtvF3L.js";import"./VOverlay-BKZSf0y-.js";import"./createSimpleFunctional-B6u6eakS.js";import"./VToolbarItems-Bj17TBFH.js";import"./VTable-stZLBWjh.js";import"./useConventionConfig-DPhG4lbi.js";import"./EmailEditor.vue_vue_type_script_setup_true_lang-D1Jhj5fu.js";import"./permission-CXLcAQMS.js";import"./useConventionForms-fEpxILrp.js";const Gi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wi(a){return typeof a=="string"&&Gi.test(a)}const qi=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),zi=Fe({__name:"DataTableItemPanel",props:Ve({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ve(["openActions","showForm"],["update:modelValue"]),setup(a,{emit:o}){const n=xa.getInstance(),i=o,m=He(a,"modelValue"),v=V(),y=Mt(),u=V(),c=V(!1),f=A=>{const w={AdminLayoutUUID:A.AdminLayoutUUID,Limit:1,RegistrationUUID:m.value.RegistrationUUID};y.searchConventionRegistrations(m.value.ConventionUUID,w).then(k=>{k&&k.Total>0&&(v.value=k.Registrations[0],u.value=A,c.value=!0)})},T=A=>{i("openActions",A)},C=(A,w,k)=>{i("showForm",A,w,k)};return n.on("checkin-saved",()=>{c.value=!1}),(A,w)=>(_(),z("div",null,[A.layouts?(_(),N(bn,{key:0},{default:d(()=>[(_(!0),z(me,null,je(A.layouts,k=>(_(),N(ua,{key:k.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:d(()=>[s(Tr,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:d(()=>[s(se,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:Y=>f(k)},{default:d(()=>[Q(oe(k.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):ee("",!0),c.value&&u.value&&v.value?(_(),N(_a,{key:1,modelValue:c.value,"onUpdate:modelValue":w[2]||(w[2]=k=>c.value=k),"hide-extension":!0,fullscreen:!0,title:`#${v.value.Reference} ${v.value.User.DisplayName} - ${u.value.Name} `,scrollable:!0,"card-class":"pa-0"},{default:d(()=>[s(ai,{accommodations:A.accommodations,convention:A.convention,extras:A.extras,forms:A.forms,interests:A.interests,tickets:A.tickets,venues:A.venues,layout:u.value,"onUpdate:layout":w[0]||(w[0]=k=>u.value=k),modelValue:v.value,"onUpdate:modelValue":w[1]||(w[1]=k=>v.value=k),onOpenActions:T,onShowForm:C},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):ee("",!0)]))}}),Ji={key:0},Ki={class:"text-grey-lighten-1"},Qi={key:0,class:"mb-2"},Xi={key:1,class:"mb-2"},Zi={key:0,class:"text-blue text-center"},es={key:1,class:"text-red text-center"},ts={key:2,class:"text-orange text-center"},as={key:3,class:"text-orange text-center"},ns={key:4,class:"text-orange text-center"},rs={key:5,class:"text-orange text-center"},os={key:6,class:"text-green text-center"},ls={key:0},is={key:0},ss=Fe({__name:"RegListRow",props:Ve({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ve(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(a,{emit:o}){const n=o,i=He(a,"modelValue"),m=(u,c)=>{n("showForm",{registration:u,form:c})},v=u=>{n("openActions",u)},y=u=>{n("switchUser",u)};return(u,c)=>u.header.type==="ACCOMMODATION"&&u.accommodations.length>0&&u.item.raw[u.header.key]?(_(),N(ni,{key:0,value:u.item.raw[u.header.key].Data,accommodations:u.accommodations,convention:u.convention,forms:u.forms,tickets:u.tickets,venues:u.venues,registration:u.item.raw[u.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):u.header.type==="EXTRAS"&&u.extras.length>0?(_(),N(ri,{key:1,value:u.item.raw[u.header.key],extras:u.extras},null,8,["value","extras"])):u.header.type==="INTERESTS"&&u.interests.length>0?(_(),N(oi,{key:2,value:u.item.raw[u.header.key],interests:u.interests},null,8,["value","interests"])):u.header.type==="TICKET"&&u.tickets.length>0?(_(),N(li,{key:3,value:u.item.raw[u.header.key],tickets:u.tickets},null,8,["value","tickets"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(_(),N(ii,{key:4,convention:u.convention,"show-controls":!1,modelValue:u.item.raw.registration,"onUpdate:modelValue":c[0]||(c[0]=f=>u.item.raw.registration=f)},null,8,["convention","modelValue"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADDITIONAL_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(_(),z(me,{key:5},[["LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS","LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"].includes(u.header.type)?(_(),z("ul",Ji,[(_(!0),z(me,null,je(u.forms.filter(f=>f.Type===x(ke).FORM_TYPE_ADMIN&&u.item.raw[u.header.key].findIndex(T=>T.Form.ID===f.ID)<0),f=>(_(),z("li",{key:f.Heading},[ie("strong",Ki,oe(f.Heading),1),s(se,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:T=>m(u.item.raw.registration,f)},null,8,["onClick"])]))),128))])):ee("",!0),ie("ul",null,[(_(!0),z(me,null,je(u.item.raw[u.header.key],f=>(_(),z("li",{key:f.Heading},[ie("strong",null,[Q(oe(f.Heading),1),f.Form.Type!==x(ke).FORM_TYPE_ADMIN?(_(),z(me,{key:0},[Q(": ")],64)):ee("",!0)]),f.Form.Type!==x(ke).FORM_TYPE_ADMIN?(_(),z("span",{key:0,class:Hl(x(Ui)(f.Submission.Status))},oe(x(Ur)(f.Submission.Status)),3)):ee("",!0),s(se,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:T=>m(f.Registration,f.Form)},null,8,["onClick"])]))),128))])],64)):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(_(),N(br,{key:6,class:"rounded-circle",src:u.item.raw[u.header.key],height:"32",width:"32"},null,8,["src"])):u.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(_(),z(me,{key:7},[u.item.raw[u.header.key].email?(_(),z("p",Qi,[ie("strong",null,[c[4]||(c[4]=Q("Email")),u.item.raw[u.header.key].email.length>1?(_(),z(me,{key:0},[Q("s")],64)):ee("",!0)]),c[6]||(c[6]=ie("br",null,null,-1)),(_(!0),z(me,null,je(u.item.raw[u.header.key].email,f=>(_(),z(me,{key:f},[Q(oe(f),1),c[5]||(c[5]=ie("br",null,null,-1))],64))),128))])):ee("",!0),u.item.raw[u.header.key].telegram?(_(),z("p",Xi,[c[7]||(c[7]=ie("strong",null,"Telegram",-1)),c[8]||(c[8]=ie("br",null,null,-1)),Q(oe(u.item.raw[u.header.key].telegram),1)])):ee("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(_(),z(me,{key:8},[u.item.raw[u.header.key]=="NOT_REQUIRED"?(_(),z("div",Zi,"No Payment Requested")):u.item.raw[u.header.key]=="MISSING_REQUIRED"?(_(),z("div",es,"Partner Payment Not Requested")):u.item.raw[u.header.key]=="AWAITING_PARTNER"?(_(),z("div",ts,"Awaiting Partner Payment")):u.item.raw[u.header.key]=="ALL_REQUIRED"?(_(),z("div",as,"Awaiting Payments")):u.item.raw[u.header.key]=="REQUIRED"?(_(),z("div",ns,"Awaiting Payment")):u.item.raw[u.header.key]=="ADDITIONAL_REQUIRED"?(_(),z("div",rs,"Awaiting Additional Payments")):(_(),z("div",os,"Completed"))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(_(),z(me,{key:9},[s(se,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:c[1]||(c[1]=f=>v(u.item.raw[u.header.key]))}),x(bi)(u.user)?(_(),N(se,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:c[2]||(c[2]=f=>y(u.item.raw[u.header.key]))})):ee("",!0)],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(_(),z(me,{key:10},[u.item.raw[u.header.key].length===1?(_(),z("em",ls," Not in a group ")):(_(),z(me,{key:1},[ie("ul",null,[(_(!0),z(me,null,je(u.item.raw[u.header.key],f=>(_(),z("li",{key:f.UUID,class:"ml-0"},[Q(" #"+oe(f.Reference)+" : "+oe(f.Name)+" ",1),f.IsLeader?(_(),z("strong",is,"(Leader)")):ee("",!0)]))),128))]),c[9]||(c[9]=ie("strong",null,"Total:",-1)),Q(" "+oe(u.item.raw[u.header.key].length),1)],64))],64)):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_TAGS"?(_(),N(si,{key:11,registration:u.item.raw.registration,meta:u.header.meta},null,8,["registration","meta"])):u.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(_(),z(me,{key:12},[i.value.registration?(_(),N(zi,{key:0,accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tickets:u.tickets,venues:u.venues,layouts:u.item.raw[u.header.key].Layouts,modelValue:i.value.registration,"onUpdate:modelValue":c[3]||(c[3]=f=>i.value.registration=f),onOpenActions:v,onShowForm:m},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):ee("",!0)],64)):(_(),z(me,{key:13},[Q(oe(u.item.raw[u.header.key]),1)],64))}}),tr=Fe({__name:"RegistrationActionTabs",props:Ve({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=He(a,"modelValue");return(i,m)=>(_(),N(_r,gn({modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v)},o),{default:d(()=>[(_(!0),z(me,null,je(i.tabs,v=>(_(),N(Dr,{value:v.value,key:v.value},{default:d(()=>[Q(oe(v.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),us=(a=void 0,o)=>a===void 0?!1:wr(a,Cr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).EditPaymentTransactions,ds={class:"mb-4"},cs={class:"v-row"},ms={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},fs={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},vs={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ps={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},ys={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},gs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},hs={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Us={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ts=Fe({__name:"PaymentActions",props:Ve({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=V(!1),n=V(),i=V([]),m=V(new Date().getTime()),v=V(!1),y=He(a,"modelValue"),u=V(ja(y.value));qe(y,()=>{u.value=ja(y.value)});const c=Mt();c.getConvention(y.value.ConventionUUID).then(w=>{w&&(v.value=us(Ga(),w))});const f=()=>{c.generateRegistrationCharges(y.value.RegistrationUUID,"preview").then(w=>{w&&(i.value=w.PaymentTransactions,n.value=w.Registration,m.value=new Date().getTime())}).catch(()=>{})};f();const T=()=>{c.generateRegistrationCharges(y.value.RegistrationUUID,"apply").then(w=>{w&&(i.value=w.PaymentTransactions,n.value=w.Registration,m.value=new Date().getTime())})},C=()=>{c.generateRegistrationCharges(y.value.RegistrationUUID,"remove").then(w=>{w&&(i.value=w.PaymentTransactions,n.value=w.Registration,m.value=new Date().getTime())})},{totalCharges:A}=wi();return(w,k)=>(_(),N(qt,null,{default:d(()=>[s(Da,null,{default:d(()=>[s(Aa,null,{default:d(()=>[Q(" Payments (#"+oe(y.value.Reference)+" "+oe(y.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),s(da,null,{default:d(()=>[n.value?(_(),z(me,{key:0},[ie("h3",ds,"#"+oe(n.value.Reference)+" "+oe(n.value.User.DisplayName),1),ie("dl",cs,[(_(!0),z(me,null,je(i.value,Y=>(_(),z(me,{key:Y.PaymentTransactionUUID},[Y.Type===x(Ci).PAYMENT_TRANSACTION_TYPE_CHARGE?(_(),z("dt",ms,[ie("div",fs,oe(Y.Description.split(":")[0])+": ",1),ie("div",vs,oe(Y.Description.split(":")[1]),1)])):ee("",!0),ie("dd",ps," £"+oe(Y.Amount),1)],64))),128)),k[2]||(k[2]=ie("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ie("dd",ys," £"+oe(x(A)(i.value)),1),k[3]||(k[3]=ie("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),ie("dd",gs," £"+oe(n.value.Total),1),k[4]||(k[4]=ie("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),ie("dd",hs," £"+oe(n.value.Paid),1),k[5]||(k[5]=ie("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ie("dd",Us," £"+oe(n.value.Total-n.value.Paid),1)]),s(ge,{class:"flex-row-reverse"},{default:d(()=>[s(B,{class:"text-right"},{default:d(()=>[s(se,{class:"mr-2",color:"warning",onClick:C},{default:d(()=>k[6]||(k[6]=[Q("Remove Charges")])),_:1}),s(se,{color:"primary",onClick:T},{default:d(()=>k[7]||(k[7]=[Q("Apply Charges")])),_:1})]),_:1}),s(Wt),!o.value&&v.value?(_(),N(B,{key:0},{default:d(()=>[s(se,{color:"secondary",onClick:k[0]||(k[0]=Y=>o.value=!0)},{default:d(()=>k[8]||(k[8]=[Q("Transaction Entry")])),_:1})]),_:1})):ee("",!0)]),_:1})],64)):ee("",!0),s(ui,{"can-edit":v.value,registration:y.value,"show-editor":o.value,onCloseEditor:k[1]||(k[1]=Y=>o.value=!1),updated:m.value,onChange:f},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),bs=Ir(Ts,[["__scopeId","data-v-4ff9737f"]]),Ss=Fe({__name:"RegistrationFormStatus",props:Ve({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Mt(),n=He(a,"modelValue"),i=(m,v)=>{const y=n.value.Submissions.find(u=>u.SubmissionUUID==v);if(!y){m&&m("Submission not found");return}o.setSubmissionStatus(v,y.Status).then(u=>{u?(n.value.Submissions.forEach((c,f)=>{n.value.Submissions[f].Status=c.Status}),m&&m("Status Saved")):m&&m("Status not saved")}).catch(()=>{m&&m("Status not saved")})};return(m,v)=>(_(),N(qt,null,{default:d(()=>[s(Da,null,{default:d(()=>[s(Aa,null,{default:d(()=>[Q("Status (#"+oe(n.value.Reference)+" "+oe(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(da,null,{default:d(()=>[s(bn,null,{default:d(()=>[(_(!0),z(me,null,je(n.value.Submissions,y=>(_(),N(ua,{key:y.SubmissionUUID,class:"pa-0"},{default:d(()=>[s(ge,{class:"py-2 align-center"},{default:d(()=>[s(B,{cols:"9",sm:"10",md:"10",lg:"9"},{default:d(()=>{var u;return[s(be,{modelValue:y.Status,"onUpdate:modelValue":c=>y.Status=c,items:x(Qn),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((u=m.forms.find(c=>c.FormUUID==y.FormUUID))==null?void 0:u.Name)||""},{selection:d(()=>[s(Sn,{class:"mr-4 d-none d-sm-inline"},{default:d(()=>{var c;return[Q(oe((c=x(Qn).find(f=>f.value===y.Status))==null?void 0:c.icon),1)]}),_:2},1024),Q(" "+oe(x(Ur)(y.Status)),1)]),item:d(({item:c,props:{onClick:f}})=>[s(ua,{title:c.title,"prepend-icon":c.raw.icon,onClick:f},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),s(B,{cols:"3",sm:"2",md:"2",lg:"1"},{default:d(()=>[s(cn,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,y.SubmissionUUID)},null,8,["onClick"]),s(cn,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,y.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),_s={class:"mb-4"},Ds=Fe({__name:"RegistrationTags",props:Ve({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=Mt(),n=He(a,"modelValue"),i=V(ja(n.value)),m=V(!1),v=V(i.value.Tags);qe(n,()=>{i.value=ja(n.value)});const y=({callback:u})=>{const c=[],f=[];i.value.Tags.forEach(T=>{v.value.find(A=>A.TagUUID===T.TagUUID)||c.push(T.TagUUID)}),v.value.forEach(T=>{i.value.Tags.find(A=>T.TagUUID===A.TagUUID)||f.push(T.TagUUID)}),o.updateRegistrationTags(c,f,i.value.RegistrationUUID).then(T=>{T?u&&(u("Tags Saved"),n.value.Tags=T.Tags):u&&u("Error Saving Tags")}).catch(()=>{u&&u("Error Saving Tags")})};return(u,c)=>(_(),N(qt,null,{default:d(()=>[s(Da,null,{default:d(()=>[s(Aa,null,{default:d(()=>[Q("Tags (#"+oe(i.value.Reference)+" "+oe(i.value.User.DisplayName)+")",1)]),_:1})]),_:1}),s(da,null,{default:d(()=>[s(Ii,{class:"my-4"},{default:d(()=>[s(ki,null,{default:d(()=>c[2]||(c[2]=[Q("Caution")])),_:1}),c[3]||(c[3]=ie("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1))]),_:1}),ie("h3",_s,"#"+oe(i.value.Reference)+" "+oe(i.value.User.DisplayName),1),s(kr,{modelValue:i.value.Tags,"onUpdate:modelValue":c[0]||(c[0]=f=>i.value.Tags=f),convention:i.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":m.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),s(_n,{class:"px-4 align-start"},{default:d(()=>[s(oa,{label:"Show UUID",modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=f=>m.value=f)},null,8,["modelValue"]),s(cn,{onClick:y,variant:"flat"})]),_:1})]),_:1}))}}),As=Ir(Ds,[["__scopeId","data-v-7d39acf0"]]),ar=Fe({__name:"RegistrationActionWindows",props:Ve({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ve(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=He(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration");return(y,u)=>(_(),N(Ar,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=c=>i.value=c),disabled:!0,touch:!1},{default:d(()=>[s(Gt,{value:"badges"},{default:d(()=>[i.value=="badges"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(di,{convention:y.convention,registration:x(v)},null,8,["convention","registration"])]),_:1})):ee("",!0)]),_:1}),s(Gt,{value:"emails"},{default:d(()=>[i.value=="emails"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(ci,{registration:x(v)},null,8,["registration"])]),_:1})):ee("",!0)]),_:1}),s(Gt,{value:"notes"},{default:d(()=>[i.value=="notes"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(mi,{convention:y.convention,expanded:!1,registration:x(v)},null,8,["convention","registration"])]),_:1})):ee("",!0)]),_:1}),s(Gt,{value:"payments"},{default:d(()=>[i.value=="payments"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(bs,{modelValue:x(v),"onUpdate:modelValue":u[0]||(u[0]=c=>Sa(v)?v.value=c:null),forms:y.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):ee("",!0)]),_:1}),s(Gt,{value:"status"},{default:d(()=>[i.value=="status"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(Ss,{modelValue:x(v),"onUpdate:modelValue":u[1]||(u[1]=c=>Sa(v)?v.value=c:null),forms:y.forms},null,8,["modelValue","forms"])]),_:1})):ee("",!0)]),_:1}),s(Gt,{value:"tags"},{default:d(()=>[i.value=="tags"?(_(),N(vt,{key:0,class:"pa-0 mx-0",fluid:!0},{default:d(()=>[s(As,{modelValue:x(v),"onUpdate:modelValue":u[2]||(u[2]=c=>Sa(v)?v.value=c:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):ee("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),ws=(a,o)=>a===void 0?!1:wr(a,Cr.GROUP_TYPE_CONVENTION,o.ConventionUUID,o).ViewPaymentTransactions,Cs={key:0},Es={key:1},nr=Fe({__name:"RegistrationActions",props:Ve({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:Ve(["update:registration"],["update:modelValue"]),setup(a,{emit:o}){const n=a,i=He(a,"modelValue"),v=Sr(n,o,void 0,void 0,"registration"),y=V("notes"),u=Ga(),c=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return ws(u,n.convention)&&c.splice(2,0,{label:"Payments",value:"payments"}),(f,T)=>f.useDialog?(_(),z("div",Cs,[s(_a,{modelValue:i.value,"onUpdate:modelValue":T[3]||(T[3]=C=>i.value=C),title:f.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:d(()=>[s(tr,{modelValue:y.value,"onUpdate:modelValue":T[0]||(T[0]=C=>y.value=C),tabs:c,"show-arrows":!0},null,8,["modelValue"])]),default:d(()=>[s(ar,{modelValue:y.value,"onUpdate:modelValue":T[1]||(T[1]=C=>y.value=C),registration:x(v),"onUpdate:registration":T[2]||(T[2]=C=>Sa(v)?v.value=C:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:c,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(_(),z("div",Es,[s(tr,{modelValue:y.value,"onUpdate:modelValue":T[4]||(T[4]=C=>y.value=C),tabs:c,"show-arrows":!0},null,8,["modelValue"]),s(ar,{modelValue:y.value,"onUpdate:modelValue":T[5]||(T[5]=C=>y.value=C),registration:x(v),"onUpdate:registration":T[6]||(T[6]=C=>Sa(v)?v.value=C:null),accommodations:f.accommodations,convention:f.convention,extras:f.extras,forms:f.forms,interests:f.interests,tabs:c,tickets:f.tickets,venues:f.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Vr=(a,o)=>{a.forEach(n=>{n.Items.forEach(i=>{(i.SectionField==null||i.SectionField.Field==null)&&o.find(m=>{m.Sections.find(v=>{if(v.Fields){const y=v.Fields.find(u=>u.SectionFieldUUID===i.SectionFieldUUID);if(y)return i.SectionField=y,!0}})})})})},Is={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},ks={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Rs={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Os={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Ms={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Vs={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},$s={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ps={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Ls={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Fs={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Ns={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},xs={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},js={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Bs={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Ys={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Hs={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Gs={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ws={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},qs={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},zs={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Js={red:Is,pink:ks,purple:Rs,deepPurple:Os,indigo:Ms,blue:Vs,lightBlue:$s,cyan:Ps,teal:Ls,green:Fs,lightGreen:Ns,lime:xs,yellow:js,amber:Bs,orange:Ys,deepOrange:Hs,brown:Gs,blueGrey:Ws,grey:qs,shades:zs},Ks=Fe({__name:"EditAdminLayoutSearch",props:Ve({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=He(a,"modelValue");n.value.Search||(n.value.Search=[]);const i=V(o.formOptions),m=()=>{n.value.Search.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Search.length,DefaultSort:!1,Meta:{}})},v=u=>{const c=n.value.Search.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);c!=-1&&n.value.Search.splice(c,1)},y=u=>{const c=i.value.find(f=>f.value===u.SectionFieldUUID);c&&(u.SectionFieldID=c.object.ID,u.SectionField=c.object)};return(u,c)=>(_(),z(me,null,[(_(!0),z(me,null,je(n.value.Search,f=>(_(),N(ge,{key:f.LayoutItemUUID},{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:f.SourceType,"onUpdate:modelValue":T=>f.SourceType=T,label:"Source Type",items:x(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(B,null,{default:d(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(_(),N(be,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":T=>f.SectionFieldUUID=T,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:T=>y(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(_(),N(be,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":T=>f.MetaField=T,label:"Miscellaneous Data",items:x(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(_(),N(be,{key:2,modelValue:f.UserField,"onUpdate:modelValue":T=>f.UserField=T,label:"User Profile Data",items:x(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ee("",!0)]),_:2},1024),s(B,null,{default:d(()=>[s(se,{icon:"mdi:mdi-delete",onClick:T=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(se,{onClick:m,color:"primary"},{default:d(()=>c[0]||(c[0]=[Q(" Add Search Item ")])),_:1})],64))}}),Qs=Fe({__name:"EditAdminLayoutFilter",props:Ve({formOptions:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=a,n=He(a,"modelValue");n.value.Filter||(n.value.Filter=[]);const i=V(o.formOptions),m=()=>{n.value.Filter.push({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:n.value.AdminLayoutID,LayoutPanelUUID:n.value.AdminLayoutUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,Align:"",Order:n.value.Filter.length,DefaultSort:!1,Meta:{}})},v=u=>{const c=n.value.Filter.findIndex(f=>f.LayoutItemUUID===u.LayoutItemUUID);c!=-1&&n.value.Filter.splice(c,1)},y=u=>{const c=i.value.find(f=>f.value===u.SectionFieldUUID);c&&(u.SectionFieldID=c.object.ID,u.SectionField=c.object)};return(u,c)=>(_(),z(me,null,[(_(!0),z(me,null,je(n.value.Filter,f=>(_(),N(ge,{key:f.LayoutItemUUID},{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:f.SourceType,"onUpdate:modelValue":T=>f.SourceType=T,label:"Source Type",items:x(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(B,null,{default:d(()=>[f.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(_(),N(be,{key:0,modelValue:f.SectionFieldUUID,"onUpdate:modelValue":T=>f.SectionFieldUUID=T,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:T=>y(f)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):f.SourceType==="LAYOUT_ITEM_SOURCE_META"?(_(),N(be,{key:1,modelValue:f.MetaField,"onUpdate:modelValue":T=>f.MetaField=T,label:"Miscellaneous Data",items:x(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):f.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(_(),N(be,{key:2,modelValue:f.UserField,"onUpdate:modelValue":T=>f.UserField=T,label:"User Profile Data",items:x(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ee("",!0)]),_:2},1024),s(B,null,{default:d(()=>[s(se,{icon:"mdi:mdi-delete",onClick:T=>v(f)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(se,{onClick:m,color:"primary"},{default:d(()=>c[0]||(c[0]=[Q(" Add Filter Item ")])),_:1})],64))}}),Xs={key:0,class:"text-warning text-right pl-1"},Zs=Fe({__name:"EditAdminLayout",props:Ve({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ve(["change","delete"],["update:modelValue"]),setup(a,{emit:o}){const n=Rr(),i=He(a,"modelValue"),m=V([]),v=Mt(),y=o,u=V(Object.assign({},...a.layouts.map(W=>W.Panels.map(F=>F.Items.map(O=>{if(!O.Meta)return{};const H={};return Object.entries(O.Meta).forEach(D=>{Array.isArray(D[1])?(H[`${O.LayoutItemUUID}.${D[0]}`]=[],D[1].forEach(he=>{H[`${O.LayoutItemUUID}.${D[0]}`].push(he.toString())})):D[1]!==void 0&&D[1]!==null&&(H[`${O.LayoutItemUUID}.${D[0]}`]=[D[1].toString()])}),H}))).flat(2))),c=V(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),f=V(!1),T=V([]);v.getConventionTags(a.convention.ConventionUUID).then(W=>{W&&(T.value=W)}).catch(()=>{});const C=()=>({ID:0,LayoutPanelUUID:Ot(),AdminLayoutID:i.value.ID,AdminLayoutUUID:i.value.AdminLayoutUUID,Name:"",Order:i.value.Panels.length+1,Items:[],Search:[],Filter:[],PanelStyle:Kn.PANEL_STYLE_FLEX,RequiredFormType:ke.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),A=W=>()=>({ID:0,LayoutItemUUID:Ot(),LayoutPanelID:W.ID,LayoutPanelUUID:W.LayoutPanelUUID,Label:"",SourceType:Rt.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:W.Items.length+1,DefaultSort:!1,Meta:{}}),w=(W,F)=>{W.Meta[F]=u.value[`${W.LayoutItemUUID}.${F}`]},k=W=>{const F=m.value.find(O=>O.value===W.SectionFieldUUID);F&&(W.SectionFieldID=F.object.ID,W.SectionField=F.object)};v.getConventionForms(i.value.ConventionUUID).then(W=>{W&&(W.forEach(F=>F.Sections.forEach(O=>O.Fields&&m.value.push(...O.Fields.map(H=>{var he;return{title:`${F.Name} - ${O.Name} - ${(he=H.Field)==null?void 0:he.Name}`,value:H.SectionFieldUUID,object:H}})))),m.value.sort(Vi("title")),Vr(i.value.Panels,W))});const Y=la(()=>{switch(i.value.Type){case mt.ADMIN_LAYOUT_PANELS:return"Panels";case mt.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});qe(i,()=>{y("change")},{deep:!0});const re=la(()=>{const W=/([a-zA-Z]+)(\d+)/;return Object.entries(Js).map(([F,O])=>Object.entries(O).map(([H,D])=>{const he=W.exec(H);return!he||he.length<3?void 0:{Title:`${un(F).split(/(?=[A-Z])/).join(" ")} ${un(he[1])} ${un(he[2])}`,CSSName:`${F}-${he[1]}-${he[2]}`,Value:D}})).flat().filter(F=>!!F).sort((F,O)=>F.Title>O.Title?1:F.Title==O.Title?0:-1)});return(W,F)=>(_(),N(vt,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(Le,{modelValue:i.value.Name,"onUpdate:modelValue":F[0]||(F[0]=O=>i.value.Name=O),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(B,{cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:i.value.Type,"onUpdate:modelValue":F[1]||(F[1]=O=>i.value.Type=O),label:"Layout Type",items:x(fi),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),i.value.Type==x(mt).ADMIN_LAYOUT_PANELS?(_(),N(B,{key:0,cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:i.value.RunnerLayoutUUID,"onUpdate:modelValue":F[2]||(F[2]=O=>i.value.RunnerLayoutUUID=O),clearable:!0,items:W.layouts.filter(O=>O.Type===x(mt).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):ee("",!0)]),_:1}),s(ge,null,{default:d(()=>[s(B,null,{default:d(()=>[s(fn,{modelValue:i.value.Panels,"onUpdate:modelValue":F[3]||(F[3]=O=>i.value.Panels=O),"new-item":C,closeable:!1,title:Y.value,label:"Name","slot-name-prefix":"panel"},Ba({_:2},[je(i.value.Panels,(O,H)=>({name:`panel_${H}`,fn:d(()=>[s(vt,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(Le,{modelValue:O.Name,"onUpdate:modelValue":D=>O.Name=D,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i.value.Type===x(mt).ADMIN_LAYOUT_PANELS?(_(),N(B,{key:0,cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:O.PanelStyle,"onUpdate:modelValue":D=>O.PanelStyle=D,items:x(vi),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):ee("",!0),s(B,{cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:O.RequiredFormType,"onUpdate:modelValue":D=>O.RequiredFormType=D,items:x(hi),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(B,{cols:"12",sm:"6"},{default:d(()=>[s(Pi,{label:"Required Groups",variant:"outlined",modelValue:O.RequiredGroupMemberships,"onUpdate:modelValue":D=>O.RequiredGroupMemberships=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),s(B,{cols:"12",sm:"6"},{default:d(()=>[s(kr,{label:"Registration Tags",variant:"outlined",modelValue:O.RequiredRegistrationTags,"onUpdate:modelValue":D=>O.RequiredRegistrationTags=D,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),x(n)?(_(),N(ge,{key:0},{default:d(()=>[s(B,null,{default:d(()=>[s(Or,{variant:"accordion"},{default:d(()=>[s(vn,null,{default:d(()=>[s(pn,null,{default:d(()=>F[7]||(F[7]=[Q(" Filters ")])),_:1}),s(yn,null,{default:d(()=>[F[8]||(F[8]=ie("p",null," Fixed search settings to pre-filter results by ",-1)),s(Qs,{modelValue:i.value.Panels[H],"onUpdate:modelValue":D=>i.value.Panels[H]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024),s(vn,null,{default:d(()=>[s(pn,null,{default:d(()=>F[9]||(F[9]=[Q(" Search Options ")])),_:1}),s(yn,null,{default:d(()=>[F[10]||(F[10]=ie("p",null," Dynamic search options ",-1)),s(Ks,{modelValue:i.value.Panels[H],"onUpdate:modelValue":D=>i.value.Panels[H]=D,"form-options":m.value},null,8,["modelValue","onUpdate:modelValue","form-options"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ee("",!0),i.value.Type===x(mt).ADMIN_LAYOUT_TABLE?(_(),N(ge,{key:1},{default:d(()=>[s(B,null,{default:d(()=>[s(oa,{modelValue:O.Meta.challenge,"onUpdate:modelValue":D=>O.Meta.challenge=D,label:"Require challenge on search"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ee("",!0),i.value.Type===x(mt).ADMIN_LAYOUT_PANELS&&O.PanelStyle===x(Kn).PANEL_STYLE_FLEX?(_(),N(ge,{key:2},{default:d(()=>[s(B,{cols:"12",class:"py-0 my-0"},{default:d(()=>F[11]||(F[11]=[ie("h4",null,"Grid Size (Max 12)",-1)])),_:1}),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols,"onUpdate:modelValue":D=>O.Meta.cols=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols_xs,"onUpdate:modelValue":D=>O.Meta.cols_xs=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols_sm,"onUpdate:modelValue":D=>O.Meta.cols_sm=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols_md,"onUpdate:modelValue":D=>O.Meta.cols_md=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols_lg,"onUpdate:modelValue":D=>O.Meta.cols_lg=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(Le,{modelValue:O.Meta.cols_xl,"onUpdate:modelValue":D=>O.Meta.cols_xl=D,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ee("",!0)]),_:2},1024),s(fn,{modelValue:O.Items,"onUpdate:modelValue":D=>O.Items=D,"new-item":A(O),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Ba({_:2},[je(O.Items,(D,he)=>({name:`item_${he}`,fn:d(()=>[s(vt,{class:"px-0 mx-0",fluid:!0},{default:d(()=>{var pe,P;return[s(ge,null,{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(Le,{modelValue:D.Label,"onUpdate:modelValue":E=>D.Label=E,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s(ge,null,{default:d(()=>[s(B,{cols:"12",sm:"6"},{default:d(()=>[s(be,{modelValue:D.SourceType,"onUpdate:modelValue":E=>D.SourceType=E,label:"Source Type",items:x(hn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),s(B,{cols:"12",sm:"6"},{default:d(()=>[D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(_(),N(be,{key:0,modelValue:D.SectionFieldUUID,"onUpdate:modelValue":E=>D.SectionFieldUUID=E,label:"Form Data",items:m.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:E=>k(D)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):D.SourceType==="LAYOUT_ITEM_SOURCE_META"?(_(),N(be,{key:1,modelValue:D.MetaField,"onUpdate:modelValue":E=>D.MetaField=E,label:"Miscellaneous Data",items:x(Un),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):D.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(_(),N(be,{key:2,modelValue:D.UserField,"onUpdate:modelValue":E=>D.UserField=E,label:"User Profile Data",items:x(Tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ee("",!0)]),_:2},1024)]),_:2},1024),W.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((P=(pe=D.SectionField)==null?void 0:pe.Field)==null?void 0:P.Type)===x(hr).TEXT?(_(),N(ge,{key:0},{default:d(()=>[s(B,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:d(()=>[s(oa,{modelValue:D.Meta.DirectEdit,"onUpdate:modelValue":E=>D.Meta.DirectEdit=E,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:d(()=>[s(be,{modelValue:D.Meta.DirectEditPermission,"onUpdate:modelValue":E=>D.Meta.DirectEditPermission=E,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ee("",!0),W.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===x(ve).META_DATA_SOURCE_BADGE_DISPLAY?(_(),N(ge,{key:1},{default:d(()=>[s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(oa,{modelValue:D.Meta.HideDownloadButton,"onUpdate:modelValue":E=>D.Meta.HideDownloadButton=E,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(oa,{modelValue:D.Meta.HideNFCButton,"onUpdate:modelValue":E=>D.Meta.HideNFCButton=E,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ee("",!0),W.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===x(ve).META_DATA_SOURCE_DATA_LAYOUT?(_(),N(ge,{key:2},{default:d(()=>[s(B,{cols:"6",sm:"4",lg:"2"},{default:d(()=>[s(be,{modelValue:u.value[`${D.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[E=>u.value[`${D.LayoutItemUUID}.LayoutUUID`]=E,E=>w(D,"LayoutUUID")],clearable:!0,items:W.layouts.filter(E=>E.Type===x(mt).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ee("",!0),W.layouts&&D.SourceType==="LAYOUT_ITEM_SOURCE_META"&&D.MetaField===x(ve).META_DATA_SOURCE_TAGS?(_(),N(ge,{key:3},{default:d(()=>[s(B,{cols:"6",sm:"6",md:"6",lg:"6"},{default:d(()=>[s(be,{modelValue:u.value[`${D.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[E=>u.value[`${D.LayoutItemUUID}.Tags`]=E,E=>w(D,"Tags")],clearable:!0,items:T.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!u.value[D.LayoutItemUUID]||u.value[D.LayoutItemUUID].length===0?(_(),z("small",Xs," Will show all tags ")):ee("",!0)]),_:2},1024),s(B,{cols:"6"},{default:d(()=>[s(be,{modelValue:D.Meta.TagColour,"onUpdate:modelValue":E=>D.Meta.TagColour=E,items:re.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:d(({item:E})=>[s(se,{size:"x-small",color:E.raw.Value,class:"mr-2"},null,8,["color"]),Q(" "+oe(E.title),1)]),item:d(({props:E,item:G})=>[s(ua,Gl(Wl(E)),{prepend:d(()=>[s(se,{size:"x-small",color:G.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):ee("",!0),i.value.Type===x(mt).ADMIN_LAYOUT_TABLE&&(D.SourceType!==x(Rt).LAYOUT_ITEM_SOURCE_META||D.MetaField!==x(ve).META_DATA_SOURCE_DATA_LAYOUT)?(_(),N(ge,{key:4},{default:d(()=>[s(B,null,{default:d(()=>[s(oa,{modelValue:D.DefaultSort,"onUpdate:modelValue":E=>D.DefaultSort=E,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):ee("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(B,null,{default:d(()=>[s(se,{onClick:F[4]||(F[4]=O=>f.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:d(()=>F[12]||(F[12]=[Q("Delete Layout")])),_:1})]),_:1})]),_:1}),f.value?(_(),N(Li,{key:0,modelValue:f.value,"onUpdate:modelValue":F[5]||(F[5]=O=>f.value=O),message:c.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:F[6]||(F[6]=O=>y("delete"))},null,8,["modelValue","message"])):ee("",!0)]),_:1}))}}),eu=Fe({__name:"EditAdminLayouts",props:Ve({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:Ve(["save"],["update:modelValue"]),setup(a,{emit:o}){const n=He(a,"modelValue"),i=o,m=V([]),v=V([]),y=V([]),u=Mt(),c=()=>({ID:0,AdminLayoutUUID:Ot(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Name:"New Layout",Type:mt.ADMIN_LAYOUT_PANELS,Panels:[]}),f=()=>{let C=!1;[...new Set(y.value)].forEach(w=>{const k=m.value.findIndex(Y=>Y.AdminLayoutUUID===w);k<0||k>=m.value.length||(u.saveAdminLayout(m.value[k]).then(Y=>{Y&&m.value.splice(k,1,Y)}).catch(()=>{}),C=!0)}),v.value.forEach(w=>{u.deleteAdminLayout(w).catch(()=>{})}),v.value=[],y.value=[],C&&i("save")},T=C=>{const A=m.value.findIndex(w=>w.AdminLayoutUUID===C.AdminLayoutUUID);A<0||A>=m.value.length||(m.value[A].ID>0&&v.value.push(C.AdminLayoutUUID),m.value.splice(A,1))};return u.getConventionAdminLayouts(a.convention.ConventionUUID).then(C=>{C&&(m.value=C)}).catch(()=>[]),(C,A)=>(_(),N(Ya,{modelValue:n.value,"onUpdate:modelValue":A[2]||(A[2]=w=>n.value=w),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:d(()=>[s(fn,{modelValue:m.value,"onUpdate:modelValue":A[0]||(A[0]=w=>m.value=w),"new-item":c,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:C.title,label:"Name","slot-name-prefix":"panel",onClose:A[1]||(A[1]=w=>n.value=!1),onSave:f},Ba({_:2},[je(m.value,(w,k)=>({name:`panel_${k}`,fn:d(()=>[s(vt,{class:"px-0 mx-0",fluid:!0},{default:d(()=>[s(ge,null,{default:d(()=>[s(B,{cols:"12"},{default:d(()=>[s(Zs,{modelValue:m.value[k],"onUpdate:modelValue":Y=>m.value[k]=Y,convention:C.convention,layouts:m.value,onChange:Y=>y.value.push(w.AdminLayoutUUID),onDelete:Y=>T(w)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),tu=["href","onClick"],au=Fe({__name:"OperatorSocket",setup(a){const o=Mt(),n=xa.getInstance(),i=Ga(),m=Ni(),v=V(!1),y=pi({wsUri:o.getRunnerSocketURL()}),u=ql.getInstance(),c=V(!1),f=V(!1),T=V([]),C=yr(),A=V("Connecting"),w=V([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),k=P=>{if(P.editing=!1,P.timer&&clearTimeout(P.timer),!P.selectedDuration){P.expires=void 0,P.timer=void 0;return}const E=new Date;E.setTime(new Date().getTime()+P.selectedDuration),P.expires=E,Y(P),H()},Y=P=>{if(P.expires){if(P.timer&&clearTimeout(P.timer),typeof P.expires=="number"){const E=new Date;E.setTime(P.expires),P.expires=E}P.expires&&"getTime"in P.expires&&(P.timer=setTimeout(()=>{P.timer&&clearTimeout(P.timer),F(P)},P.expires.getTime()-Date.now()))}};y.on("authenticated",()=>{c.value=!0;const P={Key:"",Mode:"host",UserUUID:(i==null?void 0:i.UserUUID)||""},E={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(P)};y.JSON(E)}),y.on("auth_failed",()=>{c.value=!1,A.value="Access Denied"}),y.on("badge_serial_update",P=>{n.emit("badge_serial_update",P)}),y.on("close",()=>{A.value="Disconnected"}),y.on("open",()=>{const P=u.getTokenByService("GrazeAPI");A.value="Authenticating",y.send(`AUTH ${P==null?void 0:P.AccessToken}`)}),y.on("runner_connected",P=>{const E=P,G=T.value.find(Te=>Te.key==E.Key);if(!G){re(E.Key,E.UserUUID);return}const ce=qi();ce.DisplayName=E.DisplayName,ce.UserUUID=E.UserUUID,G.users.find(Te=>Te.UserUUID==ce.UserUUID)||G.users.push(ce)}),y.on("runner_disconnected",P=>{const E=P,G=T.value.find(Te=>Te.key==E.Key);if(!G)return;const ce=G.users.findIndex(Te=>Te.UserUUID==E.UserUUID);ce<0||G.users.splice(ce,1)}),y.on("started",()=>{T.value.forEach(P=>{const E={Key:P.key},G={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(E)};y.JSON(G)}),A.value="Connected"}),zl(()=>{O(),xa.getInstance().on("layout_opened",E=>{const G=E;if(!y||!c.value||!G||!G.AdminLayoutUUID||!G.RegistrationUUID)return;const ce={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(G)};y.JSON(ce)})}),pr(()=>{y.destroy()});const re=(P,E)=>{const ce={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:P,UserUUID:E})};y.JSON(ce)},W=()=>{const P=Ot(),G={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:P})};y.JSON(G),T.value.push({key:P,name:"New Session",users:[]}),H()},F=P=>{const E=T.value.findIndex(Te=>Te==P);if(E<0)return;const G={Key:P.key},ce={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(G)};y.JSON(ce),T.value.splice(E,1),H()},O=()=>{const P=sessionStorage.getItem("collaboration.sessions");P&&(T.value=JSON.parse(P),T.value.forEach(E=>{typeof E.expires!="number"&&(E.expires=0),Y(E)}))},H=()=>{const P=[];T.value.forEach(E=>{P.push({name:E.name,expires:typeof E.expires=="number"?E.expires:E.expires?E.expires.getTime():0,key:E.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(P))},D=P=>{const E=C.resolve({name:"RunnerView",params:{user:i==null?void 0:i.UserUUID,session:P.key}}),G=new URL(location.href);return G.pathname=E.href,G.toString()},he=P=>{const E=D(P);return Fi(E),f.value=!0,E},pe=P=>{if(typeof P=="number"){const Te=new Date;Te.setTime(P),P=Te}const E=P.getTime()-Date.now(),G=Math.floor(E/(1e3*60*60)),ce=Math.floor(E%(1e3*60*60)/(1e3*60));return G==0&&ce==0?`${Math.floor(E%6e4/1e3)}s`:`${G}hr${G!=1?"s":""} ${ce}min${ce!=1?"s":""}`};return(P,E)=>c.value?(_(),z(me,{key:0},[s(se,{icon:"mdi:mdi-link-variant",onClick:E[0]||(E[0]=G=>v.value=!0)}),s(_a,{modelValue:v.value,"onUpdate:modelValue":E[4]||(E[4]=G=>v.value=G),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${A.value}`},{actions:d(()=>[s(Wt),s(se,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:W},{default:d(()=>E[5]||(E[5]=[Q(" Create Session ")])),_:1})]),default:d(()=>[s(bn,null,{default:d(()=>[(_(!0),z(me,null,je(T.value,G=>(_(),z(me,{key:G.key},[s(Si,{value:G.key},{activator:d(({props:ce})=>[s(ua,gn({ref_for:!0},ce),{default:d(()=>[s(Tr,null,{default:d(()=>[s(ge,null,{default:d(()=>[s(B,{style:{"max-width":"84px"}},{default:d(()=>[ie("a",{href:he(G),onClick:ft(Te=>he(G),["prevent","stop"]),class:"text-white text-decoration-none"},[s(se,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,tu),s(se,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:ft(Te=>F(G),["stop"])},null,8,["onClick"])]),_:2},1024),s(B,null,{default:d(()=>[s(Le,{modelValue:G.name,"onUpdate:modelValue":Te=>G.name=Te,"hide-details":"",variant:"plain",density:"compact",onChange:H,onClick:E[1]||(E[1]=ft(()=>{},["stop"])),onKeydown:E[2]||(E[2]=ft(()=>{},["stop"]))},{append:d(()=>[Q(oe(G.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:d(()=>[G.editing?(_(),N(be,{key:0,label:"Duration",items:w.value,density:"compact","hide-details":!0,modelValue:G.selectedDuration,"onUpdate:modelValue":[ce=>G.selectedDuration=ce,ce=>k(G)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):G.expires?(_(),z(me,{key:1},[ie("small",null,[E[6]||(E[6]=ie("strong",null,"Expires:",-1)),Q(" "+oe(pe(G.expires)),1)]),s(se,{onClick:ce=>{G.selectedDuration=-1,G.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:d(()=>E[7]||(E[7]=[Q(" (Change Expiry) ")])),_:2},1032,["onClick"])],64)):(_(),N(se,{key:2,onClick:ce=>{G.selectedDuration=-1,G.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:d(()=>E[8]||(E[8]=[Q(" (Set Expiry) ")])),_:2},1032,["onClick"])),(_(!0),z(me,null,je(G.users,ce=>(_(),N(ua,{key:`${G.key}.${ce.UserUUID}`},{append:d(()=>[s(se,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:Te=>re(G.key,ce.UserUUID)},null,8,["onClick"])]),prepend:d(()=>[s(br,{src:x(m)(ce.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:d(()=>[Q(" "+oe(ce.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]),s(x(xi),{value:he(G),width:"200"},null,8,["value"])],64))),128))]),_:1}),s(Ei,{modelValue:f.value,"onUpdate:modelValue":E[3]||(E[3]=G=>f.value=G),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):ee("",!0)}}),nu={style:{opacity:"var(--v-medium-emphasis-opacity)"}},ru=Fe({__name:"Paginator",props:Ve({itemTotal:{}},{currentPage:{required:!0},currentPageModifiers:{},itemsPerPage:{required:!0},itemsPerPageModifiers:{}}),emits:["update:currentPage","update:itemsPerPage"],setup(a){const o=He(a,"currentPage"),n=He(a,"itemsPerPage");return(i,m)=>(_(),N(vt,{fluid:!0},{default:d(()=>[s(ge,{class:"align-center"},{default:d(()=>[s(B,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:d(()=>[s(ji,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),modelModifiers:{number:!0},length:Math.ceil(i.itemTotal/n.value)},null,8,["modelValue","length"])]),_:1}),s(B,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:d(()=>[s(be,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=v=>n.value=v),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),s(B,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:d(()=>[s(Le,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=v=>o.value=v),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(i.itemTotal/n.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),s(B,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:d(()=>[ie("span",nu,[n.value===-1?(_(),z(me,{key:0},[Q(" 1-"+oe(i.itemTotal)+" of "+oe(i.itemTotal),1)],64)):(_(),z(me,{key:1},[Q(oe((o.value-1)*n.value+1)+" - "+oe(o.value*n.value>=i.itemTotal?i.itemTotal:o.value*n.value)+" of "+oe(i.itemTotal),1)],64))])]),_:1})]),_:1})]),_:1}))}});var $r=(a,o,n)=>{if(!o.has(a))throw TypeError("Cannot "+n)},rr=(a,o,n)=>($r(a,o,"read from private field"),n?n.call(a):o.get(a)),ou=(a,o,n)=>{if(o.has(a))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(a):o.set(a,n)},lu=(a,o,n,i)=>($r(a,o,"write to private field"),o.set(a,n),n);const Pr=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],iu=[...Pr,["unknown"]].map(a=>a[0]),Fa=new Map(Pr);function su(a){for(const[o,n]of Fa)if(a===n)return o;return"unknown"}function uu(a){if(Lr(a))return{width:a.naturalWidth,height:a.naturalHeight};if(Fr(a))return{width:a.width.baseVal.value,height:a.height.baseVal.value};if(Nr(a))return{width:a.videoWidth,height:a.videoHeight};if(jr(a))return{width:a.width,height:a.height};if(Yr(a))return{width:a.displayWidth,height:a.displayHeight};if(xr(a))return{width:a.width,height:a.height};if(Br(a))return{width:a.width,height:a.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Lr(a){try{return a instanceof HTMLImageElement}catch{return!1}}function Fr(a){try{return a instanceof SVGImageElement}catch{return!1}}function Nr(a){try{return a instanceof HTMLVideoElement}catch{return!1}}function xr(a){try{return a instanceof HTMLCanvasElement}catch{return!1}}function jr(a){try{return a instanceof ImageBitmap}catch{return!1}}function Br(a){try{return a instanceof OffscreenCanvas}catch{return!1}}function Yr(a){try{return a instanceof VideoFrame}catch{return!1}}function Hr(a){try{return a instanceof Blob}catch{return!1}}function du(a){try{return a instanceof ImageData}catch{return!1}}function cu(a,o){try{const n=new OffscreenCanvas(a,o);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const i=document.createElement("canvas");return i.width=a,i.height=o,i}}async function Gr(a){if(Lr(a)&&!await pu(a))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Fr(a)&&!await yu(a))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Yr(a)&&gu(a))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Nr(a)&&(a.readyState===0||a.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(jr(a)&&Uu(a))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:n}=uu(a);if(o===0||n===0)return null;const i=cu(o,n).getContext("2d");i.drawImage(a,0,0);try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function mu(a){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(a);else if(globalThis.Image){o=new Image;let n="";try{n=URL.createObjectURL(a),o.src=n,await o.decode()}finally{URL.revokeObjectURL(n)}}else return a}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Gr(o)}function fu(a){const{width:o,height:n}=a;if(o===0||n===0)return null;const i=a.getContext("2d");try{return i.getImageData(0,0,o,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function vu(a){if(Hr(a))return await mu(a);if(du(a)){if(hu(a))throw new DOMException("The image data has been detached.","InvalidStateError");return a}return xr(a)||Br(a)?fu(a):await Gr(a)}async function pu(a){try{return await a.decode(),!0}catch{return!1}}async function yu(a){var o;try{return await((o=a.decode)==null?void 0:o.call(a)),!0}catch{return!1}}function gu(a){return a.format===null}function hu(a){return a.data.buffer.byteLength===0}function Uu(a){return a.width===0&&a.height===0}function or(a,o){return a instanceof DOMException?new DOMException(`${o}: ${a.message}`,a.name):a instanceof Error?new a.constructor(`${o}: ${a.message}`):new Error(`${o}: ${a}`)}const lr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Tu(a){return a.join("|")}function bu(a){const o=ir(a);let n=0,i=lr.length-1;for(;n<=i;){const m=Math.floor((n+i)/2),v=lr[m],y=ir(v);if(y===o)return v;y<o?n=m+1:i=m-1}return"None"}function ir(a){return a.toLowerCase().replace(/_-\[\]/g,"")}function Su(a,o){return a.Binarizer[o]}function _u(a,o){return a.CharacterSet[o]}const Du=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Au(a){return Du[a.value]}function wu(a,o){return a.EanAddOnSymbol[o]}function Cu(a,o){return a.TextMode[o]}const ca={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Wr(a,o){return{...o,formats:Tu(o.formats),binarizer:Su(a,o.binarizer),eanAddOnSymbol:wu(a,o.eanAddOnSymbol),textMode:Cu(a,o.textMode),characterSet:_u(a,o.characterSet)}}function qr(a){return{...a,format:bu(a.format),eccLevel:a.eccLevel,contentType:Au(a.contentType)}}const Eu={locateFile:(a,o)=>{const n=a.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${a}`:o+a}};let sr=new WeakMap;function Dn(a,o){var n;const i=sr.get(a);if(i!=null&&i.modulePromise&&o===void 0)return i.modulePromise;const m=(n=i==null?void 0:i.moduleOverrides)!=null?n:Eu,v=a({...m});return sr.set(a,{moduleOverrides:m,modulePromise:v}),v}async function Iu(a,o,n=ca){const i={...ca,...n},m=await Dn(a),{size:v}=o,y=new Uint8Array(await o.arrayBuffer()),u=m._malloc(v);m.HEAPU8.set(y,u);const c=m.readBarcodesFromImage(u,v,Wr(m,i));m._free(u);const f=[];for(let T=0;T<c.size();++T)f.push(qr(c.get(T)));return f}async function ku(a,o,n=ca){const i={...ca,...n},m=await Dn(a),{data:v,width:y,height:u,data:{byteLength:c}}=o,f=m._malloc(c);m.HEAPU8.set(v,f);const T=m.readBarcodesFromPixmap(f,y,u,Wr(m,i));m._free(f);const C=[];for(let A=0;A<T.size();++A)C.push(qr(T.get(A)));return C}({...ca,formats:[...ca.formats]});var An=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var n=o,i,m;n.ready=new Promise((e,t)=>{i=e,m=t});var v=Object.assign({},n),y="./this.program",u=typeof window=="object",c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var f="";function T(e){return n.locateFile?n.locateFile(e,f):f+e}var C;(u||c)&&(c?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",c&&(C=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),n.print||console.log.bind(console);var A=n.printErr||console.error.bind(console);Object.assign(n,v),v=null,n.arguments&&n.arguments,n.thisProgram&&(y=n.thisProgram),n.quit&&n.quit;var w;n.wasmBinary&&(w=n.wasmBinary),typeof WebAssembly!="object"&&De("no native wasm support detected");var k,Y=!1,re,W,F,O,H,D,he,pe;function P(){var e=k.buffer;n.HEAP8=re=new Int8Array(e),n.HEAP16=F=new Int16Array(e),n.HEAPU8=W=new Uint8Array(e),n.HEAPU16=O=new Uint16Array(e),n.HEAP32=H=new Int32Array(e),n.HEAPU32=D=new Uint32Array(e),n.HEAPF32=he=new Float32Array(e),n.HEAPF64=pe=new Float64Array(e)}var E=[],G=[],ce=[];function Te(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)St(n.preRun.shift());Vt(E)}function bt(){Vt(G)}function pt(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)lt(n.postRun.shift());Vt(ce)}function St(e){E.unshift(e)}function $e(e){G.unshift(e)}function lt(e){ce.unshift(e)}var Ye=0,Ne=null;function _t(e){var t;Ye++,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,Ye)}function ze(e){var t;if(Ye--,(t=n.monitorRunDependencies)===null||t===void 0||t.call(n,Ye),Ye==0&&Ne){var r=Ne;Ne=null,r()}}function De(e){var t;(t=n.onAbort)===null||t===void 0||t.call(n,e),e="Aborted("+e+")",A(e),Y=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw m(r),r}var yt="data:application/octet-stream;base64,",Dt=e=>e.startsWith(yt),Xe;Xe="zxing_reader.wasm",Dt(Xe)||(Xe=T(Xe));function it(e){if(e==Xe&&w)return new Uint8Array(w);if(C)return C(e);throw"both async and sync fetching of the wasm failed"}function ma(e){return!w&&(u||c)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>it(e)):Promise.resolve().then(()=>it(e))}function At(e,t,r){return ma(e).then(l=>WebAssembly.instantiate(l,t)).then(l=>l).then(r,l=>{A(`failed to asynchronously prepare wasm: ${l}`),De(l)})}function zt(e,t,r,l){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Dt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(p=>{var h=WebAssembly.instantiateStreaming(p,r);return h.then(l,function(b){return A(`wasm streaming compile failed: ${b}`),A("falling back to ArrayBuffer instantiation"),At(t,r,l)})}):At(t,r,l)}function Jt(){var e={a:Sl};function t(l,p){return Re=l.exports,k=Re.ia,P(),En=Re.ma,$e(Re.ja),ze(),Re}_t();function r(l){t(l.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(l){A(`Module.instantiateWasm callback failed with error: ${l}`),m(l)}return zt(w,Xe,e,r).catch(m),{}}var Vt=e=>{for(;e.length>0;)e.shift()(n)};n.noExitRuntime;var wt=[],Ct=0,Kt=e=>{var t=new Ze(e);return t.get_caught()||(t.set_caught(!0),Ct--),t.set_rethrown(!1),wt.push(t),Bn(t.excPtr),t.get_exception_ptr()},Je=0,gt=()=>{Se(0,0);var e=wt.pop();jn(e.excPtr),Je=0};function Ze(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){D[this.ptr+4>>2]=t},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(t){D[this.ptr+8>>2]=t},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,re[this.ptr+12>>0]=t},this.get_caught=function(){return re[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,re[this.ptr+13>>0]=t},this.get_rethrown=function(){return re[this.ptr+13>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){D[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=Hn(this.get_type());if(t)return D[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}var Be=e=>{throw Je||(Je=e),Je},st=e=>{var t=Je;if(!t)return Ta(0),0;var r=new Ze(t);r.set_adjusted_ptr(t);var l=r.get_type();if(!l)return Ta(0),t;for(var p in e){var h=e[p];if(h===0||h===l)break;var b=r.ptr+16;if(Yn(h,l,b))return Ta(h),t}return Ta(l),t},wa=()=>st([]),Wa=e=>st([e]),Qt=(e,t)=>st([e,t]),Ca=()=>{var e=wt.pop();e||De("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(wt.push(e),e.set_rethrown(!0),e.set_caught(!1),Ct++),Je=t,Je},Bt=(e,t,r)=>{var l=new Ze(e);throw l.init(t,r),Je=e,Ct++,Je},$t=()=>Ct,Xt={},et=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function ut(e){return this.fromWireType(H[e>>2])}var ye={},Et={},Zt={},Ea,ea=e=>{throw new Ea(e)},nt=(e,t,r)=>{e.forEach(function(S){Zt[S]=t});function l(S){var R=r(S);R.length!==e.length&&ea("Mismatched type converter count");for(var $=0;$<e.length;++$)Ke(e[$],R[$])}var p=new Array(t.length),h=[],b=0;t.forEach((S,R)=>{Et.hasOwnProperty(S)?p[R]=Et[S]:(h.push(S),ye.hasOwnProperty(S)||(ye[S]=[]),ye[S].push(()=>{p[R]=Et[S],++b,b===h.length&&l(p)}))}),h.length===0&&l(p)},qa=e=>{var t=Xt[e];delete Xt[e];var r=t.rawConstructor,l=t.rawDestructor,p=t.fields,h=p.map(b=>b.getterReturnType).concat(p.map(b=>b.setterArgumentType));nt([e],h,b=>{var S={};return p.forEach((R,$)=>{var j=R.fieldName,ae=b[$],ne=R.getter,le=R.getterContext,_e=b[$+p.length],Ee=R.setter,Ue=R.setterContext;S[j]={read:xe=>ae.fromWireType(ne(le,xe)),write:(xe,M)=>{var J=[];Ee(Ue,xe,_e.toWireType(J,M)),et(J)}}}),[{name:t.name,fromWireType:R=>{var $={};for(var j in S)$[j]=S[j].read(R);return l(R),$},toWireType:(R,$)=>{for(var j in S)if(!(j in $))throw new TypeError(`Missing field: "${j}"`);var ae=r();for(j in S)S[j].write(ae,$[j]);return R!==null&&R.push(l,ae),ae},argPackAdvance:rt,readValueFromPointer:ut,destructorFunction:l}]})},Ia=(e,t,r,l,p)=>{},za=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ka=e},ka,Oe=e=>{for(var t="",r=e;W[r];)t+=ka[W[r++]];return t},Pt,fe=e=>{throw new Pt(e)};function Ja(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var l=t.name;if(e||fe(`type "${l}" must have a positive integer typeid pointer`),Et.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;fe(`Cannot register type '${l}' twice`)}if(Et[e]=t,delete Zt[e],ye.hasOwnProperty(e)){var p=ye[e];delete ye[e],p.forEach(h=>h())}}function Ke(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Ja(e,t,r)}var rt=8,Ka=(e,t,r,l)=>{t=Oe(t),Ke(e,{name:t,fromWireType:function(p){return!!p},toWireType:function(p,h){return h?r:l},argPackAdvance:rt,readValueFromPointer:function(p){return this.fromWireType(W[p])},destructorFunction:null})},Qa=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),fa=e=>{function t(r){return r.$$.ptrType.registeredClass.name}fe(t(e)+" instance already deleted")},va=!1,Lt=e=>{},Xa=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},pa=e=>{e.count.value-=1;var t=e.count.value===0;t&&Xa(e)},ya=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var l=ya(e,t,r.baseClass);return l===null?null:r.downcast(l)},ga={},U=()=>Object.keys(Yt).length,g=()=>{var e=[];for(var t in Yt)Yt.hasOwnProperty(t)&&e.push(Yt[t]);return e},I=[],L=()=>{for(;I.length;){var e=I.pop();e.$$.deleteScheduled=!1,e.delete()}},q,ue=e=>{q=e,I.length&&q&&q(L)},tt=()=>{n.getInheritedInstanceCount=U,n.getLiveInheritedInstances=g,n.flushPendingDeletes=L,n.setDelayFunction=ue},Yt={},ta=(e,t)=>{for(t===void 0&&fe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},ha=(e,t)=>(t=ta(e,t),Yt[t]),aa=(e,t)=>{(!t.ptrType||!t.ptr)&&ea("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,l=!!t.smartPtr;return r!==l&&ea("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ht(Object.create(e,{$$:{value:t,writable:!0}}))};function X(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=ha(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var l=r.clone();return this.destructor(e),l}function p(){return this.isSmartPointer?aa(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):aa(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var h=this.registeredClass.getActualType(t),b=ga[h];if(!b)return p.call(this);var S;this.isConst?S=b.constPointerType:S=b.pointerType;var R=ya(t,this.registeredClass,S.registeredClass);return R===null?p.call(this):this.isSmartPointer?aa(S.registeredClass.instancePrototype,{ptrType:S,ptr:R,smartPtrType:this,smartPtr:e}):aa(S.registeredClass.instancePrototype,{ptrType:S,ptr:R})}var ht=e=>typeof FinalizationRegistry>"u"?(ht=t=>t,e):(va=new FinalizationRegistry(t=>{pa(t.$$)}),ht=t=>{var r=t.$$,l=!!r.smartPtr;if(l){var p={$$:r};va.register(t,p,t)}return t},Lt=t=>va.unregister(t),ht(e)),dt=()=>{Object.assign(de.prototype,{isAliasOf(e){if(!(this instanceof de)||!(e instanceof de))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var l=e.$$.ptrType.registeredClass,p=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;l.baseClass;)p=l.upcast(p),l=l.baseClass;return t===l&&r===p},clone(){if(this.$$.ptr||fa(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ht(Object.create(Object.getPrototypeOf(this),{$$:{value:Qa(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||fa(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),Lt(this),pa(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||fa(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),I.push(this),I.length===1&&q&&q(L),this.$$.deleteScheduled=!0,this}})};function de(){}var Ge=(e,t)=>Object.defineProperty(t,"name",{value:e}),Z=(e,t,r)=>{if(e[t].overloadTable===void 0){var l=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||fe(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[l.argCount]=l}},na=(e,t,r)=>{n.hasOwnProperty(e)?((r===void 0||n[e].overloadTable!==void 0&&n[e].overloadTable[r]!==void 0)&&fe(`Cannot register public name '${e}' twice`),Z(n,e,e),n.hasOwnProperty(r)&&fe(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,r!==void 0&&(n[e].numArguments=r))},Ht=48,Ft=57,K=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ht&&t<=Ft?`_${e}`:e};function te(e,t,r,l,p,h,b,S){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=l,this.baseClass=p,this.getActualType=h,this.upcast=b,this.downcast=S,this.pureVirtualFunctions=[]}var We=(e,t,r)=>{for(;t!==r;)t.upcast||fe(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function uo(e,t){if(t===null)return this.isReference&&fe(`null is not a valid ${this.name}`),0;t.$$||fe(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||fe(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=We(t.$$.ptr,r,this.registeredClass);return l}function co(e,t){var r;if(t===null)return this.isReference&&fe(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&fe(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||fe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&fe(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var l=t.$$.ptrType.registeredClass;if(r=We(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&fe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:fe(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var p=t.clone();r=this.rawShare(r,It.toHandle(()=>p.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:fe("Unsupporting sharing policy")}return r}function mo(e,t){if(t===null)return this.isReference&&fe(`null is not a valid ${this.name}`),0;t.$$||fe(`Cannot pass "${nn(t)}" as a ${this.name}`),t.$$.ptr||fe(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&fe(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,l=We(t.$$.ptr,r,this.registeredClass);return l}function wn(e){return this.fromWireType(D[e>>2])}var fo=()=>{Object.assign(Ra.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:rt,readValueFromPointer:wn,deleteObject(e){e!==null&&e.delete()},fromWireType:X})};function Ra(e,t,r,l,p,h,b,S,R,$,j){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=l,this.isSmartPointer=p,this.pointeeType=h,this.sharingPolicy=b,this.rawGetPointee=S,this.rawConstructor=R,this.rawShare=$,this.rawDestructor=j,!p&&t.baseClass===void 0?l?(this.toWireType=uo,this.destructorFunction=null):(this.toWireType=mo,this.destructorFunction=null):this.toWireType=co}var Cn=(e,t,r)=>{n.hasOwnProperty(e)||ea("Replacing nonexistant public symbol"),n[e].overloadTable!==void 0&&r!==void 0?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)},vo=(e,t,r)=>{var l=n["dynCall_"+e];return r&&r.length?l.apply(null,[t].concat(r)):l.call(null,t)},Oa=[],En,Ae=e=>{var t=Oa[e];return t||(e>=Oa.length&&(Oa.length=e+1),Oa[e]=t=En.get(e)),t},po=(e,t,r)=>{if(e.includes("j"))return vo(e,t,r);var l=Ae(t).apply(null,r);return l},yo=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),po(e,t,r)}},ct=(e,t)=>{e=Oe(e);function r(){return e.includes("j")?yo(e,t):Ae(t)}var l=r();return typeof l!="function"&&fe(`unknown function pointer with signature ${e}: ${t}`),l},go=(e,t)=>{var r=Ge(t,function(l){this.name=t,this.message=l;var p=new Error(l).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},In,kn=e=>{var t=xn(e),r=Oe(t);return kt(t),r},Ma=(e,t)=>{var r=[],l={};function p(h){if(!l[h]&&!Et[h]){if(Zt[h]){Zt[h].forEach(p);return}r.push(h),l[h]=!0}}throw t.forEach(p),new In(`${e}: `+r.map(kn).join([", "]))},ho=(e,t,r,l,p,h,b,S,R,$,j,ae,ne)=>{j=Oe(j),h=ct(p,h),S&&(S=ct(b,S)),$&&($=ct(R,$)),ne=ct(ae,ne);var le=K(j);na(le,function(){Ma(`Cannot construct ${j} due to unbound types`,[l])}),nt([e,t,r],l?[l]:[],function(_e){_e=_e[0];var Ee,Ue;l?(Ee=_e.registeredClass,Ue=Ee.instancePrototype):Ue=de.prototype;var xe=Ge(j,function(){if(Object.getPrototypeOf(this)!==M)throw new Pt("Use 'new' to construct "+j);if(J.constructor_body===void 0)throw new Pt(j+" has no accessible constructor");var zn=J.constructor_body[arguments.length];if(zn===void 0)throw new Pt(`Tried to invoke ctor of ${j} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(J.constructor_body).toString()}) parameters instead!`);return zn.apply(this,arguments)}),M=Object.create(Ue,{constructor:{value:xe}});xe.prototype=M;var J=new te(j,xe,M,ne,Ee,h,S,$);if(J.baseClass){var Ie,Pe;(Pe=(Ie=J.baseClass).__derivedClasses)!==null&&Pe!==void 0||(Ie.__derivedClasses=[]),J.baseClass.__derivedClasses.push(J)}var ra=new Ra(j,J,!0,!1,!1),Pa=new Ra(j+"*",J,!1,!1,!1),qn=new Ra(j+" const*",J,!1,!0,!1);return ga[e]={pointerType:Pa,constPointerType:qn},Cn(le,xe),[ra,Pa,qn]})},Za=(e,t)=>{for(var r=[],l=0;l<e;l++)r.push(D[t+l*4>>2]);return r};function Uo(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function en(e,t,r,l,p,h){var b=t.length;b<2&&fe("argTypes array size mismatch! Must at least get return value and 'this' types!");var S=t[1]!==null&&r!==null,R=Uo(t),$=t[0].name!=="void",j=b-2,ae=new Array(j),ne=[],le=[],_e=function(){arguments.length!==j&&fe(`function ${e} called with ${arguments.length} arguments, expected ${j}`),le.length=0;var Ee;ne.length=S?2:1,ne[0]=p,S&&(Ee=t[1].toWireType(le,this),ne[1]=Ee);for(var Ue=0;Ue<j;++Ue)ae[Ue]=t[Ue+2].toWireType(le,arguments[Ue]),ne.push(ae[Ue]);var xe=l.apply(null,ne);function M(J){if(R)et(le);else for(var Ie=S?1:2;Ie<t.length;Ie++){var Pe=Ie===1?Ee:ae[Ie-2];t[Ie].destructorFunction!==null&&t[Ie].destructorFunction(Pe)}if($)return t[0].fromWireType(J)}return M(xe)};return Ge(e,_e)}var To=(e,t,r,l,p,h)=>{var b=Za(t,r);p=ct(l,p),nt([],[e],function(S){S=S[0];var R=`constructor ${S.name}`;if(S.registeredClass.constructor_body===void 0&&(S.registeredClass.constructor_body=[]),S.registeredClass.constructor_body[t-1]!==void 0)throw new Pt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${S.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return S.registeredClass.constructor_body[t-1]=()=>{Ma(`Cannot construct ${S.name} due to unbound types`,b)},nt([],b,$=>($.splice(1,0,null),S.registeredClass.constructor_body[t-1]=en(R,$,null,p,h),[])),[]})},Rn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},bo=(e,t,r,l,p,h,b,S,R)=>{var $=Za(r,l);t=Oe(t),t=Rn(t),h=ct(p,h),nt([],[e],function(j){j=j[0];var ae=`${j.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),S&&j.registeredClass.pureVirtualFunctions.push(t);function ne(){Ma(`Cannot call ${ae} due to unbound types`,$)}var le=j.registeredClass.instancePrototype,_e=le[t];return _e===void 0||_e.overloadTable===void 0&&_e.className!==j.name&&_e.argCount===r-2?(ne.argCount=r-2,ne.className=j.name,le[t]=ne):(Z(le,t,ae),le[t].overloadTable[r-2]=ne),nt([],$,function(Ee){var Ue=en(ae,Ee,j,h,b);return le[t].overloadTable===void 0?(Ue.argCount=r-2,le[t]=Ue):le[t].overloadTable[r-2]=Ue,[]}),[]})};function So(){Object.assign(On.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function On(){this.allocated=[void 0],this.freelist=[]}var ot=new On,tn=e=>{e>=ot.reserved&&--ot.get(e).refcount===0&&ot.free(e)},_o=()=>{for(var e=0,t=ot.reserved;t<ot.allocated.length;++t)ot.allocated[t]!==void 0&&++e;return e},Do=()=>{ot.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ot.reserved=ot.allocated.length,n.count_emval_handles=_o},It={toValue:e=>(e||fe("Cannot use deleted val. handle = "+e),ot.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ot.allocate({refcount:1,value:e})}}},Ao=(e,t)=>{t=Oe(t),Ke(e,{name:t,fromWireType:r=>{var l=It.toValue(r);return tn(r),l},toWireType:(r,l)=>It.toHandle(l),argPackAdvance:rt,readValueFromPointer:ut,destructorFunction:null})},wo=(e,t,r)=>{switch(t){case 1:return r?function(l){return this.fromWireType(re[l>>0])}:function(l){return this.fromWireType(W[l>>0])};case 2:return r?function(l){return this.fromWireType(F[l>>1])}:function(l){return this.fromWireType(O[l>>1])};case 4:return r?function(l){return this.fromWireType(H[l>>2])}:function(l){return this.fromWireType(D[l>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Co=(e,t,r,l)=>{t=Oe(t);function p(){}p.values={},Ke(e,{name:t,constructor:p,fromWireType:function(h){return this.constructor.values[h]},toWireType:(h,b)=>b.value,argPackAdvance:rt,readValueFromPointer:wo(t,r,l),destructorFunction:null}),na(t,p)},an=(e,t)=>{var r=Et[e];return r===void 0&&fe(t+" has unknown type "+kn(e)),r},Eo=(e,t,r)=>{var l=an(e,"enum");t=Oe(t);var p=l.constructor,h=Object.create(l.constructor.prototype,{value:{value:r},constructor:{value:Ge(`${l.name}_${t}`,function(){})}});p.values[r]=h,p[t]=h},nn=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Io=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(he[r>>2])};case 8:return function(r){return this.fromWireType(pe[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},ko=(e,t,r)=>{t=Oe(t),Ke(e,{name:t,fromWireType:l=>l,toWireType:(l,p)=>p,argPackAdvance:rt,readValueFromPointer:Io(t,r),destructorFunction:null})},Ro=(e,t,r,l,p,h,b)=>{var S=Za(t,r);e=Oe(e),e=Rn(e),p=ct(l,p),na(e,function(){Ma(`Cannot call ${e} due to unbound types`,S)},t-1),nt([],S,function(R){var $=[R[0],null].concat(R.slice(1));return Cn(e,en(e,$,null,p,h),t-1),[]})},Oo=(e,t,r)=>{switch(t){case 1:return r?l=>re[l>>0]:l=>W[l>>0];case 2:return r?l=>F[l>>1]:l=>O[l>>1];case 4:return r?l=>H[l>>2]:l=>D[l>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Mo=(e,t,r,l,p)=>{t=Oe(t);var h=j=>j;if(l===0){var b=32-8*r;h=j=>j<<b>>>b}var S=t.includes("unsigned"),R=(j,ae)=>{},$;S?$=function(j,ae){return R(ae,this.name),ae>>>0}:$=function(j,ae){return R(ae,this.name),ae},Ke(e,{name:t,fromWireType:h,toWireType:$,argPackAdvance:rt,readValueFromPointer:Oo(t,r,l!==0),destructorFunction:null})},Vo=(e,t,r)=>{var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=l[t];function h(b){var S=D[b>>2],R=D[b+4>>2];return new p(re.buffer,R,S)}r=Oe(r),Ke(e,{name:r,fromWireType:h,argPackAdvance:rt,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})},Mn=(e,t,r,l)=>{if(!(l>0))return 0;for(var p=r,h=r+l-1,b=0;b<e.length;++b){var S=e.charCodeAt(b);if(S>=55296&&S<=57343){var R=e.charCodeAt(++b);S=65536+((S&1023)<<10)|R&1023}if(S<=127){if(r>=h)break;t[r++]=S}else if(S<=2047){if(r+1>=h)break;t[r++]=192|S>>6,t[r++]=128|S&63}else if(S<=65535){if(r+2>=h)break;t[r++]=224|S>>12,t[r++]=128|S>>6&63,t[r++]=128|S&63}else{if(r+3>=h)break;t[r++]=240|S>>18,t[r++]=128|S>>12&63,t[r++]=128|S>>6&63,t[r++]=128|S&63}}return t[r]=0,r-p},$o=(e,t,r)=>Mn(e,W,t,r),Vn=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++r):t+=3}return t},$n=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Po=(e,t,r)=>{for(var l=t+r,p=t;e[p]&&!(p>=l);)++p;if(p-t>16&&e.buffer&&$n)return $n.decode(e.subarray(t,p));for(var h="";t<p;){var b=e[t++];if(!(b&128)){h+=String.fromCharCode(b);continue}var S=e[t++]&63;if((b&224)==192){h+=String.fromCharCode((b&31)<<6|S);continue}var R=e[t++]&63;if((b&240)==224?b=(b&15)<<12|S<<6|R:b=(b&7)<<18|S<<12|R<<6|e[t++]&63,b<65536)h+=String.fromCharCode(b);else{var $=b-65536;h+=String.fromCharCode(55296|$>>10,56320|$&1023)}}return h},rn=(e,t)=>e?Po(W,e,t):"",Lo=(e,t)=>{t=Oe(t);var r=t==="std::string";Ke(e,{name:t,fromWireType(l){var p=D[l>>2],h=l+4,b;if(r)for(var S=h,R=0;R<=p;++R){var $=h+R;if(R==p||W[$]==0){var j=$-S,ae=rn(S,j);b===void 0?b=ae:(b+="\0",b+=ae),S=$+1}}else{for(var ne=new Array(p),R=0;R<p;++R)ne[R]=String.fromCharCode(W[h+R]);b=ne.join("")}return kt(l),b},toWireType(l,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var h,b=typeof p=="string";b||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||fe("Cannot pass non-string to std::string"),r&&b?h=Vn(p):h=p.length;var S=sn(4+h+1),R=S+4;if(D[S>>2]=h,r&&b)$o(p,R,h+1);else if(b)for(var $=0;$<h;++$){var j=p.charCodeAt($);j>255&&(kt(R),fe("String has UTF-16 code units that do not fit in 8 bits")),W[R+$]=j}else for(var $=0;$<h;++$)W[R+$]=p[$];return l!==null&&l.push(kt,S),S},argPackAdvance:rt,readValueFromPointer:wn,destructorFunction(l){kt(l)}})},Pn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Fo=(e,t)=>{for(var r=e,l=r>>1,p=l+t/2;!(l>=p)&&O[l];)++l;if(r=l<<1,r-e>32&&Pn)return Pn.decode(W.subarray(e,r));for(var h="",b=0;!(b>=t/2);++b){var S=F[e+b*2>>1];if(S==0)break;h+=String.fromCharCode(S)}return h},No=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<2)return 0;r-=2;for(var p=t,h=r<e.length*2?r/2:e.length,b=0;b<h;++b){var S=e.charCodeAt(b);F[t>>1]=S,t+=2}return F[t>>1]=0,t-p},xo=e=>e.length*2,jo=(e,t)=>{for(var r=0,l="";!(r>=t/4);){var p=H[e+r*4>>2];if(p==0)break;if(++r,p>=65536){var h=p-65536;l+=String.fromCharCode(55296|h>>10,56320|h&1023)}else l+=String.fromCharCode(p)}return l},Bo=(e,t,r)=>{var l;if((l=r)!==null&&l!==void 0||(r=2147483647),r<4)return 0;for(var p=t,h=p+r-4,b=0;b<e.length;++b){var S=e.charCodeAt(b);if(S>=55296&&S<=57343){var R=e.charCodeAt(++b);S=65536+((S&1023)<<10)|R&1023}if(H[t>>2]=S,t+=4,t+4>h)break}return H[t>>2]=0,t-p},Yo=e=>{for(var t=0,r=0;r<e.length;++r){var l=e.charCodeAt(r);l>=55296&&l<=57343&&++r,t+=4}return t},Ho=(e,t,r)=>{r=Oe(r);var l,p,h,b,S;t===2?(l=Fo,p=No,b=xo,h=()=>O,S=1):t===4&&(l=jo,p=Bo,b=Yo,h=()=>D,S=2),Ke(e,{name:r,fromWireType:R=>{for(var $=D[R>>2],j=h(),ae,ne=R+4,le=0;le<=$;++le){var _e=R+4+le*t;if(le==$||j[_e>>S]==0){var Ee=_e-ne,Ue=l(ne,Ee);ae===void 0?ae=Ue:(ae+="\0",ae+=Ue),ne=_e+t}}return kt(R),ae},toWireType:(R,$)=>{typeof $!="string"&&fe(`Cannot pass non-string to C++ string type ${r}`);var j=b($),ae=sn(4+j+t);return D[ae>>2]=j>>S,p($,ae+4,j+t),R!==null&&R.push(kt,ae),ae},argPackAdvance:rt,readValueFromPointer:ut,destructorFunction(R){kt(R)}})},Go=(e,t,r,l,p,h)=>{Xt[e]={name:Oe(t),rawConstructor:ct(r,l),rawDestructor:ct(p,h),fields:[]}},Wo=(e,t,r,l,p,h,b,S,R,$)=>{Xt[e].fields.push({fieldName:Oe(t),getterReturnType:r,getter:ct(l,p),getterContext:h,setterArgumentType:b,setter:ct(S,R),setterContext:$})},qo=(e,t)=>{t=Oe(t),Ke(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,l)=>{}})},on=[],zo=(e,t,r,l)=>(e=on[e],t=It.toValue(t),e(null,t,r,l)),Jo={},Ko=e=>{var t=Jo[e];return t===void 0?Oe(e):t},Ln=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Qo=e=>e===0?It.toHandle(Ln()):(e=Ko(e),It.toHandle(Ln()[e])),Xo=e=>{var t=on.length;return on.push(e),t},Zo=(e,t)=>{for(var r=new Array(e),l=0;l<e;++l)r[l]=an(D[t+l*4>>2],"parameter "+l);return r},el=Reflect.construct,tl=(e,t,r)=>{var l=[],p=e.toWireType(l,r);return l.length&&(D[t>>2]=It.toHandle(l)),p},al=(e,t,r)=>{var l=Zo(e,t),p=l.shift();e--;var h=new Array(e),b=(R,$,j,ae)=>{for(var ne=0,le=0;le<e;++le)h[le]=l[le].readValueFromPointer(ae+ne),ne+=l[le].argPackAdvance;for(var _e=r===1?el($,h):$.apply(R,h),le=0;le<e;++le){var Ee,Ue;(Ee=(Ue=l[le]).deleteObject)===null||Ee===void 0||Ee.call(Ue,h[le])}return tl(p,j,_e)},S=`methodCaller<(${l.map(R=>R.name).join(", ")}) => ${p.name}>`;return Xo(Ge(S,b))},nl=e=>{e>4&&(ot.get(e).refcount+=1)},rl=e=>{var t=It.toValue(e);et(t),tn(e)},ol=(e,t)=>{e=an(e,"_emval_take_value");var r=e.readValueFromPointer(t);return It.toHandle(r)},ll=()=>{De("")},il=(e,t,r)=>W.copyWithin(e,t,t+r),sl=()=>2147483648,ul=e=>{var t=k.buffer,r=(e-t.byteLength+65535)/65536;try{return k.grow(r),P(),1}catch{}},dl=e=>{var t=W.length;e>>>=0;var r=sl();if(e>r)return!1;for(var l=(R,$)=>R+($-R%$)%$,p=1;p<=4;p*=2){var h=t*(1+.2/p);h=Math.min(h,e+100663296);var b=Math.min(r,l(Math.max(e,h),65536)),S=ul(b);if(S)return!0}return!1},ln={},cl=()=>y||"./this.program",Ua=()=>{if(!Ua.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:cl()};for(var r in ln)ln[r]===void 0?delete t[r]:t[r]=ln[r];var l=[];for(var r in t)l.push(`${r}=${t[r]}`);Ua.strings=l}return Ua.strings},ml=(e,t)=>{for(var r=0;r<e.length;++r)re[t++>>0]=e.charCodeAt(r);re[t>>0]=0},fl=(e,t)=>{var r=0;return Ua().forEach((l,p)=>{var h=t+r;D[e+p*4>>2]=h,ml(l,h),r+=l.length+1}),0},vl=(e,t)=>{var r=Ua();D[e>>2]=r.length;var l=0;return r.forEach(p=>l+=p.length+1),D[t>>2]=l,0},pl=e=>e,Va=e=>e%4===0&&(e%100!==0||e%400===0),yl=(e,t)=>{for(var r=0,l=0;l<=t;r+=e[l++]);return r},Fn=[31,29,31,30,31,30,31,31,30,31,30,31],Nn=[31,28,31,30,31,30,31,31,30,31,30,31],gl=(e,t)=>{for(var r=new Date(e.getTime());t>0;){var l=Va(r.getFullYear()),p=r.getMonth(),h=(l?Fn:Nn)[p];if(t>h-r.getDate())t-=h-r.getDate()+1,r.setDate(1),p<11?r.setMonth(p+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r};function hl(e,t,r){var l=Vn(e)+1,p=new Array(l);return Mn(e,p,0,p.length),p}var Ul=(e,t)=>{re.set(e,t)},Tl=(e,t,r,l)=>{var p=D[l+40>>2],h={tm_sec:H[l>>2],tm_min:H[l+4>>2],tm_hour:H[l+8>>2],tm_mday:H[l+12>>2],tm_mon:H[l+16>>2],tm_year:H[l+20>>2],tm_wday:H[l+24>>2],tm_yday:H[l+28>>2],tm_isdst:H[l+32>>2],tm_gmtoff:H[l+36>>2],tm_zone:p?rn(p):""},b=rn(r),S={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var R in S)b=b.replace(new RegExp(R,"g"),S[R]);var $=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"];function ae(M,J,Ie){for(var Pe=typeof M=="number"?M.toString():M||"";Pe.length<J;)Pe=Ie[0]+Pe;return Pe}function ne(M,J){return ae(M,J,"0")}function le(M,J){function Ie(ra){return ra<0?-1:ra>0?1:0}var Pe;return(Pe=Ie(M.getFullYear()-J.getFullYear()))===0&&(Pe=Ie(M.getMonth()-J.getMonth()))===0&&(Pe=Ie(M.getDate()-J.getDate())),Pe}function _e(M){switch(M.getDay()){case 0:return new Date(M.getFullYear()-1,11,29);case 1:return M;case 2:return new Date(M.getFullYear(),0,3);case 3:return new Date(M.getFullYear(),0,2);case 4:return new Date(M.getFullYear(),0,1);case 5:return new Date(M.getFullYear()-1,11,31);case 6:return new Date(M.getFullYear()-1,11,30)}}function Ee(M){var J=gl(new Date(M.tm_year+1900,0,1),M.tm_yday),Ie=new Date(J.getFullYear(),0,4),Pe=new Date(J.getFullYear()+1,0,4),ra=_e(Ie),Pa=_e(Pe);return le(ra,J)<=0?le(Pa,J)<=0?J.getFullYear()+1:J.getFullYear():J.getFullYear()-1}var Ue={"%a":M=>$[M.tm_wday].substring(0,3),"%A":M=>$[M.tm_wday],"%b":M=>j[M.tm_mon].substring(0,3),"%B":M=>j[M.tm_mon],"%C":M=>{var J=M.tm_year+1900;return ne(J/100|0,2)},"%d":M=>ne(M.tm_mday,2),"%e":M=>ae(M.tm_mday,2," "),"%g":M=>Ee(M).toString().substring(2),"%G":M=>Ee(M),"%H":M=>ne(M.tm_hour,2),"%I":M=>{var J=M.tm_hour;return J==0?J=12:J>12&&(J-=12),ne(J,2)},"%j":M=>ne(M.tm_mday+yl(Va(M.tm_year+1900)?Fn:Nn,M.tm_mon-1),3),"%m":M=>ne(M.tm_mon+1,2),"%M":M=>ne(M.tm_min,2),"%n":()=>`
`,"%p":M=>M.tm_hour>=0&&M.tm_hour<12?"AM":"PM","%S":M=>ne(M.tm_sec,2),"%t":()=>"	","%u":M=>M.tm_wday||7,"%U":M=>{var J=M.tm_yday+7-M.tm_wday;return ne(Math.floor(J/7),2)},"%V":M=>{var J=Math.floor((M.tm_yday+7-(M.tm_wday+6)%7)/7);if((M.tm_wday+371-M.tm_yday-2)%7<=2&&J++,J){if(J==53){var Ie=(M.tm_wday+371-M.tm_yday)%7;Ie!=4&&(Ie!=3||!Va(M.tm_year))&&(J=1)}}else{J=52;var Pe=(M.tm_wday+7-M.tm_yday-1)%7;(Pe==4||Pe==5&&Va(M.tm_year%400-1))&&J++}return ne(J,2)},"%w":M=>M.tm_wday,"%W":M=>{var J=M.tm_yday+7-(M.tm_wday+6)%7;return ne(Math.floor(J/7),2)},"%y":M=>(M.tm_year+1900).toString().substring(2),"%Y":M=>M.tm_year+1900,"%z":M=>{var J=M.tm_gmtoff,Ie=J>=0;return J=Math.abs(J)/60,J=J/60*100+J%60,(Ie?"+":"-")+("0000"+J).slice(-4)},"%Z":M=>M.tm_zone,"%%":()=>"%"};b=b.replace(/%%/g,"\0\0");for(var R in Ue)b.includes(R)&&(b=b.replace(new RegExp(R,"g"),Ue[R](h)));b=b.replace(/\0\0/g,"%");var xe=hl(b);return xe.length>t?0:(Ul(xe,e),xe.length-1)},bl=(e,t,r,l,p)=>Tl(e,t,r,l);Ea=n.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},za(),Pt=n.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},dt(),tt(),fo(),In=n.UnboundTypeError=go(Error,"UnboundTypeError"),So(),Do();var Sl={s:Kt,u:gt,b:wa,g:Wa,q:Qt,J:Ca,f:Bt,V:$t,d:Be,da:qa,Q:Ia,_:Ka,ca:ho,ba:To,w:bo,Y:Ao,x:Co,h:Eo,L:ko,M:Ro,t:Mo,o:Vo,K:Lo,C:Ho,A:Go,ea:Wo,$:qo,R:zo,ha:tn,fa:Qo,Z:al,N:nl,O:rl,aa:ol,B:ll,X:il,W:dl,T:fl,U:vl,E:Fl,D:Cl,F:Ll,n:Nl,a:_l,e:Il,m:wl,k:Rl,H:$l,v:Ml,G:Pl,z:jl,P:Yl,l:kl,j:El,c:Al,p:Dl,I:Vl,r:xl,i:Ol,y:Bl,ga:pl,S:bl},Re=Jt(),kt=n._free=e=>(kt=n._free=Re.ka)(e),sn=n._malloc=e=>(sn=n._malloc=Re.la)(e),xn=e=>(xn=Re.na)(e),Se=(e,t)=>(Se=Re.oa)(e,t),Ta=e=>(Ta=Re.pa)(e),we=()=>(we=Re.qa)(),Ce=e=>(Ce=Re.ra)(e),jn=e=>(jn=Re.sa)(e),Bn=e=>(Bn=Re.ta)(e),Yn=(e,t,r)=>(Yn=Re.ua)(e,t,r),Hn=e=>(Hn=Re.va)(e);n.dynCall_viijii=(e,t,r,l,p,h,b)=>(n.dynCall_viijii=Re.wa)(e,t,r,l,p,h,b);var Gn=n.dynCall_jiiii=(e,t,r,l,p)=>(Gn=n.dynCall_jiiii=Re.xa)(e,t,r,l,p);n.dynCall_iiiiij=(e,t,r,l,p,h,b)=>(n.dynCall_iiiiij=Re.ya)(e,t,r,l,p,h,b),n.dynCall_iiiiijj=(e,t,r,l,p,h,b,S,R)=>(n.dynCall_iiiiijj=Re.za)(e,t,r,l,p,h,b,S,R),n.dynCall_iiiiiijj=(e,t,r,l,p,h,b,S,R,$)=>(n.dynCall_iiiiiijj=Re.Aa)(e,t,r,l,p,h,b,S,R,$);function _l(e,t){var r=we();try{return Ae(e)(t)}catch(l){if(Ce(r),l!==l+0)throw l;Se(1,0)}}function Dl(e,t,r,l){var p=we();try{Ae(e)(t,r,l)}catch(h){if(Ce(p),h!==h+0)throw h;Se(1,0)}}function Al(e,t,r){var l=we();try{Ae(e)(t,r)}catch(p){if(Ce(l),p!==p+0)throw p;Se(1,0)}}function wl(e,t,r,l){var p=we();try{return Ae(e)(t,r,l)}catch(h){if(Ce(p),h!==h+0)throw h;Se(1,0)}}function Cl(e,t,r,l,p){var h=we();try{return Ae(e)(t,r,l,p)}catch(b){if(Ce(h),b!==b+0)throw b;Se(1,0)}}function El(e,t){var r=we();try{Ae(e)(t)}catch(l){if(Ce(r),l!==l+0)throw l;Se(1,0)}}function Il(e,t,r){var l=we();try{return Ae(e)(t,r)}catch(p){if(Ce(l),p!==p+0)throw p;Se(1,0)}}function kl(e){var t=we();try{Ae(e)()}catch(r){if(Ce(t),r!==r+0)throw r;Se(1,0)}}function Rl(e,t,r,l,p){var h=we();try{return Ae(e)(t,r,l,p)}catch(b){if(Ce(h),b!==b+0)throw b;Se(1,0)}}function Ol(e,t,r,l,p,h,b,S,R,$,j){var ae=we();try{Ae(e)(t,r,l,p,h,b,S,R,$,j)}catch(ne){if(Ce(ae),ne!==ne+0)throw ne;Se(1,0)}}function Ml(e,t,r,l,p,h,b){var S=we();try{return Ae(e)(t,r,l,p,h,b)}catch(R){if(Ce(S),R!==R+0)throw R;Se(1,0)}}function Vl(e,t,r,l,p){var h=we();try{Ae(e)(t,r,l,p)}catch(b){if(Ce(h),b!==b+0)throw b;Se(1,0)}}function $l(e,t,r,l,p,h){var b=we();try{return Ae(e)(t,r,l,p,h)}catch(S){if(Ce(b),S!==S+0)throw S;Se(1,0)}}function Pl(e,t,r,l,p,h,b,S){var R=we();try{return Ae(e)(t,r,l,p,h,b,S)}catch($){if(Ce(R),$!==$+0)throw $;Se(1,0)}}function Ll(e,t,r,l){var p=we();try{return Ae(e)(t,r,l)}catch(h){if(Ce(p),h!==h+0)throw h;Se(1,0)}}function Fl(e,t,r,l){var p=we();try{return Ae(e)(t,r,l)}catch(h){if(Ce(p),h!==h+0)throw h;Se(1,0)}}function Nl(e){var t=we();try{return Ae(e)()}catch(r){if(Ce(t),r!==r+0)throw r;Se(1,0)}}function xl(e,t,r,l,p,h,b,S){var R=we();try{Ae(e)(t,r,l,p,h,b,S)}catch($){if(Ce(R),$!==$+0)throw $;Se(1,0)}}function jl(e,t,r,l,p,h,b,S,R,$,j,ae){var ne=we();try{return Ae(e)(t,r,l,p,h,b,S,R,$,j,ae)}catch(le){if(Ce(ne),le!==le+0)throw le;Se(1,0)}}function Bl(e,t,r,l,p,h,b,S,R,$,j,ae,ne,le,_e,Ee){var Ue=we();try{Ae(e)(t,r,l,p,h,b,S,R,$,j,ae,ne,le,_e,Ee)}catch(xe){if(Ce(Ue),xe!==xe+0)throw xe;Se(1,0)}}function Yl(e,t,r,l,p){var h=we();try{return Gn(e,t,r,l,p)}catch(b){if(Ce(h),b!==b+0)throw b;Se(1,0)}}var $a;Ne=function e(){$a||Wn(),$a||(Ne=e)};function Wn(){if(Ye>0||(Te(),Ye>0))return;function e(){$a||($a=!0,n.calledRun=!0,!Y&&(bt(),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),pt()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Wn(),o.ready}})();function Ru(a){return Dn(An,a)}async function Ou(a,o){return Iu(An,a,o)}async function Mu(a,o){return ku(An,a,o)}var ba;class dn extends EventTarget{constructor(o={}){var n;super(),ou(this,ba,void 0);try{const i=(n=o==null?void 0:o.formats)==null?void 0:n.filter(m=>m!=="unknown");if((i==null?void 0:i.length)===0)throw new TypeError("Hint option provided, but is empty.");i==null||i.forEach(m=>{if(!Fa.has(m))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${m}' is not a valid enum value of type BarcodeFormat.`)}),lu(this,ba,i??[]),Ru().then(m=>{this.dispatchEvent(new CustomEvent("load",{detail:m}))}).catch(m=>{this.dispatchEvent(new CustomEvent("error",{detail:m}))})}catch(i){throw or(i,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return iu.filter(o=>o!=="unknown")}async detect(o){try{const n=await vu(o);if(n===null)return[];let i;try{Hr(n)?i=await Ou(n,{tryHarder:!0,formats:rr(this,ba).map(m=>Fa.get(m))}):i=await Mu(n,{tryHarder:!0,formats:rr(this,ba).map(m=>Fa.get(m))})}catch(m){throw console.error(m),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return i.map(m=>{const{topLeft:{x:v,y},topRight:{x:u,y:c},bottomLeft:{x:f,y:T},bottomRight:{x:C,y:A}}=m.position,w=Math.min(v,u,f,C),k=Math.min(y,c,T,A),Y=Math.max(v,u,f,C),re=Math.max(y,c,T,A);return{boundingBox:new DOMRectReadOnly(w,k,Y-w,re-k),rawValue:m.text,format:su(m.format),cornerPoints:[{x:v,y},{x:u,y:c},{x:C,y:A},{x:f,y:T}]}})}catch(n){throw or(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}ba=new WeakMap;const zr=(a,o,n="error")=>{let i,m;const v=new Promise((y,u)=>{i=y,m=u,a.addEventListener(o,i),a.addEventListener(n,m)});return v.finally(()=>{a.removeEventListener(o,i),a.removeEventListener(n,m)}),v},ur=a=>new Promise(o=>setTimeout(o,a));class Jr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Vu extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class $u extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}const Pu=a=>{let o=!1,n;return(...i)=>(o||(n=a(i),o=!0),n)};function Ut(a,o){if(a===!1)throw new Error(o??"assertion failure")}function dr(a){throw new Error("this code should be unreachable")}function Lu(){return navigator.platform.toUpperCase().includes("MAC")}let Kr;async function Fu(a){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new dn({formats:a});const o=await window.BarcodeDetector.getSupportedFormats(),n=a.filter(i=>!o.includes(i));return n.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`),new dn({formats:a})):Lu()&&a.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new dn({formats:a})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:a}))}async function Qr(a){Kr=await Fu(a)}const Nu=async(a,{detectHandler:o,locateHandler:n,minDelay:i,formats:m})=>{console.debug("[vue-qrcode-reader] start scanning"),await Qr(m);const v=y=>async u=>{if(a.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:c,contentBefore:f,lastScanHadContent:T}=y;if(u-c<i)window.requestAnimationFrame(v(y));else{const C=await Kr.detect(a),A=C.some(Y=>!f.includes(Y.rawValue));A&&o(C);const w=C.length>0;w&&n(C),!w&&T&&n(C);const k={lastScanned:u,lastScanHadContent:w,contentBefore:A?C.map(Y=>Y.rawValue):f};window.requestAnimationFrame(v(k))}}};v({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Xr={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.compactObject=to;Qe.deprecated=zu;var xu=Qe.detectBrowser=Ju;Qe.disableLog=Gu;Qe.disableWarnings=Wu;Qe.extractVersion=Na;Qe.filterStats=Ku;Qe.log=qu;Qe.walkStats=Ha;Qe.wrapPeerConnectionEvent=Hu;function ju(a,o,n){return o=Bu(o),o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Bu(a){var o=Yu(a,"string");return xt(o)==="symbol"?o:String(o)}function Yu(a,o){if(xt(a)!=="object"||a===null)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var i=n.call(a,o);if(xt(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}function xt(a){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xt(a)}var Zr=!0,eo=!0;function Na(a,o,n){var i=a.match(o);return i&&i.length>=n&&parseInt(i[n],10)}function Hu(a,o,n){if(a.RTCPeerConnection){var i=a.RTCPeerConnection.prototype,m=i.addEventListener;i.addEventListener=function(y,u){if(y!==o)return m.apply(this,arguments);var c=function(f){var T=n(f);T&&(u.handleEvent?u.handleEvent(T):u(T))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(u,c),m.apply(this,[y,c])};var v=i.removeEventListener;i.removeEventListener=function(y,u){if(y!==o||!this._eventMap||!this._eventMap[o])return v.apply(this,arguments);if(!this._eventMap[o].has(u))return v.apply(this,arguments);var c=this._eventMap[o].get(u);return this._eventMap[o].delete(u),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,v.apply(this,[y,c])},Object.defineProperty(i,"on"+o,{get:function(){return this["_on"+o]},set:function(y){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),y&&this.addEventListener(o,this["_on"+o]=y)},enumerable:!0,configurable:!0})}}function Gu(a){return typeof a!="boolean"?new Error("Argument type: "+xt(a)+". Please use a boolean."):(Zr=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function Wu(a){return typeof a!="boolean"?new Error("Argument type: "+xt(a)+". Please use a boolean."):(eo=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function qu(){if((typeof window>"u"?"undefined":xt(window))==="object"){if(Zr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function zu(a,o){eo&&console.warn(a+" is deprecated, please use "+o+" instead.")}function Ju(a){var o={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return o.browser="Not a browser.",o;var n=a.navigator;if(n.mozGetUserMedia)o.browser="firefox",o.version=Na(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)o.browser="chrome",o.version=Na(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=Na(n.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function cr(a){return Object.prototype.toString.call(a)==="[object Object]"}function to(a){return cr(a)?Object.keys(a).reduce(function(o,n){var i=cr(a[n]),m=i?to(a[n]):a[n],v=i&&!Object.keys(m).length;return m===void 0||v?o:Object.assign(o,ju({},n,m))},{}):a}function Ha(a,o,n){!o||n.has(o.id)||(n.set(o.id,o),Object.keys(o).forEach(function(i){i.endsWith("Id")?Ha(a,a.get(o[i]),n):i.endsWith("Ids")&&o[i].forEach(function(m){Ha(a,a.get(m),n)})}))}function Ku(a,o,n){var i=n?"outbound-rtp":"inbound-rtp",m=new Map;if(o===null)return m;var v=[];return a.forEach(function(y){y.type==="track"&&y.trackIdentifier===o.id&&v.push(y)}),v.forEach(function(y){a.forEach(function(u){u.type===i&&u.trackId===y.id&&Ha(a,u,m)})}),m}Object.defineProperty(Xr,"__esModule",{value:!0});var Qu=Xr.shimGetUserMedia=ed,Xu=Zu(Qe);function ao(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(ao=function(i){return i?n:o})(a)}function Zu(a,o){if(a&&a.__esModule)return a;if(a===null||Nt(a)!=="object"&&typeof a!="function")return{default:a};var n=ao(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var y=m?Object.getOwnPropertyDescriptor(a,v):null;y&&(y.get||y.set)?Object.defineProperty(i,v,y):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function Nt(a){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Nt(a)}var mr=Xu.log;function ed(a,o){var n=a&&a.navigator;if(n.mediaDevices){var i=function(c){if(Nt(c)!=="object"||c.mandatory||c.optional)return c;var f={};return Object.keys(c).forEach(function(T){if(!(T==="require"||T==="advanced"||T==="mediaSource")){var C=Nt(c[T])==="object"?c[T]:{ideal:c[T]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);var A=function(k,Y){return k?k+Y.charAt(0).toUpperCase()+Y.slice(1):Y==="deviceId"?"sourceId":Y};if(C.ideal!==void 0){f.optional=f.optional||[];var w={};typeof C.ideal=="number"?(w[A("min",T)]=C.ideal,f.optional.push(w),w={},w[A("max",T)]=C.ideal,f.optional.push(w)):(w[A("",T)]=C.ideal,f.optional.push(w))}C.exact!==void 0&&typeof C.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[A("",T)]=C.exact):["min","max"].forEach(function(k){C[k]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[A(k,T)]=C[k])})}}),c.advanced&&(f.optional=(f.optional||[]).concat(c.advanced)),f},m=function(c,f){if(o.version>=61)return f(c);if(c=JSON.parse(JSON.stringify(c)),c&&Nt(c.audio)==="object"){var T=function(k,Y,re){Y in k&&!(re in k)&&(k[re]=k[Y],delete k[Y])};c=JSON.parse(JSON.stringify(c)),T(c.audio,"autoGainControl","googAutoGainControl"),T(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=i(c.audio)}if(c&&Nt(c.video)==="object"){var C=c.video.facingMode;C=C&&(Nt(C)==="object"?C:{ideal:C});var A=o.version<66;if(C&&(C.exact==="user"||C.exact==="environment"||C.ideal==="user"||C.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!A)){delete c.video.facingMode;var w;if(C.exact==="environment"||C.ideal==="environment"?w=["back","rear"]:(C.exact==="user"||C.ideal==="user")&&(w=["front"]),w)return n.mediaDevices.enumerateDevices().then(function(k){k=k.filter(function(re){return re.kind==="videoinput"});var Y=k.find(function(re){return w.some(function(W){return re.label.toLowerCase().includes(W)})});return!Y&&k.length&&w.includes("back")&&(Y=k[k.length-1]),Y&&(c.video.deviceId=C.exact?{exact:Y.deviceId}:{ideal:Y.deviceId}),c.video=i(c.video),mr("chrome: "+JSON.stringify(c)),f(c)})}c.video=i(c.video)}return mr("chrome: "+JSON.stringify(c)),f(c)},v=function(c){return o.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},y=function(c,f,T){m(c,function(C){n.webkitGetUserMedia(C,f,function(A){T&&T(v(A))})})};if(n.getUserMedia=y.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return m(c,function(f){return u(f).then(function(T){if(f.audio&&!T.getAudioTracks().length||f.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(function(C){C.stop()}),new DOMException("","NotFoundError");return T},function(T){return Promise.reject(v(T))})})}}}}var no={};Object.defineProperty(no,"__esModule",{value:!0});var td=no.shimGetUserMedia=rd,ad=nd(Qe);function ro(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(ro=function(i){return i?n:o})(a)}function nd(a,o){if(a&&a.__esModule)return a;if(a===null||ia(a)!=="object"&&typeof a!="function")return{default:a};var n=ro(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var y=m?Object.getOwnPropertyDescriptor(a,v):null;y&&(y.get||y.set)?Object.defineProperty(i,v,y):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function ia(a){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ia(a)}function rd(a,o){var n=a&&a.navigator,i=a&&a.MediaStreamTrack;if(n.getUserMedia=function(c,f,T){ad.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(f,T)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var m=function(c,f,T){f in c&&!(T in c)&&(c[T]=c[f],delete c[f])},v=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return ia(c)==="object"&&ia(c.audio)==="object"&&(c=JSON.parse(JSON.stringify(c)),m(c.audio,"autoGainControl","mozAutoGainControl"),m(c.audio,"noiseSuppression","mozNoiseSuppression")),v(c)},i&&i.prototype.getSettings){var y=i.prototype.getSettings;i.prototype.getSettings=function(){var c=y.apply(this,arguments);return m(c,"mozAutoGainControl","autoGainControl"),m(c,"mozNoiseSuppression","noiseSuppression"),c}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(c){return this.kind==="audio"&&ia(c)==="object"&&(c=JSON.parse(JSON.stringify(c)),m(c,"autoGainControl","mozAutoGainControl"),m(c,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[c])}}}}var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.shimAudioContext=vd;Tt.shimCallbacksAPI=ud;Tt.shimConstraints=io;Tt.shimCreateOfferLegacy=fd;var od=Tt.shimGetUserMedia=dd;Tt.shimLocalStreamsAPI=id;Tt.shimRTCIceServerUrls=cd;Tt.shimRemoteStreamsAPI=sd;Tt.shimTrackEventTransceiver=md;var oo=ld(Qe);function lo(a){if(typeof WeakMap!="function")return null;var o=new WeakMap,n=new WeakMap;return(lo=function(i){return i?n:o})(a)}function ld(a,o){if(a&&a.__esModule)return a;if(a===null||jt(a)!=="object"&&typeof a!="function")return{default:a};var n=lo(o);if(n&&n.has(a))return n.get(a);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in a)if(v!=="default"&&Object.prototype.hasOwnProperty.call(a,v)){var y=m?Object.getOwnPropertyDescriptor(a,v):null;y&&(y.get||y.set)?Object.defineProperty(i,v,y):i[v]=a[v]}return i.default=a,n&&n.set(a,i),i}function jt(a){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jt(a)}function id(a){if(!(jt(a)!=="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){var o=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(n){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(m){return o.call(i,m,n)}),n.getVideoTracks().forEach(function(m){return o.call(i,m,n)})},a.RTCPeerConnection.prototype.addTrack=function(n){for(var i=this,m=arguments.length,v=new Array(m>1?m-1:0),y=1;y<m;y++)v[y-1]=arguments[y];return v&&v.forEach(function(u){i._localStreams?i._localStreams.includes(u)||i._localStreams.push(u):i._localStreams=[u]}),o.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(n){var i=this;this._localStreams||(this._localStreams=[]);var m=this._localStreams.indexOf(n);if(m!==-1){this._localStreams.splice(m,1);var v=n.getTracks();this.getSenders().forEach(function(y){v.includes(y.track)&&i.removeTrack(y)})}})}}function sd(a){if(!(jt(a)!=="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(m){m.streams.forEach(function(v){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(v)){i._remoteStreams.push(v);var y=new Event("addstream");y.stream=v,i.dispatchEvent(y)}})})}});var o=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(m){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(m)>=0)){n._remoteStreams.push(m);var v=new Event("addstream");v.stream=m,n.dispatchEvent(v)}})}),o.apply(n,arguments)}}}function ud(a){if(!(jt(a)!=="object"||!a.RTCPeerConnection)){var o=a.RTCPeerConnection.prototype,n=o.createOffer,i=o.createAnswer,m=o.setLocalDescription,v=o.setRemoteDescription,y=o.addIceCandidate;o.createOffer=function(c,f){var T=arguments.length>=2?arguments[2]:arguments[0],C=n.apply(this,[T]);return f?(C.then(c,f),Promise.resolve()):C},o.createAnswer=function(c,f){var T=arguments.length>=2?arguments[2]:arguments[0],C=i.apply(this,[T]);return f?(C.then(c,f),Promise.resolve()):C};var u=function(c,f,T){var C=m.apply(this,[c]);return T?(C.then(f,T),Promise.resolve()):C};o.setLocalDescription=u,u=function(c,f,T){var C=v.apply(this,[c]);return T?(C.then(f,T),Promise.resolve()):C},o.setRemoteDescription=u,u=function(c,f,T){var C=y.apply(this,[c]);return T?(C.then(f,T),Promise.resolve()):C},o.addIceCandidate=u}}function dd(a){var o=a&&a.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var n=o.mediaDevices,i=n.getUserMedia.bind(n);o.mediaDevices.getUserMedia=function(m){return i(io(m))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(m,v,y){o.mediaDevices.getUserMedia(m).then(v,y)}).bind(o))}function io(a){return a&&a.video!==void 0?Object.assign({},a,{video:oo.compactObject(a.video)}):a}function cd(a){if(a.RTCPeerConnection){var o=a.RTCPeerConnection;a.RTCPeerConnection=function(n,i){if(n&&n.iceServers){for(var m=[],v=0;v<n.iceServers.length;v++){var y=n.iceServers[v];y.urls===void 0&&y.url?(oo.deprecated("RTCIceServer.url","RTCIceServer.urls"),y=JSON.parse(JSON.stringify(y)),y.urls=y.url,delete y.url,m.push(y)):m.push(n.iceServers[v])}n.iceServers=m}return new o(n,i)},a.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function md(a){jt(a)==="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function fd(a){var o=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var i=this.getTransceivers().find(function(v){return v.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var m=this.getTransceivers().find(function(v){return v.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&m?m.direction==="sendrecv"?m.setDirection?m.setDirection("sendonly"):m.direction="sendonly":m.direction==="recvonly"&&(m.setDirection?m.setDirection("inactive"):m.direction="inactive"):n.offerToReceiveVideo===!0&&!m&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function vd(a){jt(a)!=="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}const pd=Pu(()=>{const a=xu(window);switch(a.browser){case"chrome":Qu(window,a);break;case"firefox":td(window,a);break;case"safari":od(window,a);break;default:throw new Jr}});let sa=Promise.resolve({type:"stop",data:{}});async function fr(a,o,n){var i,m,v;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(o)),window.isSecureContext!==!0)throw new Vu;if(((i=navigator==null?void 0:navigator.mediaDevices)==null?void 0:i.getUserMedia)===void 0)throw new Jr;pd(),console.debug("[vue-qrcode-reader] calling getUserMedia");const y=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});a.srcObject!==void 0?a.srcObject=y:a.mozSrcObject!==void 0?a.mozSrcObject=y:window.URL.createObjectURL?a.src=window.URL.createObjectURL(y):window.webkitURL?a.src=window.webkitURL.createObjectURL(y):a.src=y.id,a.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([zr(a,"loadeddata"),ur(6e3).then(()=>{throw new $u})]),console.debug("[vue-qrcode-reader] video element loaded"),await ur(500);const[u]=y.getVideoTracks(),c=(v=(m=u==null?void 0:u.getCapabilities)==null?void 0:m.call(u))!=null?v:{};let f=!1;return n&&c.torch&&(await u.applyConstraints({advanced:[{torch:!0}]}),f=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:a,stream:y,capabilities:c,constraints:o,isTorchOn:f}}}async function yd(a,{constraints:o,torch:n,restart:i=!1}){sa=sa.then(v=>{if(v.type==="start"){const{data:{videoEl:y,stream:u,constraints:c,isTorchOn:f}}=v;return!i&&a===y&&o===c&&n===f?v:so(y,u,f).then(()=>fr(a,o,n))}else if(v.type==="stop"||v.type==="failed")return fr(a,o,n);dr()}).catch(v=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${v}"`),{type:"failed",error:v}));const m=await sa;if(m.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(m.type==="failed")throw m.error;if(m.type==="start")return m.data.capabilities;dr()}async function so(a,o,n){console.debug("[vue-qrcode-reader] stopping camera"),a.src="",a.srcObject=null,a.load(),await zr(a,"error");for(const i of o.getTracks())n!=null||await i.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(i),i.stop();return{type:"stop",data:{}}}async function La(){if(sa=sa.then(a=>{if(a.type==="stop"||a.type==="failed")return a;const{data:{videoEl:o,stream:n,isTorchOn:i}}=a;return so(o,n,i)}),(await sa).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const gd=Fe({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(a,{emit:o}){const n=a,i=o,m=V(n.constraints),v=V(n.formats);qe(()=>n.constraints,(O,H)=>{JSON.stringify(O)!==JSON.stringify(H)&&(m.value=O)},{deep:!0}),qe(()=>n.formats,(O,H)=>{JSON.stringify(O)!==JSON.stringify(H)&&(v.value=O)},{deep:!0});const y=V(),u=V(),c=V(),f=V(!1),T=V(!1);gr(()=>{T.value=!0}),Jl(()=>{La()});const C=la(()=>({torch:n.torch,constraints:m.value,shouldStream:T.value&&!n.paused}));qe(C,async O=>{const H=c.value;Ut(H!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const D=y.value;Ut(D!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const he=D.getContext("2d");if(Ut(he!==null,"if cavnas is defined, canvas 2d context should also be non-null"),O.shouldStream){La(),f.value=!1;try{const pe=await yd(H,O);T.value?(f.value=!0,i("camera-on",pe)):await La()}catch(pe){i("error",pe)}}else D.width=H.videoWidth,D.height=H.videoHeight,he.drawImage(H,0,0,H.videoWidth,H.videoHeight),La(),f.value=!1,i("camera-off")},{deep:!0}),qe(v,async O=>{T.value&&await Qr(O)});const A=la(()=>C.value.shouldStream&&f.value);qe(A,O=>{if(O){Ut(y.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),w(y.value),Ut(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),w(u.value);const H=()=>n.track===void 0?500:40;Ut(c.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Nu(c.value,{detectHandler:D=>i("detect",D),formats:v.value,locateHandler:k,minDelay:H()})}});const w=O=>{const H=O.getContext("2d");Ut(H!==null,"canvas 2d context should always be non-null"),H.clearRect(0,0,O.width,O.height)},k=O=>{const H=u.value;Ut(H!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const D=c.value;if(Ut(D!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),O.length===0||n.track===void 0)w(H);else{const he=D.offsetWidth,pe=D.offsetHeight,P=D.videoWidth,E=D.videoHeight,G=Math.max(he/P,pe/E),ce=P*G,Te=E*G,bt=ce/P,pt=Te/E,St=(he-ce)/2,$e=(pe-Te)/2,lt=({x:ze,y:De})=>({x:Math.floor(ze*bt),y:Math.floor(De*pt)}),Ye=({x:ze,y:De})=>({x:Math.floor(ze+St),y:Math.floor(De+$e)}),Ne=O.map(ze=>{const{boundingBox:De,cornerPoints:yt}=ze,{x:Dt,y:Xe}=Ye(lt({x:De.x,y:De.y})),{x:it,y:ma}=lt({x:De.width,y:De.height});return{...ze,cornerPoints:yt.map(At=>Ye(lt(At))),boundingBox:DOMRectReadOnly.fromRect({x:Dt,y:Xe,width:it,height:ma})}});H.width=D.offsetWidth,H.height=D.offsetHeight;const _t=H.getContext("2d");Ut(_t!==null,"canvas 2d context should always be non-null"),n.track(Ne,_t)}},Y={width:"100%",height:"100%",position:"relative","z-index":"0"},re={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},W={width:"100%",height:"100%","object-fit":"cover"},F=la(()=>A.value?W:{...W,visibility:"hidden",position:"absolute"});return(O,H)=>(_(),z("div",{style:Y},[ie("video",{ref_key:"videoRef",ref:c,style:Ql(F.value),autoplay:"",muted:"",playsinline:""},null,4),Kl(ie("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:y,style:W},null,512),[[Xl,!A.value]]),ie("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:u,style:re},null,512),ie("div",{style:re},[Zl(O.$slots,"default")])]))}}),hd=Fe({__name:"QRCodeReader",emits:["scan"],setup(a,{emit:o}){const n=o,i=ei("inputBox"),m=V("keyboard"),v=V({facingMode:"environment"}),y=[{label:"Rear Camera",constraints:{facingMode:"environment"}},{label:"Front Camera",constraints:{facingMode:"user"}}],u=V(y),c=V({aztec:!0,code_128:!0,code_39:!0,code_93:!0,codabar:!0,databar:!0,databar_expanded:!0,data_matrix:!0,dx_film_edge:!0,ean_13:!0,ean_8:!0,itf:!0,maxi_code:!0,micro_qr_code:!0,pdf417:!0,qr_code:!0,rm_qr_code:!0,upc_a:!0,upc_e:!0,linear_codes:!0,matrix_codes:!0}),f=k=>{k.length>=1&&n("scan",k[0].rawValue)},T=async()=>{const Y=(await navigator.mediaDevices.enumerateDevices()).filter(({kind:re})=>re==="videoinput");u.value=[...y,...Y.map(({deviceId:re,label:W})=>({label:`${W}`,constraints:{deviceId:re}}))]},C=la(()=>Object.keys(c.value).filter(k=>c.value[k])),A=V(""),w=k=>{k.key==="Enter"?(n("scan",A.value),A.value=""):k.key.length===1&&(A.value+=k.key)};return pr(()=>{window.removeEventListener("keydown",w)}),window.addEventListener("keydown",w),gr(()=>{i.value&&i.value.focus()}),(k,Y)=>m.value==="keyboard"?(_(),z(me,{key:0},[ie("input",{ref_key:"inputBox",ref:i,type:"text",class:"opacity-0 w-0 h-0"},null,512),s(ge,null,{default:d(()=>[s(B,{class:"text-center"},{default:d(()=>[s(Sn,{icon:"mdi:mdi-qrcode-scan",size:"150"})]),_:1})]),_:1}),s(ge,null,{default:d(()=>[A.value?(_(),N(B,{key:0,class:"text-center"},{default:d(()=>[Q(oe(A.value),1)]),_:1})):(_(),N(B,{key:1,class:"text-center"},{default:d(()=>Y[3]||(Y[3]=[ie("small",null,"(Awaiting Input)",-1)])),_:1}))]),_:1}),s(ge,null,{default:d(()=>[s(B,{class:"text-center"},{default:d(()=>[s(se,{onClick:Y[0]||(Y[0]=re=>m.value="camera"),color:"primary"},{default:d(()=>Y[4]||(Y[4]=[Q(" Use Camera ")])),_:1})]),_:1})]),_:1})],64)):m.value==="camera"?(_(),z(me,{key:1},[s(ge,null,{default:d(()=>[s(B,{class:"text-center"},{default:d(()=>[s(x(gd),{onDetect:f,onCameraOn:T,constraints:v.value,formats:C.value,style:{"max-width":"400px"}},null,8,["constraints","formats"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(B,null,{default:d(()=>[s(be,{modelValue:v.value,"onUpdate:modelValue":Y[1]||(Y[1]=re=>v.value=re),items:u.value,"item-title":"label","item-value":"constraints",label:"Select Camera","hide-details":"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(ge,null,{default:d(()=>[s(B,{class:"text-center"},{default:d(()=>[s(se,{onClick:Y[2]||(Y[2]=re=>m.value="keyboard"),color:"primary"},{default:d(()=>Y[5]||(Y[5]=[Q(" Cancel ")])),_:1})]),_:1})]),_:1})],64)):ee("",!0)}});function Ud(a){return new Promise((o,n)=>{var v;if(!a.target.files||a.target.files.length==0){n("No files selected");return}const i=(v=a.target)==null?void 0:v.files[0],m=new FileReader;m.onload=y=>{var f;const c=((f=y.target)==null?void 0:f.result).split(/[\s,\n\r]+/);o(c.filter(T=>T.length>0).sort((T,C)=>{const A=Number(T),w=Number(C),k=!isNaN(A),Y=!isNaN(w);return k&&Y?A-w:T.localeCompare(C,void 0,{numeric:!0,sensitivity:"base"})}).join(`
`))},m.readAsText(i)})}const vr=Fe({__name:"MultiRegistrationInput",props:{modelValue:{},modelModifiers:{}},emits:Ve(["change","input","click:clear"],["update:modelValue"]),setup(a,{emit:o}){const n=V(!1),i=V(""),m=o,v=He(a,"modelValue"),y=()=>v.value?mn.isArray(v.value)?v.value.length>1?"List":v.value[0]:mn.isString(v.value)?v.value:"":"",u=V(y());qe(v,()=>{u.value=y()});const c=async A=>{i.value=await Ud(A)},f=A=>{n.value=!1,v.value=i.value.split(`
`),u.value="List",m("input",A)},T=A=>{v.value=u.value,m("input",A)},C=A=>{v.value="",u.value=y(),m("click:clear",A)};return(A,w)=>(_(),z("div",null,[s(Le,gn({modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=k=>u.value=k)},A.$attrs,{"append-inner-icon":"mdi:mdi-clipboard-list-outline","onClick:appendInner":w[1]||(w[1]=k=>n.value=!0),"onClick:clear":C,onInput:T}),null,16,["modelValue"]),s(Ya,{modelValue:n.value,"onUpdate:modelValue":w[5]||(w[5]=k=>n.value=k)},{default:d(()=>[s(qt,{class:"rounded-xl"},{default:d(()=>[s(Da,null,{default:d(()=>[s(Aa,{class:"d-flex justify-space-between align-center"},{default:d(()=>[w[6]||(w[6]=ie("div",{class:"text-h5 text-medium-emphasis"}," Registration Number List ",-1)),s(se,{icon:"mdi:mdi-close",variant:"text",onClick:w[2]||(w[2]=k=>n.value=!1)})]),_:1}),s(Er,null,{default:d(()=>w[7]||(w[7]=[Q("Provide a list of registration numbers, you may also upload a file of numbers.")])),_:1})]),_:1}),s(da,{color:"white"},{default:d(()=>[s(Mr,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=k=>i.value=k),label:"Registration Numbers"},null,8,["modelValue"]),s(Yi,{label:"File Upload",onChange:c})]),_:1}),s(_n,null,{default:d(()=>[s(se,{onClick:w[4]||(w[4]=k=>i.value="")},{default:d(()=>w[8]||(w[8]=[Q("Clear")])),_:1}),s(Wt),s(se,{onClick:f},{default:d(()=>w[9]||(w[9]=[Q("Apply")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Td=Fe({__name:"TagRecalculator",props:{modelValue:{default:[]},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=Mt(),n=He(a,"modelValue");function i(v){return new Promise(y=>setTimeout(y,v))}const m=async()=>{for(const v of n.value){try{await o.calculateRegistrationTags(v)}catch(y){console.error(y)}await i(200)}};return(v,y)=>(_(),z("div",null,[n.value.length>0?(_(),N(se,{key:0,color:"success",onClick:m,class:"w-100"},{default:d(()=>y[0]||(y[0]=[Q(" Recalculate Tags ")])),_:1})):ee("",!0)]))}}),bd=["colspan"],Pc=Fe({__name:"RegistrationsView",emits:["pageTitle"],async setup(a,{emit:o}){var pa,ya,ga;let n,i;const m=Rr(),v=Ai(),{getConvention:y}=$i();o("pageTitle","Registration Manager");const c=ti(),f=yr(),T=V(!1);let C=((pa=c.params.convention)==null?void 0:pa.toString())||"";const A=V();A.value=([n,i]=Jn(()=>y()),n=await n,i(),n);const w=Mt(),k=xa.getInstance(),{getLinkedFields:Y}=Mi(),re=V([]),W=V({ID:0,AdminLayoutUUID:Ot(),ConventionID:((ya=A.value)==null?void 0:ya.ID)||0,ConventionUUID:((ga=A.value)==null?void 0:ga.ConventionUUID)||at,Name:"Registration Table",RunnerLayoutUUID:at,Type:mt.ADMIN_LAYOUT_TABLE,Panels:[]}),F=V([]),O=V([]),H=V([]),D=V([]),he=V([]),pe=V([]),P=V(1),E=V(10),G=V([]),ce=V(0),Te=V([]),bt=V(!1),pt=V(!1),St=V(!1),$e=V(""),lt=V(""),Ye=V(""),Ne=V(""),_t=V(""),ze=V(""),De=([n,i]=Jn(()=>{var U;return Y(((U=A.value)==null?void 0:U.ConventionUUID)||at)}),n=await n,i(),n),yt=V({FieldUUID:De.badge_name||at,Value:""}),Dt=V({FieldUUID:De.forename||at,Value:""}),Xe=V({FieldUUID:De.surname||at,Value:""}),it=V({FieldUUID:De.dob||at,Value:""}),ma=V(new Map([[De.badge_name||at,yt.value],[De.forename||at,Dt.value],[De.surname||at,Xe.value],[De.dob||at,it.value]])),At=V(""),zt=V(""),Jt=V([]),Vt=V([]),wt=V([]),Ct=V([]),Kt=V([]),Je=V([]),gt=V([]),Ze=V(0),Be=V(),st=V(!1),wa=V(!1),Wa=V(!1),Qt=V(),Ca=V(),Bt=V(),$t=V(!1),Xt=Ga(),et=V(""),ut=V(!1),ye=Xn(()=>{et.value="";const U=pe.value.find(g=>g.uuid===$e.value);U&&U.challenge||(lt.value=Date.now().toString())}),Et=Xn(()=>{ut.value=!1,lt.value=Date.now().toString()});qe($e,U=>{const g=pe.value.find(I=>I.uuid===U);if(g){const I=g.headers.find(L=>L.defaultSort===!0);I&&(G.value=[{key:I.key,order:"asc"}],Jt.value=[{key:I.key,order:"asc"}]),g.challenge&&(g.items=[])}nt({page:1,itemsPerPage:E.value,sortBy:Jt.value})}),qe(Ze,U=>{U===8&&Ia()}),qe(At,()=>{ye()}),qe(zt,()=>{ye()});const Zt=()=>{if(F.value=[],H.value=[],D.value=[],pe.value=[],!!A.value){try{w.getConventionAdminLayoutByName(A.value.ConventionUUID,"Registration Table").then(U=>{if(Ze.value+=1,U)W.value=U;else{if(!A.value)return;W.value.ConventionID=A.value.ID,W.value.ConventionUUID=A.value.ConventionUUID}})}catch{W.value.ConventionID=A.value.ID,W.value.ConventionUUID=A.value.ConventionUUID}try{w.getConventionAdminLayouts(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(U.forEach(g=>{g.Panels.sort((I,L)=>I.Order>L.Order?1:I.Order===L.Order?0:-1),g.Panels.forEach(I=>{I.Items.sort((L,q)=>L.Order>q.Order?1:L.Order===q.Order?0:-1)})}),H.value=U)})}catch{}try{w.getConventionForms(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(F.value=U)})}catch{}try{w.getConventionAccommodation(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(Vt.value=U)})}catch{}try{w.getConventionVenues(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(Je.value=U)})}catch{}try{w.getConventionExtras(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(wt.value=U)})}catch{}try{w.getConventionInterests(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(Ct.value=U)})}catch{}try{w.getConventionTickets(A.value.ConventionUUID).then(U=>{Ze.value+=1,U&&(Kt.value=U)})}catch{}try{w.getConventionGroups(A.value.ConventionUUID).then(U=>{U&&(O.value=U.sort((g,I)=>g.Name.localeCompare(I.Name)))})}catch{}try{w.getConventionTags(A.value.ConventionUUID).then(U=>{U&&(he.value=U.sort((g,I)=>g.Title.localeCompare(I.Title)).map(g=>(g.Title=`${g.Title} [${g.Key}]`,g)))})}catch{}}},Ea=(U,g,I,L,q)=>{const ue={Direction:L,Limit:I,Offset:(g-1)*I,Order:q};return U&&(ue.PanelUUID=U==null?void 0:U.layout.LayoutPanelUUID),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_ADDITIONAL&&(ue.Additional=!0),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_ADMIN&&(ue.AdminForm=!0),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_ACCOMMODATION&&(ue.Accommodation=!0),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_BADGE&&(ue.Badge=!0),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_DEALER&&(ue.Dealer=!0),(U==null?void 0:U.layout.RequiredFormType)===ke.FORM_TYPE_REGISTRATION&&(ue.Registration=!0),ue.GroupUUID=At.value||at,ue.TagUUID=zt.value||at,ue.Email=_t.value,mn.isArray(Ne.value)?ue.Reference=Ne.value:Ne.value.length?ue.Reference=[Ne.value]:ue.Reference=[],Ye.value&&(ue.RegistrationUUID=Ye.value),ze.value&&(ue.BadgeSerialNumber=ze.value),ue.FieldValues=Array.from(ma.value.values()),ue},ea=(U,g)=>{let I="",L="";const q=g==null?void 0:g.layout.Items;if(U&&q&&U.length>=1){const ue=q.find(tt=>tt.LayoutItemUUID==U[0].key);switch(L=U[0].order||"asc",ue==null?void 0:ue.MetaField){case ve.META_DATA_SOURCE_ACCOMMODATION_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_ADDITIONAL_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_ADMIN_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_BADGE_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_DEALER_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_REGISTRATION_FORM:I="submission.status";break;case ve.META_DATA_SOURCE_REGISTRATION_REFERENCE:I="reference";break;case ve.META_DATA_SOURCE_SUBMISSION_DATE:I="created";break;case ve.META_DATA_SOURCE_SUBMISSION_STATUS:I="submission.status";break}switch(ue==null?void 0:ue.UserField){case Me.USER_DATA_SOURCE_DISPLAY_NAME:I="user.display_name";break;case Me.USER_DATA_SOURCE_EMAIL:I="user.email";break;case Me.USER_DATA_SOURCE_FIRST_NAME:I="user.firstname";break;case Me.USER_DATA_SOURCE_HANDLE:I="user.handle";break;case Me.USER_DATA_SOURCE_LAST_NAME:I="user.lastname";break}}return{sortByStr:I,directionStr:L}},nt=({page:U,itemsPerPage:g,sortBy:I})=>{if(!A.value)return;P.value=U,G.value=I;const L=pe.value.find(tt=>tt.uuid==$e.value);if(L&&L.challenge&&et.value.trim().length<3)return;T.value=!0;let{sortByStr:q,directionStr:ue}=ea(I,L);try{const tt=Ea(L,U,g,ue,q);Ye.value="",ze.value="";const Yt=lt.value;w.searchConventionRegistrations(A.value.ConventionUUID,tt,et.value).then(ta=>{ta&&Yt===lt.value&&(ce.value=ta.Total,D.value=ta.Registrations,Te.value=ta.IDs,pe.value.forEach(ha=>{const aa=ha.layout;ha.items=D.value.map(X=>{const ht=[];let dt;X.Leader?dt=X:dt=X.Primary,ht.push({Name:dt.User.DisplayName,UUID:dt.UserUUID,UserUUID:dt.User.UserUUID,IsLeader:!0,Reference:dt.Reference,Paid:dt.Paid,Total:dt.Total}),ht.push(...dt.Members.map(Ge=>({Name:Ge.User.DisplayName,UUID:Ge.UserUUID,UserUUID:Ge.User.UserUUID,IsLeader:!1,Reference:Ge.Reference,Paid:Ge.Paid,Total:Ge.Total})));const de={};return ha.headers.forEach(Ge=>{var na;const Z=aa.Items.find(Ht=>Ht.LayoutItemUUID===Ge.key);if(Z){if(Z.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&Z.SectionField)X.Submissions.forEach(Ht=>{const Ft=Ht.Data.find(K=>K.SectionFieldUUID===Z.SectionFieldUUID);if(Ft){Ge.type===hr.ACCOMMODATION?de[Z.LayoutItemUUID]={Data:Ft.Data,Registration:X}:de[Z.LayoutItemUUID]=Ft.Data;return}});else if(Z.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&Z.UserField)switch(Z.UserField){case Me.USER_DATA_SOURCE_AVATAR:de[Z.LayoutItemUUID]=v.GetProfileImageURL(X.UserUUID);break;case Me.USER_DATA_SOURCE_CONTACTS:de[Z.LayoutItemUUID]={},X.User.Generated&&X.User.Generated.telegram_handle&&(de[Z.LayoutItemUUID].telegram=`@${X.User.Generated.telegram_handle}`),X.User.Generated&&X.User.Generated.contact_emails&&(de[Z.LayoutItemUUID].email=X.User.Generated.contact_emails);break;case Me.USER_DATA_SOURCE_DISPLAY_NAME:de[Z.LayoutItemUUID]=X.User.DisplayName;break;case Me.USER_DATA_SOURCE_EMAIL:de[Z.LayoutItemUUID]=X.User.Additional.Email;break;case Me.USER_DATA_SOURCE_HANDLE:de[Z.LayoutItemUUID]=X.User.Handle;break;case Me.USER_DATA_SOURCE_DATE_OF_BIRTH:de[Z.LayoutItemUUID]=X.User.Additional.DOB;break;case Me.USER_DATA_SOURCE_FIRST_NAME:de[Z.LayoutItemUUID]=X.User.Additional.FirstName;break;case Me.USER_DATA_SOURCE_LAST_NAME:de[Z.LayoutItemUUID]=X.User.Additional.LastName;break;case Me.USER_DATA_SOURCE_TELEGRAM:X.User.Generated&&X.User.Generated.telegram_handle?de[Z.LayoutItemUUID]=`@${X.User.Generated.telegram_handle}`:de[Z.LayoutItemUUID]="";break}else if(Z.SourceType==="LAYOUT_ITEM_SOURCE_META"&&Z.MetaField){const Ht=(na=F.value.find(K=>K.Type===ke.FORM_TYPE_REGISTRATION))==null?void 0:na.FormUUID,Ft=X.Submissions.find(K=>K.FormUUID===Ht);switch(Z.MetaField){case ve.META_DATA_SOURCE_REGISTRATION_ACTIONS:de[Z.LayoutItemUUID]=X;break;case ve.META_DATA_SOURCE_REGISTRATION_GROUP:de[Z.LayoutItemUUID]=ht;break;case ve.META_DATA_SOURCE_REGISTRATION_REFERENCE:de[Z.LayoutItemUUID]=X.Reference;break;case ve.META_DATA_SOURCE_SUBMISSION_DATE:if(Ft){const K=new Date(Ft.CreatedAt||"");de[Z.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}else{const K=new Date(X.CreatedAt||"");de[Z.LayoutItemUUID]=`${K.getFullYear()}-${(K.getMonth()+1).toString().padStart(2,"0")}-${K.getDate().toString().padStart(2,"0")} ${K.getHours().toString().padStart(2,"0")}:${K.getMinutes().toString().padStart(2,"0")}:${K.getSeconds().toString().padStart(2,"0")}`}break;case ve.META_DATA_SOURCE_ACCOMMODATION_FORM:de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}}).filter(K=>{var te;return((te=K.Form)==null?void 0:te.Type)===ke.FORM_TYPE_ACCOMMODATION});break;case ve.META_DATA_SOURCE_ADMIN_FORM:de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}}).filter(K=>{var te;return((te=K.Form)==null?void 0:te.Type)===ke.FORM_TYPE_ADMIN});break;case ve.META_DATA_SOURCE_ADDITIONAL_FORM:de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}}).filter(K=>{var te;return((te=K.Form)==null?void 0:te.Type)===ke.FORM_TYPE_ADDITIONAL});break;case ve.META_DATA_SOURCE_BADGE_FORM:de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}}).filter(K=>{var te;return((te=K.Form)==null?void 0:te.Type)===ke.FORM_TYPE_BADGE});break;case ve.META_DATA_SOURCE_DEALER_FORM:de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}}).filter(K=>{var te;return((te=K.Form)==null?void 0:te.Type)===ke.FORM_TYPE_DEALER});break;case ve.META_DATA_SOURCE_PAYMENT_STATUS:if(X.Paid===0&&X.Total)de[Z.LayoutItemUUID]="REQUIRED";else if(X.Total>X.Paid)de[Z.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const K=ht.find(te=>te.Paid===0&&(te.Total||0)>0);if(K){X.Total===0&&K.Total===0?de[Z.LayoutItemUUID]="NOT_REQUIRED":X.Total>0&&K.Total===0?de[Z.LayoutItemUUID]="MISSING_REQUIRED":X.Paid>=X.Total?de[Z.LayoutItemUUID]="AWAITING_PARTNER":de[Z.LayoutItemUUID]="ALL_REQUIRED";break}else X.Total===0?de[Z.LayoutItemUUID]="NOT_REQUIRED":de[Z.LayoutItemUUID]="COMPLETE"}break;case ve.META_DATA_SOURCE_SUBMISSION_STATUS:Di(X.Submissions,F.value),de[Z.LayoutItemUUID]=X.Submissions.map(K=>{const te=F.value.find(We=>We.FormUUID===K.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:K,Registration:X}});break;case ve.META_DATA_SOURCE_DATA_LAYOUT:de[Z.LayoutItemUUID]={Registration:X,Layouts:H.value.filter(K=>{if(Z.Meta&&Z.Meta.LayoutUUID&&Array.isArray(Z.Meta.LayoutUUID))return Z.Meta.LayoutUUID.includes(K.AdminLayoutUUID)})};break}}}}),{key:X.RegistrationUUID,registration:X,...de}})}),T.value=!1)})}catch{}},qa=U=>{bt.value=!1,U&&(W.value=U,Ia())},Ia=()=>{Vr(W.value.Panels,F.value),W.value.Panels.length>0&&(pe.value=[],W.value.Panels.forEach(U=>{const g={uuid:Ot(),order:U.Order,name:U.Name,headers:[],items:[],layout:U,challenge:U.Meta&&!!U.Meta.challenge};U.Items.sort((I,L)=>I.Order>L.Order?1:I.Order==L.Order?0:-1),g.headers=U.Items.filter(I=>I.SourceType!=Rt.LAYOUT_ITEM_SOURCE_META||I.MetaField!=ve.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(I=>{var L,q;return{key:I.LayoutItemUUID,title:I.Label||((q=(L=I.SectionField)==null?void 0:L.Field)==null?void 0:q.Label)||"",align:I.Align==="end"?"end":"start",sortable:Oe(I),type:za(I),defaultSort:I.DefaultSort,meta:I.Meta}}),pe.value.push(g)}),pe.value=pe.value.sort((U,g)=>U.order>g.order?1:U.order==g.order?0:-1)),($e.value==null||$e.value=="")&&pe.value.length>0&&($e.value=pe.value[0].uuid)};C?w.getConvention(C).then(U=>{U&&(A.value=U,W.value.ConventionID=A.value.ID,W.value.ConventionUUID=A.value.ConventionUUID,Zt())}).catch(()=>{f.push("/")}):f.push("/");const za=U=>{var g,I;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_META)return`${U.SourceType}.${U.MetaField}`;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_FORM)return(I=(g=U.SectionField)==null?void 0:g.Field)==null?void 0:I.Type;if(U.SourceType===Rt.LAYOUT_ITEM_SOURCE_USER)return`${U.SourceType}.${U.UserField}`},ka=()=>{const U=pe.value.find(g=>g.uuid===$e.value);return U?!!U.layout.Items.find(g=>g.SourceType==Rt.LAYOUT_ITEM_SOURCE_META&&g.MetaField==ve.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Oe=U=>{const g=[ve.META_DATA_SOURCE_ACCOMMODATION_FORM,ve.META_DATA_SOURCE_BADGE_FORM,ve.META_DATA_SOURCE_DEALER_FORM,ve.META_DATA_SOURCE_REGISTRATION_FORM,ve.META_DATA_SOURCE_REGISTRATION_REFERENCE,ve.META_DATA_SOURCE_SUBMISSION_DATE,ve.META_DATA_SOURCE_SUBMISSION_STATUS],I=[Me.USER_DATA_SOURCE_DISPLAY_NAME,Me.USER_DATA_SOURCE_EMAIL,Me.USER_DATA_SOURCE_HANDLE,Me.USER_DATA_SOURCE_DATE_OF_BIRTH,Me.USER_DATA_SOURCE_FIRST_NAME,Me.USER_DATA_SOURCE_LAST_NAME];return g.includes(U.MetaField)||I.includes(U.UserField)},Pt=U=>{Be.value=U,st.value=!0},fe=U=>{Be.value=U,wa.value=!0},Ja=U=>{Be.value=U,Wa.value=!0};qe(st,U=>{U||(Be.value=void 0)}),qe(wa,U=>{U||(Be.value=void 0)});const Ke=async(U="")=>{Ca.value=await w.getRegistrationGroup(U)},rt=({registration:U,form:g})=>{const I={FormUUID:g.FormUUID,Limit:1,RegistrationUUID:U.RegistrationUUID};switch(g.Type){case ke.FORM_TYPE_ACCOMMODATION:I.Accommodation=!0;break;case ke.FORM_TYPE_ADDITIONAL:I.Additional=!0;break;case ke.FORM_TYPE_ADMIN:I.AdminForm=!0;break;case ke.FORM_TYPE_BADGE:I.Badge=!0;break;case ke.FORM_TYPE_DEALER:I.Dealer=!0;break;case ke.FORM_TYPE_REGISTRATION:I.Registration=!0;break}w.searchConventionRegistrations(U.ConventionUUID,I).then(L=>{if(L&&L.Total>0){if(Be.value=L.Registrations[0],!Be.value)return;Ke(U.RegistrationUUID).then(()=>{var q,ue;Be.value&&((q=Be.value)!=null&&q.Submissions)&&(Bt.value=(ue=Be.value)==null?void 0:ue.Submissions.find(tt=>tt.FormUUID===g.FormUUID)),Bt.value||(Bt.value=Ka(g,U)),Qt.value=g,$t.value=!0})}})},Ka=(U,g)=>({ID:0,SubmissionUUID:Ot(),FormID:U.ID,FormUUID:U.FormUUID,Form:U,UserID:g.UserID,UserUUID:g.UserUUID,RegistrationID:g.ID,RegistrationUUID:g.RegistrationUUID,Registration:g,Data:[],Status:Ti.SUBMISSION_STATUS_NULL}),Qa=U=>{Lt(),ze.value=U,St.value=!1;const g=pe.value.find(I=>I.uuid===$e.value);g&&g.challenge?ut.value=!0:ye()},fa=U=>{w.switchUser(U.UserUUID).then(g=>{g&&Ri(g.tokens,g.user,f,!1)}).catch(g=>{console.error(g)})},va=U=>{Wi(U)?(Lt(),Ye.value=U,pt.value=!1,ye()):isNaN(parseInt(U))||(Lt(),Ne.value=U,pt.value=!1,ye())},Lt=()=>{ze.value="",Ye.value="",Ne.value="",yt.value.Value="",_t.value="",Dt.value.Value="",Xe.value.Value="",it.value.Value=""},Xa=()=>{gt.value=Te.value};return k.on("registration.group.leave",U=>{w.leaveRegistrationGroup(U).then(g=>{g&&Ke(U).then(()=>{k.emit("registration.group.left",g)})})}),k.on("registration.group.remove.member",U=>{w.leaveRegistrationGroup(U).then(g=>{g&&Ke(U).then(()=>{k.emit("registration.group.left",g)})})}),k.on("checkin-saved",()=>{Lt()}),(U,g)=>A.value?(_(),N(Zn,{key:0},{default:d(()=>[s(er,{color:"blue-darken-4"},{default:d(()=>[s(_r,{modelValue:$e.value,"onUpdate:modelValue":g[0]||(g[0]=I=>$e.value=I),"show-arrows":""},{default:d(()=>[(_(!0),z(me,null,je(pe.value,I=>(_(),N(Dr,{key:I.uuid,value:I.uuid},{default:d(()=>[Q(oe(I.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(Wt),s(au),s(se,{icon:"mdi:mdi-cog-outline",onClick:g[1]||(g[1]=I=>bt.value=!0)})]),_:1}),s(Ar,{modelValue:$e.value,"onUpdate:modelValue":g[33]||(g[33]=I=>$e.value=I),disabled:!0,touch:!1},{default:d(()=>[(_(!0),z(me,null,je(pe.value,I=>(_(),N(Gt,{key:I.uuid,value:I.uuid},{default:d(()=>[I.uuid===$e.value?(_(),N(qt,{key:0,class:"pa-2"},{default:d(()=>[s(Oi,{modelValue:gt.value,"onUpdate:modelValue":g[25]||(g[25]=L=>gt.value=L),expanded:re.value,"onUpdate:expanded":g[26]||(g[26]=L=>re.value=L),page:P.value,"onUpdate:page":g[27]||(g[27]=L=>P.value=L),"items-per-page":E.value,"onUpdate:itemsPerPage":g[28]||(g[28]=L=>E.value=L),"sort-by":Jt.value,"onUpdate:sortBy":g[29]||(g[29]=L=>Jt.value=L),headers:I.headers,"items-length":ce.value,items:I.items,"item-value":"key",loading:T.value,search:lt.value,"onUpdate:options":nt,"show-expand":ka(),"show-select":""},Ba({top:d(()=>[s(Or,{class:"mb-3"},{default:d(()=>[s(vn,null,{default:d(()=>[s(pn,{color:"green-darken-4",class:"font-weight-bold pb-0 pt-0"},{default:d(()=>{var L;return[s(B,{class:"py-0 pl-0 pr-2 text-left flex-grow-0 flex-shrink-1 text-no-wrap"},{default:d(()=>[g[46]||(g[46]=Q(" Search Criteria ")),s(Sn,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),s(B,{class:"d-none d-sm-block py-0 px-2 flex-grow-1 flex-sm-grow-0",sm:"3",md:"2"},{default:d(()=>[s(vr,{modelValue:Ne.value,"onUpdate:modelValue":g[2]||(g[2]=q=>Ne.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:g[3]||(g[3]=ft(()=>{},["stop"])),"onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:d(()=>[s(Le,{modelValue:yt.value.Value,"onUpdate:modelValue":g[4]||(g[4]=q=>yt.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:g[5]||(g[5]=ft(()=>{},["stop"])),"onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{class:"d-none d-md-block py-0 px-2",md:"3"},{default:d(()=>[s(Le,{modelValue:it.value.Value,"onUpdate:modelValue":g[6]||(g[6]=q=>it.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"plain","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(Wt,{class:"d-none d-sm-block"}),s(se,{icon:"mdi:mdi-eraser",variant:"text",title:"Clear Primary Search Values",onClick:g[7]||(g[7]=ft(q=>{Lt(),x(ye)()},["stop"]))}),s(se,{icon:"mdi:mdi-nfc",variant:"text",title:"Scan NFC Badge (not iPhone)",onClick:g[8]||(g[8]=ft(q=>St.value=!0,["stop"]))}),s(se,{icon:"mdi:mdi-qrcode-scan",variant:"text",title:"Scan Code",onClick:g[9]||(g[9]=ft(q=>pt.value=!0,["stop"]))}),(L=pe.value.find(q=>q.uuid===$e.value))!=null&&L.challenge?(_(),N(se,{key:0,icon:"mdi:mdi-magnify",variant:"text",title:"Search",onClick:g[10]||(g[10]=ft(q=>{et.value="",ut.value=!0},["stop"]))})):ee("",!0)]}),_:1}),s(yn,{class:"pt-2"},{default:d(()=>{var L;return[s(ge,null,{default:d(()=>[s(B,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:d(()=>[s(vr,{modelValue:Ne.value,"onUpdate:modelValue":g[11]||(g[11]=q=>Ne.value=q),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:d(()=>[s(Le,{modelValue:yt.value.Value,"onUpdate:modelValue":g[12]||(g[12]=q=>yt.value.Value=q),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:d(()=>[s(Le,{modelValue:_t.value,"onUpdate:modelValue":g[13]||(g[13]=q=>_t.value=q),label:"E-mail or Telegram",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Le,{modelValue:Dt.value.Value,"onUpdate:modelValue":g[14]||(g[14]=q=>Dt.value.Value=q),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Le,{modelValue:Xe.value.Value,"onUpdate:modelValue":g[15]||(g[15]=q=>Xe.value.Value=q),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:d(()=>[s(Le,{modelValue:it.value.Value,"onUpdate:modelValue":g[16]||(g[16]=q=>it.value.Value=q),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":x(ye),onInput:x(ye)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),s(B,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:d(()=>[s(be,{modelValue:At.value,"onUpdate:modelValue":g[17]||(g[17]=q=>At.value=q),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:O.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),s(B,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:d(()=>[s(be,{modelValue:zt.value,"onUpdate:modelValue":g[18]||(g[18]=q=>zt.value=q),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:he.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1}),(L=pe.value.find(q=>q.uuid===$e.value))!=null&&L.challenge?(_(),N(ge,{key:0},{default:d(()=>[s(B,{class:"text-right"},{default:d(()=>[s(se,{"prepend-icon":"mdi:mdi-magnify",title:"Search",color:"success",onClick:g[19]||(g[19]=ft(q=>{et.value="",ut.value=!0},["stop"]))},{default:d(()=>g[47]||(g[47]=[Q(" Run Search ")])),_:1})]),_:1})]),_:1})):ee("",!0)]}),_:1})]),_:1})]),_:1})]),"expanded-row":d(({columns:L,internalItem:q})=>[ie("tr",null,[ie("td",{colspan:L.length},[s(nr,{modelValue:st.value,"onUpdate:modelValue":g[21]||(g[21]=ue=>st.value=ue),registration:q.raw.registration,"onUpdate:registration":ue=>q.raw.registration=ue,accommodations:Vt.value,convention:A.value,extras:wt.value,forms:F.value,interests:Ct.value,tickets:Kt.value,title:`Registration Controls (#${q.raw.registration.Reference} ${q.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Je.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,bd)])]),"item.data-table-expand":d(({internalItem:L})=>[re.value.findIndex(q=>q===L.key)>=0?(_(),N(se,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:q=>re.value.splice(re.value.findIndex(ue=>ue===L.key),1)},{default:d(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(_(),z(me,{key:0},[Q(oe(L.raw.registration.Notes.length),1)],64)):ee("",!0)]),_:2},1032,["onClick"])):(_(),N(se,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:q=>re.value.push(L.key)},{default:d(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(_(),z(me,{key:0},[Q(oe(L.raw.registration.Notes.length),1)],64)):ee("",!0)]),_:2},1032,["onClick"]))]),bottom:d(()=>[s(ru,{"current-page":P.value,"onUpdate:currentPage":g[22]||(g[22]=L=>P.value=L),"items-per-page":E.value,"onUpdate:itemsPerPage":g[23]||(g[23]=L=>E.value=L),"item-total":ce.value},null,8,["current-page","items-per-page","item-total"]),ie("div",null,[s(se,{variant:"text",color:"primary",onClick:Xa},{default:d(()=>g[48]||(g[48]=[Q(" (Select all on every page) ")])),_:1}),s(se,{variant:"text",color:"primary",onClick:g[24]||(g[24]=L=>gt.value=[])},{default:d(()=>g[49]||(g[49]=[Q(" (Unselect all on every page) ")])),_:1})])]),_:2},[je(I.headers,L=>({name:`item.${L.key}`,fn:d(({internalItem:q,index:ue})=>[s(ss,{header:L,item:q,accommodations:Vt.value,convention:A.value,extras:wt.value,forms:F.value,interests:Ct.value,tickets:Kt.value,user:x(Xt),venues:Je.value,modelValue:I.items[ue],"onUpdate:modelValue":tt=>I.items[ue]=tt,onOpenActions:Pt,onOpenPayments:fe,onOpenTags:Ja,onReload:g[20]||(g[20]=tt=>nt({page:P.value,itemsPerPage:E.value,sortBy:G.value})),onSwitchUser:fa,onShowForm:rt},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["modelValue","expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"]),s(Bi,{modelValue:gt.value,"onUpdate:modelValue":g[30]||(g[30]=L=>gt.value=L),details:I.items,"onUpdate:details":L=>I.items=L,"model-type":"registration",convention:A.value,"onUpdate:convention":g[31]||(g[31]=L=>A.value=L),custom:""},null,8,["modelValue","details","onUpdate:details","convention"]),s(ge,null,{default:d(()=>[s(B,null,{default:d(()=>[x(m)?(_(),N(Td,{key:0,modelValue:gt.value,"onUpdate:modelValue":g[32]||(g[32]=L=>gt.value=L)},null,8,["modelValue"])):ee("",!0)]),_:1})]),_:1})]),_:2},1024)):ee("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),pt.value?(_(),N(_a,{key:0,modelValue:pt.value,"onUpdate:modelValue":g[34]||(g[34]=I=>pt.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:d(()=>[s(hd,{onScan:va})]),_:1},8,["modelValue"])):ee("",!0),St.value?(_(),N(_a,{key:1,modelValue:St.value,"onUpdate:modelValue":g[35]||(g[35]=I=>St.value=I),title:"Scan Code",width:"auto","card-class":"px-2 px-sm-6"},{default:d(()=>[s(yi,{onScan:Qa})]),_:1},8,["modelValue"])):ee("",!0),bt.value?(_(),N(eu,{key:2,title:"Edit Layouts",modelValue:bt.value,"onUpdate:modelValue":g[36]||(g[36]=I=>bt.value=I),convention:A.value,onSave:qa},null,8,["modelValue","convention"])):ee("",!0),Be.value?(_(),z(me,{key:3},[st.value?(_(),N(nr,{key:0,modelValue:st.value,"onUpdate:modelValue":g[37]||(g[37]=I=>st.value=I),registration:Be.value,"onUpdate:registration":g[38]||(g[38]=I=>Be.value=I),accommodations:Vt.value,convention:A.value,extras:wt.value,forms:F.value,interests:Ct.value,tickets:Kt.value,title:`Registration Controls (#${Be.value.Reference} ${Be.value.User.DisplayName})`,"use-dialog":!0,venues:Je.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):ee("",!0)],64)):ee("",!0),$t.value&&Bt.value&&Qt.value?(_(),N(Ya,{key:4,modelValue:$t.value,"onUpdate:modelValue":g[42]||(g[42]=I=>$t.value=I),scrollable:!0,fullscreen:!0},{default:d(()=>[s(qt,{class:"bg-red-darken-4"},{default:d(()=>[s(er,{color:"error"},{default:d(()=>[s(Hi,null,{default:d(()=>g[50]||(g[50]=[Q("Submission Editor - Admin Mode")])),_:1}),s(Wt),s(_i,null,{default:d(()=>[s(se,{icon:"mdi:mdi-window-close",onClick:g[39]||(g[39]=I=>$t.value=!1)})]),_:1})]),_:1}),s(da,{class:"pa-0"},{default:d(()=>[s(gi,{modelValue:Qt.value,"onUpdate:modelValue":g[40]||(g[40]=I=>Qt.value=I),admin:!0,convention:A.value,data:Bt.value,editable:!0,"registration-group":Ca.value,onClose:g[41]||(g[41]=I=>{$t.value=!1,nt({page:P.value,itemsPerPage:E.value,sortBy:G.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):ee("",!0),s(Ya,{modelValue:ut.value,"onUpdate:modelValue":g[45]||(g[45]=I=>ut.value=I)},{default:d(()=>[s(qt,{class:"rounded-xl"},{default:d(()=>[s(Da,null,{default:d(()=>[s(Aa,{class:"px-0"},{default:d(()=>g[51]||(g[51]=[Q("Search Challenge")])),_:1}),s(Er,null,{default:d(()=>g[52]||(g[52]=[Q("Please provide the reason for this search. If it relates to an open case, enter the relevant identifiers.")])),_:1})]),_:1}),s(da,{color:"white"},{default:d(()=>[s(Mr,{modelValue:et.value,"onUpdate:modelValue":g[43]||(g[43]=I=>et.value=I),label:"Reason"},null,8,["modelValue"])]),_:1}),s(_n,null,{default:d(()=>[s(se,{onClick:g[44]||(g[44]=I=>{et.value="",ut.value=!1})},{default:d(()=>g[53]||(g[53]=[Q("Cancel")])),_:1}),s(Wt),s(se,{onClick:x(Et),disabled:et.value.length<3},{default:d(()=>g[54]||(g[54]=[Q("Search")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(_(),N(Zn,{key:1},{default:d(()=>g[55]||(g[55]=[Q(" Convention Not Found ")])),_:1}))}});export{Pc as default};
